<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Using Delve to debug Go containers on Kubernetes | (p)retired</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="An interesting question on Stack overflow prompted me to understand how to use Visual Studio Code and Delve to remotely debug a Golang app running on Kubernetes (MicroK8s).
The OP is using Gin which was also new to me so the question gave me an opportunity to try out several things.
Sources
A simple healthz handler:
package main

import (
	&#34;flag&#34;
	&#34;log/slog&#34;
	&#34;net/http&#34;

	&#34;github.com/gin-gonic/gin&#34;
)

var (
	addr = flag.String(&#34;addr&#34;, &#34;0.0.0.0:8080&#34;, &#34;HTTP server endpoint&#34;)
)

func healthz(c *gin.Context) {
	c.String(http.StatusOK, &#34;ok&#34;)
}
func main() {
	flag.Parse()

	router := gin.Default()
	router.GET(&#34;/fib&#34;, handler())
	router.GET(&#34;healthz&#34;, healthz)

	slog.Info(&#34;Server starting&#34;)
	slog.Info(&#34;Server error&#34;,
		&#34;err&#34;, router.Run(*addr),
	)
}
Containerfile:">
    <meta name="generator" content="Hugo 0.150.0-DEV">
    
    
    
    
      <meta name="robots" content="index, follow">
    

    
<link rel="stylesheet" href="/ananke/css/main.min.2438bcafd7af9675c426d1a4afcd16cfff18e4e10f401071e45b5ccd3be40a0d.css" >




    

    
    
      

    

    

    <script data-goatcounter="https://pretired.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
 
    <meta property="og:url" content="https://pretired.dazwilkin.com/posts/240528/">
  <meta property="og:site_name" content="(p)retired">
  <meta property="og:title" content="Using Delve to debug Go containers on Kubernetes">
  <meta property="og:description" content="An interesting question on Stack overflow prompted me to understand how to use Visual Studio Code and Delve to remotely debug a Golang app running on Kubernetes (MicroK8s).
The OP is using Gin which was also new to me so the question gave me an opportunity to try out several things.
Sources A simple healthz handler:
package main import ( &#34;flag&#34; &#34;log/slog&#34; &#34;net/http&#34; &#34;github.com/gin-gonic/gin&#34; ) var ( addr = flag.String(&#34;addr&#34;, &#34;0.0.0.0:8080&#34;, &#34;HTTP server endpoint&#34;) ) func healthz(c *gin.Context) { c.String(http.StatusOK, &#34;ok&#34;) } func main() { flag.Parse() router := gin.Default() router.GET(&#34;/fib&#34;, handler()) router.GET(&#34;healthz&#34;, healthz) slog.Info(&#34;Server starting&#34;) slog.Info(&#34;Server error&#34;, &#34;err&#34;, router.Run(*addr), ) } Containerfile:">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-05-28T00:00:00-07:00">
    <meta property="article:modified_time" content="2024-05-28T00:00:00-07:00">
    <meta property="article:tag" content="Delve">
    <meta property="article:tag" content="Dlv">
    <meta property="article:tag" content="Golang">
    <meta property="article:tag" content="Kubernetes">
    <meta property="article:tag" content="MicroK8s">
    <meta property="article:tag" content="Gin">

  <meta itemprop="name" content="Using Delve to debug Go containers on Kubernetes">
  <meta itemprop="description" content="An interesting question on Stack overflow prompted me to understand how to use Visual Studio Code and Delve to remotely debug a Golang app running on Kubernetes (MicroK8s).
The OP is using Gin which was also new to me so the question gave me an opportunity to try out several things.
Sources A simple healthz handler:
package main import ( &#34;flag&#34; &#34;log/slog&#34; &#34;net/http&#34; &#34;github.com/gin-gonic/gin&#34; ) var ( addr = flag.String(&#34;addr&#34;, &#34;0.0.0.0:8080&#34;, &#34;HTTP server endpoint&#34;) ) func healthz(c *gin.Context) { c.String(http.StatusOK, &#34;ok&#34;) } func main() { flag.Parse() router := gin.Default() router.GET(&#34;/fib&#34;, handler()) router.GET(&#34;healthz&#34;, healthz) slog.Info(&#34;Server starting&#34;) slog.Info(&#34;Server error&#34;, &#34;err&#34;, router.Run(*addr), ) } Containerfile:">
  <meta itemprop="datePublished" content="2024-05-28T00:00:00-07:00">
  <meta itemprop="dateModified" content="2024-05-28T00:00:00-07:00">
  <meta itemprop="wordCount" content="978">
  <meta itemprop="keywords" content="Delve,Dlv,Golang,Kubernetes,MicroK8s,Gin,JSON-RPC">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Using Delve to debug Go containers on Kubernetes">
  <meta name="twitter:description" content="An interesting question on Stack overflow prompted me to understand how to use Visual Studio Code and Delve to remotely debug a Golang app running on Kubernetes (MicroK8s).
The OP is using Gin which was also new to me so the question gave me an opportunity to try out several things.
Sources A simple healthz handler:
package main import ( &#34;flag&#34; &#34;log/slog&#34; &#34;net/http&#34; &#34;github.com/gin-gonic/gin&#34; ) var ( addr = flag.String(&#34;addr&#34;, &#34;0.0.0.0:8080&#34;, &#34;HTTP server endpoint&#34;) ) func healthz(c *gin.Context) { c.String(http.StatusOK, &#34;ok&#34;) } func main() { flag.Parse() router := gin.Default() router.GET(&#34;/fib&#34;, handler()) router.GET(&#34;healthz&#34;, healthz) slog.Info(&#34;Server starting&#34;) slog.Info(&#34;Server error&#34;, &#34;err&#34;, router.Run(*addr), ) } Containerfile:">

      
    
	
  </head>

  <body class="ma0 avenir bg-near-white production">

    
   
  

  <header>
    <div class="bg-dark-blue">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l center items-center justify-between">
    <a href="/" class="f3 fw2 hover-white white-90 dib no-underline">
      
        (p)retired
      
    </a>
    <div class="flex-l items-center">
      

      
      <div class="ananke-socials"></div>

    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  
  <article class="flex-l mw8 center ph3 flex-wrap justify-between">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked ttu">
          
        Posts
      </aside><div id="sharing" class="mt3 ananke-socials"></div>
<h1 class="f1 athelas mt3 mb1">Using Delve to debug Go containers on Kubernetes</h1>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2024-05-28T00:00:00-07:00">May 28, 2024</time>
      

      
      
        <span class="f6 mv4 dib tracked"> - 5 minutes read </span>
        <span class="f6 mv4 dib tracked"> - 978 words </span>
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><p>An interesting <a href="https://stackoverflow.com/questions/78537605">question</a> on Stack overflow prompted me to understand how to use Visual Studio Code and <a href="https://github.com/go-delve/delve">Delve</a> to remotely debug a Golang app running on Kubernetes (MicroK8s).</p>
<p>The OP is using <a href="https://github.com/gin-gonic/gin">Gin</a> which was also new to me so the question gave me an opportunity to try out several things.</p>
<h2 id="sources">Sources</h2>
<p>A simple <code>healthz</code> handler:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-golang" data-lang="golang"><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;flag&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;log/slog&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;net/http&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;github.com/gin-gonic/gin&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">addr</span> = <span style="color:#a6e22e">flag</span>.<span style="color:#a6e22e">String</span>(<span style="color:#e6db74">&#34;addr&#34;</span>, <span style="color:#e6db74">&#34;0.0.0.0:8080&#34;</span>, <span style="color:#e6db74">&#34;HTTP server endpoint&#34;</span>)
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">healthz</span>(<span style="color:#a6e22e">c</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">gin</span>.<span style="color:#a6e22e">Context</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">c</span>.<span style="color:#a6e22e">String</span>(<span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">StatusOK</span>, <span style="color:#e6db74">&#34;ok&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">flag</span>.<span style="color:#a6e22e">Parse</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">router</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">gin</span>.<span style="color:#a6e22e">Default</span>()
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">router</span>.<span style="color:#a6e22e">GET</span>(<span style="color:#e6db74">&#34;/fib&#34;</span>, <span style="color:#a6e22e">handler</span>())
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">router</span>.<span style="color:#a6e22e">GET</span>(<span style="color:#e6db74">&#34;healthz&#34;</span>, <span style="color:#a6e22e">healthz</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">slog</span>.<span style="color:#a6e22e">Info</span>(<span style="color:#e6db74">&#34;Server starting&#34;</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">slog</span>.<span style="color:#a6e22e">Info</span>(<span style="color:#e6db74">&#34;Server error&#34;</span>,
</span></span><span style="display:flex;"><span>		<span style="color:#e6db74">&#34;err&#34;</span>, <span style="color:#a6e22e">router</span>.<span style="color:#a6e22e">Run</span>(<span style="color:#f92672">*</span><span style="color:#a6e22e">addr</span>),
</span></span><span style="display:flex;"><span>	)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><code>Containerfile</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Dockerfile" data-lang="Dockerfile"><span style="display:flex;"><span><span style="color:#66d9ef">ARG</span> GOLANG_VERSION<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;1.22.3&#34;</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">FROM</span> <span style="color:#e6db74">docker.io/golang:${GOLANG_VERSION</span><span style="color:#f92672">}</span> AS builder<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">WORKDIR</span> <span style="color:#e6db74">/app</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">COPY</span> go.mod go.mod<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">COPY</span> go.sum go.sum<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">RUN</span> go mod download<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">COPY</span> main.go main.go<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">RUN</span> go build -gcflags <span style="color:#e6db74">&#34;all=-N -l&#34;</span> -a -o server .<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">RUN</span> go install github.com/go-delve/delve/cmd/dlv@latest<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">FROM</span> <span style="color:#e6db74">gcr.io/distroless/base-debian12</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>WORKDIR /<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">COPY</span> --from<span style="color:#f92672">=</span>builder /app/server /<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">COPY</span> --from<span style="color:#f92672">=</span>builder /go/bin/dlv /<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">EXPOSE</span> <span style="color:#e6db74">8080</span> <span style="color:#ae81ff">40000</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">ENTRYPOINT</span> [<span style="color:#e6db74">&#34;./dlv&#34;</span>,<span style="color:#e6db74">&#34;exec&#34;</span>,<span style="color:#e6db74">&#34;./server&#34;</span>,<span style="color:#e6db74">&#34;--listen=:40000&#34;</span>,<span style="color:#e6db74">&#34;--headless=true&#34;</span>,<span style="color:#e6db74">&#34;--api-version=2&#34;</span>,<span style="color:#e6db74">&#34;--log&#34;</span>,<span style="color:#e6db74">&#34;--log-output=debugger,rpc,dap,fncall&#34;</span>]<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><p><code>launch.json</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-JSON" data-lang="JSON"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;version&#34;</span>: <span style="color:#e6db74">&#34;0.2.0&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;configurations&#34;</span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;remote&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;go&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;request&#34;</span>: <span style="color:#e6db74">&#34;attach&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;mode&#34;</span>: <span style="color:#e6db74">&#34;remote&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;remotePath&#34;</span>: <span style="color:#e6db74">&#34;/app&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;port&#34;</span>: <span style="color:#ae81ff">40000</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;host&#34;</span>: <span style="color:#e6db74">&#34;0.0.0.0&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;showLog&#34;</span>:<span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;trace&#34;</span>:<span style="color:#e6db74">&#34;verbose&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Intentionally excluded
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#75715e">// &#34;substitutePath&#34;: [
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#75715e">//     {
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#75715e">//         &#34;from&#34;:&#34;${workspaceFolder}&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#75715e">//         &#34;to&#34;:&#34;/app&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#75715e">//     },
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#75715e">// ]
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    ]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<p><strong>NOTE</strong> <a href="https://github.com/golang/vscode-go"><code>vscode.go</code></a> has extensive debugging <a href="https://github.com/golang/vscode-go/blob/master/docs/debugging.md#configuration">configuration</a></p></blockquote>
<h2 id="local-binary">Local binary</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>go build <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>-gcflags <span style="color:#e6db74">&#34;all=-N -l&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>-a <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>-o server <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>. <span style="color:#f92672">&amp;&amp;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>dlv exec ./server <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--listen<span style="color:#f92672">=</span>:40000 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--headless<span style="color:#f92672">=</span>true <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--api-version<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--log <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--log-output<span style="color:#f92672">=</span>debugger,rpc,dap,fncall
</span></span></code></pre></div><p>Should yield:</p>
<pre tabindex="0"><code>API server listening at: [::]:40000
2024-05-28T14:37:30-07:00 warning layer=rpc Listening for remote connections (connections are not authenticated nor encrypted)
2024-05-28T14:37:30-07:00 debug layer=rpc API server pid = 3232792
2024-05-28T14:37:30-07:00 info layer=debugger launching process with args: [./server]
2024-05-28T14:37:31-07:00 debug layer=debugger Adding target 3232798 &#34;/path/to/server&#34;
</code></pre><p>Copy the relevant subset of <code>launch.json</code> to your Visual Studio Code workspace and then &ldquo;Run&rdquo; | &ldquo;Start Debugging&rdquo; (F5) <code>remote</code>.</p>
<p>Once the debugger attaches, you should be able to add breakpoints to your code e.g. to the line:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Golang" data-lang="Golang"><span style="display:flex;"><span><span style="color:#a6e22e">c</span>.<span style="color:#a6e22e">String</span>(<span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">StatusOK</span>, <span style="color:#e6db74">&#34;ok&#34;</span>)
</span></span></code></pre></div><p>And then trying curl&rsquo;ing the endpoint <code>curl http://localhost:8080/healthz</code> should yield:</p>
<pre tabindex="0"><code>2024-05-28T14:45:19-07:00 debug layer=debugger continuing
2024-05-28T14:45:19-07:00 debug layer=debugger ContinueOnce
[GIN] 2024/05/28 - 14:45:19 | 200 |  2.479709919s |             ::1 | GET      &#34;/healthz&#34;
</code></pre><h2 id="local-container">Local container</h2>
<p>You can then build and run a container image:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>podman build <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--tag<span style="color:#f92672">=</span>localhost/server:v0.0.1 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--file<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>PWD<span style="color:#e6db74">}</span>/Containerfile <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span><span style="color:#e6db74">${</span>PWD<span style="color:#e6db74">}</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>podman run <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--privileged <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--interactive --tty --rm <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--publish<span style="color:#f92672">=</span>8080:8080/tcp <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--publish<span style="color:#f92672">=</span>40000:40000/tcp <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>localhost/server:v0.0.1
</span></span></code></pre></div><p>You should see something similar to:</p>
<pre tabindex="0"><code>API server listening at: [::]:40000
2024-05-28T21:52:28Z warning layer=rpc Listening for remote connections (connections are not authenticated nor encrypted)
2024-05-28T21:52:28Z info layer=debugger launching process with args: [./server]
2024-05-28T21:52:28Z debug layer=debugger Adding target 7 &#34;/server&#34;
</code></pre><p>This time, you will want to include the <code>substitutePath</code> section in <code>launch.json</code>. This is because your local code is in <code>${workspaceFolder}</code> but the code that&rsquo;s running in the container was built (!) in <code>/app</code>. The statement maps between the two so that Delve knows what local code maps to what remote code.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-JSON" data-lang="JSON"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;version&#34;</span>: <span style="color:#e6db74">&#34;0.2.0&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;configurations&#34;</span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;local&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;go&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;request&#34;</span>: <span style="color:#e6db74">&#34;launch&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;mode&#34;</span>: <span style="color:#e6db74">&#34;debug&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;program&#34;</span>: <span style="color:#e6db74">&#34;${workspaceFolder}&#34;</span>
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;remote&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;go&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;request&#34;</span>: <span style="color:#e6db74">&#34;attach&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;mode&#34;</span>: <span style="color:#e6db74">&#34;remote&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;remotePath&#34;</span>: <span style="color:#e6db74">&#34;/app&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;port&#34;</span>: <span style="color:#ae81ff">40000</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;host&#34;</span>: <span style="color:#e6db74">&#34;0.0.0.0&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;showLog&#34;</span>:<span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;trace&#34;</span>:<span style="color:#e6db74">&#34;verbose&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;substitutePath&#34;</span>: [
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                    <span style="color:#f92672">&#34;from&#34;</span>:<span style="color:#e6db74">&#34;${workspaceFolder}&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#f92672">&#34;to&#34;</span>:<span style="color:#e6db74">&#34;/app&#34;</span>,
</span></span><span style="display:flex;"><span>                },
</span></span><span style="display:flex;"><span>            ]
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    ]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>&ldquo;Run&rdquo; | &ldquo;Start Debugging&rdquo; (F5) <code>remote</code> and, once the debugger attaches, curl the <code>healthz</code> endpoint and you should see similar output:</p>
<pre tabindex="0"><code>2024-05-28T22:00:37Z debug layer=debugger continuing
2024-05-28T22:00:37Z debug layer=debugger ContinueOnce
[GIN] 2024/05/28 - 22:00:37 | 200 |  3.300095413s |      10.0.2.100 | GET      &#34;/healthz&#34;
</code></pre><h2 id="kubernetes">Kubernetes</h2>
<p>I&rsquo;m using MicroK8s but the code should work (!?) with any Kubernetes distribution. You&rsquo;ll need to ensure your container is accessible to your Kubernetes infrastructure. MicroK8s includes a private image registry (<code>localhost:32000</code>) and I&rsquo;m pushing the image to that before:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-YAML" data-lang="YAML"><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">List</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">items</span>:
</span></span><span style="display:flex;"><span>- <span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Deployment</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">apps/v1</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">labels</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">app</span>: <span style="color:#ae81ff">server</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">name</span>: <span style="color:#ae81ff">server</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">selector</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">matchLabels</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">app</span>: <span style="color:#ae81ff">server</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">template</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">labels</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">app</span>: <span style="color:#ae81ff">server</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">containers</span>:
</span></span><span style="display:flex;"><span>        - <span style="color:#f92672">image</span>: <span style="color:#ae81ff">localhost:32000/server:v0.0.1</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">imagePullPolicy</span>: <span style="color:#ae81ff">IfNotPresent</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">name</span>: <span style="color:#ae81ff">server</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">ports</span>:
</span></span><span style="display:flex;"><span>          - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">http</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">containerPort</span>: <span style="color:#ae81ff">8080</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">protocol</span>: <span style="color:#ae81ff">TCP</span>
</span></span><span style="display:flex;"><span>          - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">dlv</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">containerPort</span>: <span style="color:#ae81ff">40000</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">protocol</span>: <span style="color:#ae81ff">TCP</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">resources</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">limits</span>:
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">memory</span>: <span style="color:#ae81ff">500Mi</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">requests</span>:
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">cpu</span>: <span style="color:#ae81ff">250m</span>
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">memory</span>:  <span style="color:#ae81ff">250Mi</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">securityContext</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">allowPrivilegeEscalation</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">privileged</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">readOnlyRootFilesystem</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">runAsGroup</span>: <span style="color:#ae81ff">1000</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">runAsNonRoot</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">runAsUser</span>: <span style="color:#ae81ff">1000</span>
</span></span><span style="display:flex;"><span>- <span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Service</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">name</span>: <span style="color:#ae81ff">server</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">labels</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">app</span>: <span style="color:#ae81ff">server</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">selector</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">app</span>: <span style="color:#ae81ff">server</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">ports</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">http</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">protocol</span>: <span style="color:#ae81ff">TCP</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">port</span>: <span style="color:#ae81ff">8080</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">targetPort</span>: <span style="color:#ae81ff">http</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">dlv</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">protocol</span>: <span style="color:#ae81ff">TCP</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">port</span>: <span style="color:#ae81ff">40000</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">targetPort</span>: <span style="color:#ae81ff">dlv</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">type</span>: <span style="color:#ae81ff">NodePort</span>
</span></span></code></pre></div><p>You will need to create a namespace and then deploy this to it:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>NAMESPACE<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;...&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>kubectl create namespace <span style="color:#e6db74">${</span>NAMESPACE<span style="color:#e6db74">}</span>
</span></span><span style="display:flex;"><span>kubectl apply --filename<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>PWD<span style="color:#e6db74">}</span>/server.yaml <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--namespace<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>NAMESPACE<span style="color:#e6db74">}</span>
</span></span></code></pre></div><p>You can then follow the <code>Deployment's</code> logs from one shell:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl logs deployment/server <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--namespace<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>NAMESPACE<span style="color:#e6db74">}</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--follow
</span></span></code></pre></div><p>To see:</p>
<pre tabindex="0"><code>2024-05-28T22:08:25Z error layer=debugger could not create config directory: mkdir .config: read-only file system
API server listening at: [::]:40000
2024-05-28T22:08:25Z warning layer=rpc Listening for remote connections (connections are not authenticated nor encrypted)
2024-05-28T22:08:25Z debug layer=rpc API server pid = 1
2024-05-28T22:08:25Z info layer=debugger launching process with args: [./server]
2024-05-28T22:08:25Z debug layer=debugger Adding target 12 &#34;/server&#34;
</code></pre><p>And then in another shell:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl port-forward deployment/server <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>---namespace<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>NAMESPACE<span style="color:#e6db74">}</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>8080:localhost:8080 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>40000:localhost:40000
</span></span></code></pre></div><p>And then (!) start debugging <code>remote</code> and, once it&rsquo;s running, curl the endpoint:</p>
<pre tabindex="0"><code>2024-05-28T22:09:35Z debug layer=debugger continuing
2024-05-28T22:09:35Z debug layer=debugger ContinueOnce
[GIN] 2024/05/28 - 22:09:35 | 200 |  2.753903087s |       127.0.0.1 | GET      &#34;/healthz&#34;
</code></pre><h2 id="json-rpc"><a href="https://www.jsonrpc.org/">JSON-RPC</a></h2>
<p>Delve&rsquo;s API server uses <a href="https://www.jsonrpc.org/">JSON-RPC</a> over TCP (<strong>not</strong> HTTP).</p>
<p>See <a href="https://github.com/go-delve/delve/blob/master/Documentation/api/ClientHowto.md#controlling-the-backend">Controlling the backend</a>.</p>
<p>The API is documented <a href="https://pkg.go.dev/github.com/go-delve/Delve/service/rpc2#RPCServer"><code>RPCServer</code></a></p>
<p>Some examples:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>telnet localhost <span style="color:#ae81ff">40000</span>
</span></span></code></pre></div><pre tabindex="0"><code>Trying 127.0.0.1...
Connected to localhost.
Escape character is &#39;^]&#39;.
</code></pre><h4 id="processpid"><a href="https://pkg.go.dev/github.com/go-delve/Delve/service/rpc2#RPCServer.ProcessPid"><code>ProcessPid</code></a>:</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-JSON" data-lang="JSON"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;method&#34;</span>:<span style="color:#e6db74">&#34;RPCServer.ProcessPid&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;params&#34;</span>:[],
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;id&#34;</span>:<span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<p><strong>NOTE</strong> <code>id</code> is used to associate requests with replies and can be any integer value.</p></blockquote>
<p>Yielding:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-JSON" data-lang="JSON"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;id&#34;</span>:<span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;result&#34;</span>:{
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;Pid&#34;</span>:<span style="color:#ae81ff">12</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;error&#34;</span>:<span style="color:#66d9ef">null</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="listbreakpoints"><a href="https://pkg.go.dev/github.com/go-delve/Delve/service/rpc2#RPCServer.ListBreakpoints"><code>ListBreakpoints</code></a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-JSON" data-lang="JSON"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;method&#34;</span>:<span style="color:#e6db74">&#34;RPCServer.ListBreakpoints&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;params&#34;</span>:[],
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;id&#34;</span>:<span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-JSON" data-lang="JSON"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;id&#34;</span>:<span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;result&#34;</span>:{
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;Breakpoints&#34;</span>:[{
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;id&#34;</span>:<span style="color:#ae81ff">-1</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;name&#34;</span>:<span style="color:#e6db74">&#34;unrecovered-panic&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;addr&#34;</span>:<span style="color:#ae81ff">4465604</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;addrs&#34;</span>:[<span style="color:#ae81ff">4465604</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;addrpid&#34;</span>:[<span style="color:#ae81ff">12</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;file&#34;</span>:<span style="color:#e6db74">&#34;/usr/local/go/src/runtime/panic.go&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;line&#34;</span>:<span style="color:#ae81ff">1217</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;functionName&#34;</span>:<span style="color:#e6db74">&#34;runtime.fatalpanic&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;ExprString&#34;</span>:<span style="color:#e6db74">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;Cond&#34;</span>:<span style="color:#e6db74">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;HitCond&#34;</span>:<span style="color:#e6db74">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;HitCondPerG&#34;</span>:<span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;continue&#34;</span>:<span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;traceReturn&#34;</span>:<span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;goroutine&#34;</span>:<span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;stacktrace&#34;</span>:<span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;variables&#34;</span>:[<span style="color:#e6db74">&#34;runtime.curg._panic.arg&#34;</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;LoadArgs&#34;</span>:<span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;LoadLocals&#34;</span>:<span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;WatchExpr&#34;</span>:<span style="color:#e6db74">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;WatchType&#34;</span>:<span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;hitCount&#34;</span>:{},
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;totalHitCount&#34;</span>:<span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;disabled&#34;</span>:<span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>        },{
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;id&#34;</span>:<span style="color:#ae81ff">-2</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;name&#34;</span>:<span style="color:#e6db74">&#34;runtime-fatal-throw&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;addr&#34;</span>:<span style="color:#ae81ff">4464100</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;addrs&#34;</span>:[<span style="color:#ae81ff">4464100</span>,<span style="color:#ae81ff">4464324</span>,<span style="color:#ae81ff">4562158</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;addrpid&#34;</span>:[<span style="color:#ae81ff">12</span>,<span style="color:#ae81ff">12</span>,<span style="color:#ae81ff">12</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;file&#34;</span>:<span style="color:#e6db74">&#34;\u003cmultiple locations\u003e&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;line&#34;</span>:<span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;functionName&#34;</span>:<span style="color:#e6db74">&#34;(multiple functions)&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;ExprString&#34;</span>:<span style="color:#e6db74">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;Cond&#34;</span>:<span style="color:#e6db74">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;HitCond&#34;</span>:<span style="color:#e6db74">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;HitCondPerG&#34;</span>:<span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;continue&#34;</span>:<span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;traceReturn&#34;</span>:<span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;goroutine&#34;</span>:<span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;stacktrace&#34;</span>:<span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;LoadArgs&#34;</span>:<span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;LoadLocals&#34;</span>:<span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;WatchExpr&#34;</span>:<span style="color:#e6db74">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;WatchType&#34;</span>:<span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;hitCount&#34;</span>:{},
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;totalHitCount&#34;</span>:<span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;disabled&#34;</span>:<span style="color:#66d9ef">false</span>}]},
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;error&#34;</span>:<span style="color:#66d9ef">null</span>
</span></span><span style="display:flex;"><span>        }<span style="color:#960050;background-color:#1e0010">]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#960050;background-color:#1e0010">},</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;error&#34;</span><span style="color:#960050;background-color:#1e0010">:</span><span style="color:#66d9ef">null</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">}</span>
</span></span></code></pre></div><ul class="pa0">
  
   <li class="list di">
     <a href="/tags/delve/" class="link f5 grow br-pill ba ph3 pv2 mb2 dib black sans-serif no-underline">Delve</a>
   </li>
  
   <li class="list di">
     <a href="/tags/dlv/" class="link f5 grow br-pill ba ph3 pv2 mb2 dib black sans-serif no-underline">Dlv</a>
   </li>
  
   <li class="list di">
     <a href="/tags/golang/" class="link f5 grow br-pill ba ph3 pv2 mb2 dib black sans-serif no-underline">Golang</a>
   </li>
  
   <li class="list di">
     <a href="/tags/kubernetes/" class="link f5 grow br-pill ba ph3 pv2 mb2 dib black sans-serif no-underline">Kubernetes</a>
   </li>
  
   <li class="list di">
     <a href="/tags/microk8s/" class="link f5 grow br-pill ba ph3 pv2 mb2 dib black sans-serif no-underline">MicroK8s</a>
   </li>
  
   <li class="list di">
     <a href="/tags/gin/" class="link f5 grow br-pill ba ph3 pv2 mb2 dib black sans-serif no-underline">Gin</a>
   </li>
  
   <li class="list di">
     <a href="/tags/json-rpc/" class="link f5 grow br-pill ba ph3 pv2 mb2 dib black sans-serif no-underline">JSON-RPC</a>
   </li>
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




  <div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
    <p class="f5 b mb3">Related</p>
    <ul class="pa0 list">
	   
	     <li  class="mb2">
          <a href="/posts/201229/">Kubernetes Webhooks</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/posts/201113/">Akri</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/posts/240409/">Google Cloud Translation w/ gRPC 3 ways</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/posts/240405/">Google Cloud Events protobufs and SDKs</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/posts/240216/">MicroK8s operability add-on</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/posts/230215/">Secure (TLS) gRPC services with LKE</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/posts/221128/">Maintaining Container Images</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/posts/221117/">Delegate domain-wide authority using Golang</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/posts/221106/">Basic programmatic access to GitHub Issues</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/posts/220603/">Secure (TLS) gRPC services with VKE</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/posts/220602/">Vultr CLI and JSON output</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/posts/211018/">Golang Structured Logging w/ Google Cloud Logging (2)</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/posts/210928/">Golang Structured Logging w/ Google Cloud Logging</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/posts/210924/">GitHub help with dependency management</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/posts/210724/">gRPC Interceptors and in-memory gRPC connections</a>
        </li>
	    
    </ul>
</div>

</aside>

  </article>

    </main>
    <footer class="bg-dark-blue bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white white-70 dn dib-ns pv2 ph3 no-underline" href="https://pretired.dazwilkin.com/" >
    &copy;  (p)retired 2025 
  </a>
    <div><div class="ananke-socials"></div>
</div>
  </div>
</footer>

  </body>
</html>