<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>(p)retired</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.111.3">
    
    
    
    
      <meta name="robots" content="index, follow">
    

    
<link rel="stylesheet" href="/ananke/css/main.min.e7eb24d4e86966f8bcd5dd198bc521b41a6cbbb3bae6e7c7d36e2270a8841bd7.css" >



    
    
    
      

    

    
    
      <link href="/tags/index.xml" rel="alternate" type="application/rss+xml" title="(p)retired" />
      <link href="/tags/index.xml" rel="feed" type="application/rss+xml" title="(p)retired" />
      
    
    
    <meta property="og:title" content="Tags" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://pretired.dazwilkin.com/tags/" />
<meta itemprop="name" content="Tags">
<meta itemprop="description" content=""><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Tags"/>
<meta name="twitter:description" content=""/>

      
<script async src="https://www.googletagmanager.com/gtag/js?id=G-67DZX7M0D1"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-67DZX7M0D1', { 'anonymize_ip': false });
}
</script>

    
	
  </head>

  <body class="ma0 avenir bg-near-white production">

    

  <header>
    <div class="pb3-m pb6-l bg-dark-blue">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        (p)retired
      
    </a>
    <div class="flex-l items-center">
      

      
      
<div class="ananke-socials">
  
    
    <a href="https://github.com/DazWilkin" target="_blank" rel="noopener" class="github ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="GitHub link" aria-label="follow on GitHub——Opens in a new window">
      
        <span class="icon"><svg style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
  <path d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"/>
</svg>
</span>
      
<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span></a>
  
    
    <a href="https://www.linkedin.com/in/dazwilkin/" target="_blank" rel="noopener" class="linkedin ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="LinkedIn link" aria-label="follow on LinkedIn——Opens in a new window">
      
        <span class="icon"><svg style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span>
      
<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span></a>
  
    
    <a href="https://medium.com/@DazWilkin" target="_blank" rel="noopener" class="medium ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Medium link" aria-label="follow on Medium——Opens in a new window">
      
        <span class="icon"><svg style="enable-background:new 0 0 170 170;" version="1.1" viewBox="0 0 170 170"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M46.5340803,65.2157554 C46.6968378,63.6076572 46.0836,62.018231 44.8828198,60.93592 L32.6512605,46.2010582 L32.6512605,44 L70.6302521,44 L99.9859944,108.380952 L125.794585,44 L162,44 L162,46.2010582 L151.542017,56.2281011 C150.640424,56.9153477 150.193188,58.0448862 150.380019,59.1628454 L150.380019,132.837155 C150.193188,133.955114 150.640424,135.084652 151.542017,135.771899 L161.755369,145.798942 L161.755369,148 L110.38282,148 L110.38282,145.798942 L120.963119,135.527337 C122.002801,134.487948 122.002801,134.182246 122.002801,132.592593 L122.002801,73.0417402 L92.585901,147.755438 L88.6106443,147.755438 L54.3622782,73.0417402 L54.3622782,123.115814 C54.0767278,125.221069 54.7759199,127.3406 56.2581699,128.863022 L70.0186741,145.55438 L70.0186741,147.755438 L31,147.755438 L31,145.55438 L44.7605042,128.863022 C46.2319621,127.338076 46.8903838,125.204485 46.5340803,123.115814 L46.5340803,65.2157554 Z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span>
      
<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span></a>
  
    
    <a href="https://stackoverflow.com/users/609290/dazwilkin" target="_blank" rel="noopener" class="stackoverflow ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Stack Overflow link" aria-label="follow on Stack Overflow——Opens in a new window">
      
        <span class="icon"><svg
    style="enable-background:new 0 0 67 67;"
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 24 24"
    
>
    <path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm.869 5.903l3.114 4.567-.975.665-3.115-4.567.976-.665zm-2.812 2.585l4.84 2.838-.6 1.017-4.842-2.838.602-1.017zm-1.276 2.724l5.413 1.521-.291 1.077-5.428-1.458.306-1.14zm-.588 2.461l5.687.569-.103 1.12-5.691-.513.107-1.176zm-.169 2.16h5.835v1.167h-5.835v-1.167zm7.976 3.167h-10v-6h1v5h8v-5h1v6zm.195-8.602l-.945-5.446 1.162-.202.947 5.446-1.164.202z"/>
</svg>
</span>
      
<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span></a>
  
</div>

    </div>
  </div>
</nav>

      <div class="tc-l pv3 ph3 ph4-ns">
        <h1 class="f2 f-subheadline-l fw2 light-silver mb0 lh-title">
          Tags
        </h1>
        
      </div>
    </div>
  </header>


    <main class="pb7" role="main">
      
    
  <article class="cf pa3 pa4-m pa4-l">
    <div class="measure-wide-l center f4 lh-copy nested-copy-line-height nested-links mid-gray">
      
    </div>
  </article>
  <div class="mw8 center">
    <section class="ph4">
      
        <h2 class="f1">
          <a href="/tags/azure/" class="link blue hover-black">
            Tag: Azure
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/230420/" class="link black dim">
        Prometheus Exporter for Azure (Container Apps)
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve written Prometheus Exporters for various cloud platforms. My motivation for writing these Exporters is that I want a unified mechanism to track my usage of these platform&rsquo;s services. It&rsquo;s easy to deploy a service on a platform and inadvertently leave it running (up a bill). The set of exporters is:
Prometheus Exporter for Azure Prometheus Exporter for Fly.io Prometheus Exporter for GCP Prometheus Exporter for Linode Prometheus Exporter for Vultr This post describes the recently-added Azure Exporter which only provides metrics for Container Apps and Resource Groups.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/230404/" class="link black dim">
        Azure Container Apps
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      The majority of Ackal&rsquo;s components are deployed to Google Cloud. However, by its nature, Ackal benefits from deployments that span cloud platforms. I&rsquo;ve deployed Ackal&rsquo;s gRPC health checks to Fly, and managed Kubernetes services on Linode and Vultr.
Today, I decided to revisit¹ Azure. Ackal uses Azure (Active Directory) for one of its OAuth providers. This time, I wanted to deploy a containerized gRPC service. Azure provides several container-oriented services. I decided to use Azure Container Apps and, in hindsight, find it analogous to Google Cloud Run.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/container-apps/" class="link blue hover-black">
            Tag: Container Apps
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/230420/" class="link black dim">
        Prometheus Exporter for Azure (Container Apps)
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve written Prometheus Exporters for various cloud platforms. My motivation for writing these Exporters is that I want a unified mechanism to track my usage of these platform&rsquo;s services. It&rsquo;s easy to deploy a service on a platform and inadvertently leave it running (up a bill). The set of exporters is:
Prometheus Exporter for Azure Prometheus Exporter for Fly.io Prometheus Exporter for GCP Prometheus Exporter for Linode Prometheus Exporter for Vultr This post describes the recently-added Azure Exporter which only provides metrics for Container Apps and Resource Groups.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/230404/" class="link black dim">
        Azure Container Apps
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      The majority of Ackal&rsquo;s components are deployed to Google Cloud. However, by its nature, Ackal benefits from deployments that span cloud platforms. I&rsquo;ve deployed Ackal&rsquo;s gRPC health checks to Fly, and managed Kubernetes services on Linode and Vultr.
Today, I decided to revisit¹ Azure. Ackal uses Azure (Active Directory) for one of its OAuth providers. This time, I wanted to deploy a containerized gRPC service. Azure provides several container-oriented services. I decided to use Azure Container Apps and, in hindsight, find it analogous to Google Cloud Run.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/prometheus/" class="link blue hover-black">
            Tag: Prometheus
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/230420/" class="link black dim">
        Prometheus Exporter for Azure (Container Apps)
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve written Prometheus Exporters for various cloud platforms. My motivation for writing these Exporters is that I want a unified mechanism to track my usage of these platform&rsquo;s services. It&rsquo;s easy to deploy a service on a platform and inadvertently leave it running (up a bill). The set of exporters is:
Prometheus Exporter for Azure Prometheus Exporter for Fly.io Prometheus Exporter for GCP Prometheus Exporter for Linode Prometheus Exporter for Vultr This post describes the recently-added Azure Exporter which only provides metrics for Container Apps and Resource Groups.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/230419/" class="link black dim">
        Kubernetes metrics, metrics everywhere
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve been tinkering with ways to &ldquo;unit-test&rdquo; my assumptions when using cloud platforms. I recently wrote about good posts by Google describing achieving cost savings with Cloud Monitoring and Cloud Logging:
How to identify and reduce costs of your Google Cloud observability in Cloud Monitoring Cloud Logging pricing for Cloud Admins: How to approach it &amp; save cost With Cloud Monitoring, I&rsquo;ve restricted the prometheus.googleapis.com metrics that are being ingested but realized I wanted to track the number of Pods (and Containers) deployed to a GKE cluster.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/230413/" class="link black dim">
        Filtering metrics w/ Google Managed Prometheus
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Google has published two, very good blog posts on cost management:
How to identify and reduce costs of your Google Cloud observability in Cloud Monitoring Cloud Logging pricing for Cloud Admins: How to approach it &amp; save cost This post is about my application cost reductions for Cloud Monitoring for Ackal.
I&rsquo;m pleased with Google Cloud Managed Service for Prometheus (hereinafter GMP). I&rsquo;ve a strong preference for letting service providers run components of Ackal that I consider important but non-differentiating.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/230310/" class="link black dim">
        Kubernetes Operators
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Ackal uses a Kubernetes Operator to orchestrate the lifecycle of its health checks. Ackal&rsquo;s Operator is written in Go using kubebuilder.
Yesterday, my interest was piqued by a MetalBear blog post Writing a Kubernetes Operator [in Rust]. I spent some time reimplementing one of Ackal&rsquo;s CRDs (Check) using kube-rs and not only refreshed my Rust knowledge but learned a bunch more about Kubernetes and Operators.
While rummaging around the Kubernetes documentation, I discovered flant&rsquo;s Shell-operator and spent some time today exploring its potential.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/230104/" class="link black dim">
        Authenticate PromLens to Google Managed Prometheus
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m using Google Managed Service for Prometheus (GMP) and liking it.
Sometime ago, I tried using PromLens with GMP but GMP&rsquo;s Prometheus HTTP API endpoint requires auth and I&rsquo;ve battled Prometheus&rsquo; somewhat limited auth mechanism before (Scraping metrics exposed by Google Cloud Run services that require authentication).
Listening to PromCon EU 2022 videos, I learned that PromLens has been open sourced and contributed to the Prometheus project. Eventually, the functionality of PromLens should be combined into the Prometheus UI.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220520/" class="link black dim">
        Prometheus Exporters for fly.io and Vultr
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve been on a roll building utilities this week. I developed a Service Health dashboard for my &ldquo;thing&rdquo;, a Prometheus Exporter for Fly.io and today, a Prometheus Exporter for Vultr. This is motivated by the fear that I will forget a deployed Cloud resource and incur a horrible bill.
I&rsquo;ve no written several Prometheus Exporters for cloud platforms:
Prometheus Exporter for GCP Prometheus Exporter for Linode Prometheus Exporter for Fly.io Prometheus Exporter for Vultr Each of them monitors resource deployments and produces resource count metrics that can be scraped by Prometheus and alerted with Alertmanager.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220225/" class="link black dim">
        Prometheus HTTP Service Discovery of Cloud Run services
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Some time ago, I wrote about using Prometheus Service Discovery w/ Consul for Cloud Run and also Scraping metrics exposed by Google Cloud Run services that require authentication. Both solutions remain viable but they didn&rsquo;t address another use case for Prometheus and Cloud Run services that I have with a &ldquo;thing&rdquo; that I&rsquo;ve been building.
In this scenario, I want to:
Configure Prometheus to scrape Cloud Run service metrics Discover Cloud Run services dynamically Authenticate to Cloud Run using Firebase Auth ID tokens These requirements and &ndash; one other &ndash; present several challenges:
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/211005/" class="link black dim">
        Scraping metrics exposed by Google Cloud Run services that require authentication
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve written a solution (gcp-oidc-token-proxy) that can be used in conjunction with Prometheus OAuth2 to authenticate requests so that Prometheus can scrape metrics exposed by e.g. Cloud Run services that require authentication. The solution resulted from my question on Stack overflow.
Problem #1: Endpoint requires authentication
Given a Cloud Run service URL for which:
ENDPOINT=&#34;my-server-blahblah-wl.a.run.app&#34; # Returns 200 when authentication w/ an ID token TOKEN=&#34;$(gcloud auth print-identity-token)&#34; curl \ --silent \ --request GET \ --header &#34;Authorization: Bearer ${TOKEN}&#34; \ --write-out &#34;%{response_code}&#34; \ --output /dev/null \ https://${ENDPOINT}/metrics # Returns 403 otherwise curl \ --silent \ --request GET \ --write-out &#34;%{response_code}&#34; \ --output /dev/null \ https://${ENDPOINT}/metrics Problem #2: Prometheus OAuth2 configuration is constrained
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210520/" class="link black dim">
        Consul discovers Google Cloud Run
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve written a basic discoverer of Google Cloud Run services. This is for a project and it extends work done in some previous posts to Multiplex gRPC and Prometheus with Cloud Run and to use Consul for Prometheus service discovery.
This solution:
Accepts a set of Google Cloud Platform (GCP) projects Trawls them for Cloud Run services Assumes that the services expose Prometheus metrics on :443/metrics Relabels the services Surfaces any discovered Cloud Run services&rsquo; metrics in Prometheus You&rsquo;ll need Docker and Docker Compose.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210519/" class="link black dim">
        Multiplexing gRPC and HTTP (Prometheus) endpoints with Cloud Run
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Google Cloud Run is useful but, each service is limited to exposing a single port. This caused me problems with a gRPC service that serves (non-gRPC) Prometheus metrics because customarily, you would serve gRPC on one port and the Prometheus metrics on another.
Fortunately, cmux provides a solution by providing a mechanism that multiplexes both services (gRPC and HTTP) on a single port!
TL;DR See the cmux Limitations and use:
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210419/" class="link black dim">
        Prometheus Service Discovery w/ Consul for Cloud Run
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m working on a project that will programmatically create Google Cloud Run services and I want to be able to dynamically discover these services using Prometheus.
This is one solution.
NOTE Google Cloud Run is the service I&rsquo;m using, but the principle described herein applies to any runtime service that you&rsquo;d wish to use.
Why is this challenging? IIUC, it&rsquo;s primarily because Prometheus has a limited set of plugins for service discovery, see the sections that include _sd_ in Prometheus Configuration documentation.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210305/" class="link black dim">
        Prometheus VPA Recommendations
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Phew!
For Want of a Nail
I was interested in learning how to Manage Resources for Containers. On the way, I learned and discovered:
kubectl top Vertical Pod Autoscaler A (valuable) digression through PodMonitor kube-state-metrics `kubectl-patch Created a Graph References Kubernetes Resources Visual Studio Code has begun to bug me (reasonably) to add resources to Kubernetes manifests.
E.g.:
resources: limits: cpu: &#34;1&#34; memory: &#34;512Mi&#34; I&rsquo;ve been spending time with Deislab&rsquo;s Akri and decided to determine whether Akri&rsquo;s primary resources (Agent, Controller) and some of my creations HTTP Device and Discovery, were being suitably constrained.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/201008/" class="link black dim">
        Deploying a Rust HTTP server to DigitalOcean App Platform
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      DigitalOcean launched an App Platform with many Supported Languages and Frameworks. I used Golang first, then wondered how to use non-natively-supported languages, i.e. Rust.
The good news is that Docker is a supported framework and so, you can run pretty much anything.
Repo: https://github.com/DazWilkin/do-apps-rust
Rust I&rsquo;m a Rust noob. I&rsquo;m always receptive to feedback on improvements to the code. I looked to mirror the Golang example. I&rsquo;m using rocket and rocket-prometheus for the first time:
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200107/" class="link black dim">
        Google Home Exporter
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m obsessing over Prometheus exporters. First came Linode Exporter, then GCP Exporter and, on Sunday, I stumbled upon a reverse-engineered API for Google Home devices and so wrote a very basic Google Home SDK and a similarly basic Google Home Exporter:
The SDK only implements /setup/eureka_info and then only some of the returned properties. There&rsquo;s not a lot of metric-like data to use besides SignalLevel (signal_level) and NoiseLevel (noise_level). I&rsquo;m not clear on the meaning of some of the properties.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/191220/" class="link black dim">
        Google Cloud Platform (GCP) Exporter
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Earlier this week I discussed a Linode Prometheus Exporter.
I added metrics for Digital Ocean&rsquo;s Managed Kubernetes service to @metalmatze&rsquo;s Digital Ocean Exporter.
This left, metrics for Google Cloud Platform (GCP) which has, for many years, been my primary cloud platform. So, today I wrote Prometheus Exporter for Google Cloud Platform.
All 3 of these exporters follow the template laid down by @metalmatze and, because each of these services has a well-written Golang SDK, it&rsquo;s straightforward to implement an exporter for each of them.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/191219/" class="link black dim">
        Prometheus AlertManager
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Yesterday I discussed a Linode Prometheus Exporter and tantalized use of Prometheus AlertManager.
Success:
Configure The process is straightforward although I found the Prometheus (config) documentation slightly unwieldy to navigate :-(
The overall process is documented.
Here are the steps I took:
Configure Prometheus Configure AlertManager Revise Docker Compose Configure Prometheus Added the following to prometheus.yml:
rule_files: - &#34;/etc/alertmanager/rules/linode.yml&#34; alerting: alertmanagers: - scheme: http static_configs: - targets: - &#34;alertmanager:9093&#34; Rules must be defined in separate rules files.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/191218/" class="link black dim">
        Linode Prometheus Exporter
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I enjoy using Prometheus and have toyed around with it for some time particularly in combination with Kubernetes. I signed up with Linode [referral] compelled by the addition of a managed Kubernetes service called Linode Kubernetes Engine (LKE). I have an anxiety that I&rsquo;ll inadvertently leave resources running (unused) on a cloud platform. Instead of refreshing the relevant billing page, it struck me that Prometheus may (not yet proven) help.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/google-managed-prometheus/" class="link blue hover-black">
            Tag: Google Managed Prometheus
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/230419/" class="link black dim">
        Kubernetes metrics, metrics everywhere
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve been tinkering with ways to &ldquo;unit-test&rdquo; my assumptions when using cloud platforms. I recently wrote about good posts by Google describing achieving cost savings with Cloud Monitoring and Cloud Logging:
How to identify and reduce costs of your Google Cloud observability in Cloud Monitoring Cloud Logging pricing for Cloud Admins: How to approach it &amp; save cost With Cloud Monitoring, I&rsquo;ve restricted the prometheus.googleapis.com metrics that are being ingested but realized I wanted to track the number of Pods (and Containers) deployed to a GKE cluster.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/230413/" class="link black dim">
        Filtering metrics w/ Google Managed Prometheus
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Google has published two, very good blog posts on cost management:
How to identify and reduce costs of your Google Cloud observability in Cloud Monitoring Cloud Logging pricing for Cloud Admins: How to approach it &amp; save cost This post is about my application cost reductions for Cloud Monitoring for Ackal.
I&rsquo;m pleased with Google Cloud Managed Service for Prometheus (hereinafter GMP). I&rsquo;ve a strong preference for letting service providers run components of Ackal that I consider important but non-differentiating.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/230104/" class="link black dim">
        Authenticate PromLens to Google Managed Prometheus
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m using Google Managed Service for Prometheus (GMP) and liking it.
Sometime ago, I tried using PromLens with GMP but GMP&rsquo;s Prometheus HTTP API endpoint requires auth and I&rsquo;ve battled Prometheus&rsquo; somewhat limited auth mechanism before (Scraping metrics exposed by Google Cloud Run services that require authentication).
Listening to PromCon EU 2022 videos, I learned that PromLens has been open sourced and contributed to the Prometheus project. Eventually, the functionality of PromLens should be combined into the Prometheus UI.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/kubelet/" class="link blue hover-black">
            Tag: kubelet
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/230419/" class="link black dim">
        Kubernetes metrics, metrics everywhere
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve been tinkering with ways to &ldquo;unit-test&rdquo; my assumptions when using cloud platforms. I recently wrote about good posts by Google describing achieving cost savings with Cloud Monitoring and Cloud Logging:
How to identify and reduce costs of your Google Cloud observability in Cloud Monitoring Cloud Logging pricing for Cloud Admins: How to approach it &amp; save cost With Cloud Monitoring, I&rsquo;ve restricted the prometheus.googleapis.com metrics that are being ingested but realized I wanted to track the number of Pods (and Containers) deployed to a GKE cluster.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/kubernetes/" class="link blue hover-black">
            Tag: Kubernetes
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/230419/" class="link black dim">
        Kubernetes metrics, metrics everywhere
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve been tinkering with ways to &ldquo;unit-test&rdquo; my assumptions when using cloud platforms. I recently wrote about good posts by Google describing achieving cost savings with Cloud Monitoring and Cloud Logging:
How to identify and reduce costs of your Google Cloud observability in Cloud Monitoring Cloud Logging pricing for Cloud Admins: How to approach it &amp; save cost With Cloud Monitoring, I&rsquo;ve restricted the prometheus.googleapis.com metrics that are being ingested but realized I wanted to track the number of Pods (and Containers) deployed to a GKE cluster.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/230310/" class="link black dim">
        Kubernetes Operators
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Ackal uses a Kubernetes Operator to orchestrate the lifecycle of its health checks. Ackal&rsquo;s Operator is written in Go using kubebuilder.
Yesterday, my interest was piqued by a MetalBear blog post Writing a Kubernetes Operator [in Rust]. I spent some time reimplementing one of Ackal&rsquo;s CRDs (Check) using kube-rs and not only refreshed my Rust knowledge but learned a bunch more about Kubernetes and Operators.
While rummaging around the Kubernetes documentation, I discovered flant&rsquo;s Shell-operator and spent some time today exploring its potential.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/230215/" class="link black dim">
        Secure (TLS) gRPC services with LKE
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      NOTE cert-manager is a better solution to what follows.
I wrote about deploying Secure (TLS) gRPC services with Vultr Kubernetes Engine (VKE). This week, I&rsquo;ve reproduced this deployment using Linode Kubernetes Engine (LKE).
Thanks to the consistency provided by Kubernetes, the Kubernetes programming is almost identical. The main differences are between the CLI&rsquo;s provided by these platforms. Both are good. They&rsquo;re just different.
I&rsquo;m going to include the linode-cli commands I&rsquo;m using in this post as I found it slightly more quirky.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220603/" class="link black dim">
        Secure (TLS) gRPC services with VKE
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      NOTE cert-manager is a better solution to what follows.
I&rsquo;ve a need to deploy a Vultr Kubernetes Engine (VKE) cluster on a daily basis (create and delete within a few hours) and expose (securely|TLS) a gRPC service.
I have an existing solution Automatic Certs w/ Golang gRPC service on Compute Engine that combines a gRPC Healthchecking and an ACME service and decided to reuse this.
In order for it work, we need:
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220602/" class="link black dim">
        Vultr CLI and JSON output
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve begun exploring Vultr after the company announced a managed Kubernetes offering Vultr Kubernetes Engine (VKE).
In my brief experience, it&rsquo;s a decent platform and its CLI vultr-cli is mostly (!) good. The CLI has a limitation in that command output is text formatted and this makes it challenging to parse the output when scripting.
NOTE The Vultr developers have a branch rewrite that includes a solution to this problem.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210305/" class="link black dim">
        Prometheus VPA Recommendations
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Phew!
For Want of a Nail
I was interested in learning how to Manage Resources for Containers. On the way, I learned and discovered:
kubectl top Vertical Pod Autoscaler A (valuable) digression through PodMonitor kube-state-metrics `kubectl-patch Created a Graph References Kubernetes Resources Visual Studio Code has begun to bug me (reasonably) to add resources to Kubernetes manifests.
E.g.:
resources: limits: cpu: &#34;1&#34; memory: &#34;512Mi&#34; I&rsquo;ve been spending time with Deislab&rsquo;s Akri and decided to determine whether Akri&rsquo;s primary resources (Agent, Controller) and some of my creations HTTP Device and Discovery, were being suitably constrained.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210122/" class="link black dim">
        Krustlet on DO Managed Kubernetes
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve spent time this week returning to the interesting Deislabs project Krustlet. Since the last time, the bootstrapping process has been simplified using Kubernetes Bootstrap Tokens. I know this updated process works with MicroK8s. Unfortunately, I&rsquo;m struggling with it on GKE and thought I&rsquo;d try DigitalOcean Managed Kubernetes.
It worked first time!
In the following, we run both the Kubernetes cluster and the Krustlet Droplet on DigitalOcean but, as long as the cluster and the VM are able to communicate with one another, you should be able to run these anywhere.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210108/" class="link black dim">
        Kubernetes cert-manager
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I developed an admission webhook for Akri, twice (Golang, Rust). I naively followed other examples for the generation of the certificates, created a 1.20 cluster and broke that process.
I&rsquo;d briefly considered using cert-manager recently but quickly abandoned the idea thinking it would be onerous and unnecessary complexity for little-old-me. I was wrong. It&rsquo;s excellent and I recommend it highly.
I won&rsquo;t reproduce the v1beta1 and v1 examples from the Stackoverflow question as they should be self-explanatory.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/201229/" class="link black dim">
        Kubernetes Webhooks
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I spent some time last week writing my first admission webhook for Kubernetes. I wrote the handler in Golang because I&rsquo;m most familiar with Golang and because, as Kubernetes&rsquo; native language, I was more confident that the necessary SDKs would exist and that the documentation would likely use Golang by default. I struggled to find useful documentation and so this post is to help you (and me!) remember how to do this next time!
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/201217/" class="link black dim">
        Kubernetes Device Plugins
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m debugging an issue with Akri Zeroconf protocol in which Instance environment variables are no longer (!) being surfaced within the Broker pods. In my adventures, it seemed useful to better understand how Akri works and specifically, how Akri uses Kubernetes Device Plugins.
IIUC plugins register with the Kubelet (!) via a gRPC service (Registration) that the Kubelet exposes on a UNIX socket at /var/lib/kubelet/device-plugins/kubelet.sock
Then (!) if successful, devices should be reported by the Node&rsquo;s metadata (spec) and available to be bound to Pods.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/201113/" class="link black dim">
        Akri
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      For the past couple of weeks, I&rsquo;ve been playing around with Akri, a Microsoft (DeisLabs) project for building a connected edge with Kubernetes. Kubernetes, IoT, Rust (and Golang) make this all compelling to me.
Initially, I deployed an Akri End-to-End to MicroK8s on Google Compute Engine (link) and Digital Ocean (link). But I was interested to create me own example and so have proposed a very (!) simple HTTP-based protocol.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/201022/" class="link black dim">
        akri
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I was very interested to read about Microsoft&rsquo;s DeisLab&rsquo;s latest (rust-based) Kubernetes project: akri. If I understand it correctly, it provides a mechanism to make any (IoT) device accessible to containers running within a cluster. I need to spend more time playing around with it so that I can fully understand it. I had some problems getting the End-to-End demo running on Google Compute Engine (and then I tried DigitalOcean droplet) instances.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200207/" class="link black dim">
        Accessing GCR repos from Kubernetes
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Until today, I&rsquo;d not accessed a Google Container Registry repo from a non-GKE Kubernetes deployment.
It turns out that it&rsquo;s pretty well-documented (link) but, here&rsquo;s an end-end example.
Assuming:
BILLING=[[YOUR-BILLING]] PROJECT=[[YOUR-PROJECT]] SERVER=&#34;us.gcr.io&#34; If not already:
gcloud projects create {$PROJECT} gcloud beta billing projects link ${PROJECT} \ --billing-account=${BILLING} gcloud services enable containerregistry.googleapis.com \ --project=${PROJECT} Container Registry IMAGE=&#34;busybox&#34; # Or ... docker pull ${IMAGE} docker tag \ ${IMAGE} \ ${SERVER}/${PROJECT}/${IMAGE} docker push ${SERVER}/${PROJECT}/${IMAGE} gcloud container images list-tags ${SERVER}/${PROJECT}/${IMAGE} Service Account Create a service account that&rsquo;s permitted to download (read-only) images from this project&rsquo;s registry
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/191211/" class="link black dim">
        NGINX Ingress
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve written a couple of deployment options (Google Compute Engine; Kubernetes) for an open-source project. The Kubernetes deployment provides NodePort and (TCP) LoadBalancer options and I&rsquo;ve been trying (unsuccessfully) to add HTTPS Load-balancing.
I should (!) try to deploy to Google Kubernetes Engine (GKE) but I&rsquo;ve been using microk8s, Digital Ocean Managed Kubernetes and the Linode LKE Beta. Each of these requires an implementation of Ingress controller. For GKE, GCP&rsquo;s HTTP/S Load-balancer (GCLB) is used.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/190924/" class="link black dim">
        Kubernetes Engine and Free Tier
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Google Cloud Platform Free Tier appears (please verify this for yourself) to provide the ability to run a(n admittedly miniscule) Kubernetes cluster for free. So, why do this? It provides a definitive Kubernetes (Engine) experience on Google Cloud Platform that you may use for learning and testing.
Kubernetes Engine the master node(s) and the control plane are free.
Kubernetes (i.e. Compute Engine) nodes potentially incur charges including for the VM runtime and any attached storage, snapshots etc.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/metrics/" class="link blue hover-black">
            Tag: metrics
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/230419/" class="link black dim">
        Kubernetes metrics, metrics everywhere
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve been tinkering with ways to &ldquo;unit-test&rdquo; my assumptions when using cloud platforms. I recently wrote about good posts by Google describing achieving cost savings with Cloud Monitoring and Cloud Logging:
How to identify and reduce costs of your Google Cloud observability in Cloud Monitoring Cloud Logging pricing for Cloud Admins: How to approach it &amp; save cost With Cloud Monitoring, I&rsquo;ve restricted the prometheus.googleapis.com metrics that are being ingested but realized I wanted to track the number of Pods (and Containers) deployed to a GKE cluster.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220520/" class="link black dim">
        Prometheus Exporters for fly.io and Vultr
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve been on a roll building utilities this week. I developed a Service Health dashboard for my &ldquo;thing&rdquo;, a Prometheus Exporter for Fly.io and today, a Prometheus Exporter for Vultr. This is motivated by the fear that I will forget a deployed Cloud resource and incur a horrible bill.
I&rsquo;ve no written several Prometheus Exporters for cloud platforms:
Prometheus Exporter for GCP Prometheus Exporter for Linode Prometheus Exporter for Fly.io Prometheus Exporter for Vultr Each of them monitors resource deployments and produces resource count metrics that can be scraped by Prometheus and alerted with Alertmanager.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210519/" class="link black dim">
        Multiplexing gRPC and HTTP (Prometheus) endpoints with Cloud Run
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Google Cloud Run is useful but, each service is limited to exposing a single port. This caused me problems with a gRPC service that serves (non-gRPC) Prometheus metrics because customarily, you would serve gRPC on one port and the Prometheus metrics on another.
Fortunately, cmux provides a solution by providing a mechanism that multiplexes both services (gRPC and HTTP) on a single port!
TL;DR See the cmux Limitations and use:
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/google/" class="link blue hover-black">
            Tag: Google
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/230413/" class="link black dim">
        Filtering metrics w/ Google Managed Prometheus
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Google has published two, very good blog posts on cost management:
How to identify and reduce costs of your Google Cloud observability in Cloud Monitoring Cloud Logging pricing for Cloud Admins: How to approach it &amp; save cost This post is about my application cost reductions for Cloud Monitoring for Ackal.
I&rsquo;m pleased with Google Cloud Managed Service for Prometheus (hereinafter GMP). I&rsquo;ve a strong preference for letting service providers run components of Ackal that I consider important but non-differentiating.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/221128/" class="link black dim">
        Maintaining Container Images
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      As I contemplate moving my &ldquo;thing&rdquo; into production, I&rsquo;m anticipating aspects of the application that need maintenance and how this can be automated.
I&rsquo;d been negligent in the maintenance of some of my container images.
I&rsquo;m using mostly Go and some Rust as the basis of static(ally-compiled) binaries that run in these containers but not every container has a base image of scratch. scratch is the only base image that doesn&rsquo;t change and thus the only base image that doesn&rsquo;t require that container images buit FROM it, be maintained.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/221117/" class="link black dim">
        Delegate domain-wide authority using Golang
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;d not used Google&rsquo;s Domain-wide Delegation from Golang and struggled to find example code.
Google provides Java and Python samples.
Google has a myriad packages implementing its OAuth security and it&rsquo;s always daunting trying to determine which one to use.
As it happens, I backed into the solution through client.Options
ctx := context.Background() // Google Workspace APIS don&#39;t use IAM do use OAuth scopes // Scopes used here must be reflected in the scopes on the // Google Workspace Domain-wide Delegate client scopes := []string{ .
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/221110/" class="link black dim">
        Firestore Export &amp; Import
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m using Firestore to maintain state in my &ldquo;thing&rdquo;.
In an attempt to ensure that I&rsquo;m able to restore the database, I run (Cloud Scheduler) scheduled backups (see Automating Scheduled Firestore Exports and I&rsquo;ve been testing imports to ensure that the process works.
It does.
I thought I&rsquo;d document an important but subtle consideration with Firestore exports (which I&rsquo;d not initially understood).
Google facilitates that backup process with the sibling commands:
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/211130/" class="link black dim">
        Automatic Certs w/ Golang gRPC service on Compute Engine
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I needed to deploy a healthcheck-enabled gRPC TLS-enabled service. Fortunately, most (all?) of the SDKs include an implementation, e.g. Golang has grpc-go/health.
I learned in my travels that:
DigitalOcean [App] platform does not (link) work with TLS-based gRPC apps. Fly has a regression (link) that breaks gRPC So, I resorted to Google Cloud Platform (GCP). Although Cloud Run would be well-suited to running the gRPC app, it uses a proxy|sidecar to provision a cert for the app and I wanted to be able to (easily use a custom domain) and give myself a somewhat general-purpose solution.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210520/" class="link black dim">
        Consul discovers Google Cloud Run
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve written a basic discoverer of Google Cloud Run services. This is for a project and it extends work done in some previous posts to Multiplex gRPC and Prometheus with Cloud Run and to use Consul for Prometheus service discovery.
This solution:
Accepts a set of Google Cloud Platform (GCP) projects Trawls them for Cloud Run services Assumes that the services expose Prometheus metrics on :443/metrics Relabels the services Surfaces any discovered Cloud Run services&rsquo; metrics in Prometheus You&rsquo;ll need Docker and Docker Compose.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210519/" class="link black dim">
        Multiplexing gRPC and HTTP (Prometheus) endpoints with Cloud Run
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Google Cloud Run is useful but, each service is limited to exposing a single port. This caused me problems with a gRPC service that serves (non-gRPC) Prometheus metrics because customarily, you would serve gRPC on one port and the Prometheus metrics on another.
Fortunately, cmux provides a solution by providing a mechanism that multiplexes both services (gRPC and HTTP) on a single port!
TL;DR See the cmux Limitations and use:
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210506/" class="link black dim">
        Firestore Golang Timestamps &amp; Merging
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m using Google&rsquo;s Golang SDK for Firestore. The experience is excellent and I&rsquo;m quikcly becoming a fan of Firestore. However, as a Golang Firestore developer, I&rsquo;m feeling less loved and some of the concepts in the database were causing me a conundrum.
I&rsquo;m still not entirely certain that I have Timestamps nailed but&hellip; I learned an important lesson on the auto-creation of Timestamps in documents and how to retain these values.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210413/" class="link black dim">
        Cloud Firestore Triggers in Golang
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I was pleased to discover that Google provides a non-Node.JS mechanism to subscribe to and act upon Firestore triggers, Google Cloud Firestore Triggers. I&rsquo;ve nothing against Node.JS but, for the project i&rsquo;m developing, everything else is written in Golang. It&rsquo;s good to keep it all in one language.
I&rsquo;m perplexed that Cloud Functions still (!) only supports Go 1.13 (03-Sep-2019). Even Go 1.14 (25-Feb-2020) was released pre-pandemic and we&rsquo;re now running on 1.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210317/" class="link black dim">
        Using Golang with the Firestore Emulator
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      This works great but it wasn&rsquo;t clearly documented for non-Firebase users. I assume it will work, as well, for any of the client libraries (not just Golang).
Assuming you have some (Golang) code (in this case using the Google Cloud Client Library) that interacts with a Firestore database. Something of the form:
package main import ( &#34;context&#34; &#34;crypto/sha256&#34; &#34;fmt&#34; &#34;log&#34; &#34;os&#34; &#34;time&#34; &#34;cloud.google.com/go/firestore&#34; ) func hash(s string) string { h := sha256.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210316/" class="link black dim">
        Programmatically deploying Cloud Run services (Golang|Python)
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Phew! Programmitcally deploying Cloud Run services should be easy but it didn&rsquo;t find it so.
My issues were that the Cloud Run Admin (!) API is poorly documented and it uses non-standard endpoints (thanks Sal!). Here, for others who may struggle with this, is how I got this to work.
Goal Programmatically (have Golang, Python, want Rust) deploy services to Cloud Run.
i.e. achieve this:
gcloud run deploy ${NAME} \ --image=${IMAGE} \ --platform=managed \ --no-allow-unauthenticated \ --region=${REGION} \ --project=${PROJECT} TRICK --log-http is your friend
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/201203/" class="link black dim">
        webmention
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Let&rsquo;s see if this works!?
I&rsquo;ve added the following link to this site&rsquo;s baseof.html so that it is now rendered for each page:
&lt;link href=&#34;https://us-central1-webmention.cloudfunctions.net/webmention&#34; rel=&#34;webmention&#34; /&gt; I discovered indieweb yesterday reading about webmention. Who knows what got me to webmention!?
The principles of both are sound. Instead of relying on come-go behemoths to run our digital world, indieweb seeks to provide technologies that enable us to achieve things without them.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200930/" class="link black dim">
        Hugo and Google Cloud Storage
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m using Hugo as a static site generator for this blog. I&rsquo;m using Firebase (for free) to host lefsilver.
I have other domains that I want to promote and decided to use Google Cloud Storage buckets for these sites. Using Google Cloud Storage for Hosting a static website and using Hugo to deploy sites to Google Cloud Storage (GCS) are documented but, I didn&rsquo;t find a location where this is combined into a single tutorial and I wanted to add an explanation for ensuring your sites are included in Google&rsquo;s and Bing&rsquo;s search indexes.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200916/" class="link black dim">
        Actions SDK Conversational Quickstart
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Google&rsquo;s tutorial didn&rsquo;t work for me.
In this post, I&rsquo;ll help you get this working.
https://developers.google.com/assistant/conversational/quickstart
Create and set up a project This mostly works.
I recommend using the Actions Console as described to create the project.
I chose &ldquo;Custom&rdquo; and &ldquo;Blank Project&rdquo;
You need not enable Actions API as this is done automatically:
For the console work, I&rsquo;m going to use Google&rsquo;s excellent Cloud Shell. You may access this through the browser or through a terminal:
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200617/" class="link black dim">
        WASM Cloud Functions
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Following on from waPC &amp; Protobufs and a question on Stack Overflow about Cloud Functions, I was compelled to try running WASM on Cloud Functions no JavaScript.
I wanted to reuse the WASM waPC functions that I&rsquo;d written in Rust as described in the other post. Cloud Functions does not (yet!?) provide a Rust runtime and so I&rsquo;m using the waPC Host for Go in this example.
It works!
PARAMS=$(printf &#39;{&#34;a&#34;:{&#34;real&#34;:39,&#34;imag&#34;:3},&#34;b&#34;:{&#34;real&#34;:39,&#34;imag&#34;:3}}&#39; | base64) TOKEN=$(gcloud auth print-identity-token) echo &#34;{ \&#34;filename\&#34;:\&#34;complex.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200403/" class="link black dim">
        Rust Crate Transparency &amp;&amp; Rust SDK for Google Trillian
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m noodling the utility of a Transparency solution for Rust Crates. When developers push crates to Cargo, a bunch of metadata is associated with the crate. E.g. protobuf. As with Golang Modules, Python packages on PyPi etc., there appears to be utility in making tamperproof recordings of these publications. Then, other developers may confirm that a crate pulled from cates.io is highly unlikely to have been changed.
On Linux, Cargo stores downloaded crates under ${HOME}/.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200326/" class="link black dim">
        Google Trillian on Cloud Run
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve written previously (Google Trillian for Noobs) about Google&rsquo;s interesting project Trillian and about some of the &ldquo;personalities&rdquo; (e.g. PyPi Transparency) that I&rsquo;ve build using it.
Having gone slight cra-cra on Cloud Run and gRPC this week with Golang gRPC Cloud Run and gRPC, Cloud Run &amp; Endpoints, I thought it&rsquo;d be fun to deploy Trillian and a personality to Cloud Run.
It mostly (!) works :-)
At the end of the post, I&rsquo;ve summarized creating a Cloud SQL instance to host the Trillian data(base).
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200325/" class="link black dim">
        gRPC, Cloud Run &amp; Endpoints
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      &lt;3 Google but there&rsquo;s quite often an assumption that we&rsquo;re all sitting around the engineering table and, of course, we&rsquo;re not.
Cloud Endpoints is a powerful offering but &ndash; IMO &ndash; it&rsquo;s super confusing to understand and complex to deploy.
If you&rsquo;re familiar with the motivations behind service meshes (e.g. Istio), Cloud Endpoints fits in a similar niche (&ldquo;neesh&rdquo; or &ldquo;nitch&rdquo;?). The underlying ambition is that, developers can take existing code and by adding a proxy (or sidecar), general-purpose abstractions, security, logging etc.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200320/" class="link black dim">
        Golang gRPC Cloud Run
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Update: 2020-03-24: Since writing this post, I&rsquo;ve contributed Golang and Rust samples to Google&rsquo;s project. I recommend you start there.
Google explained how to run gRPC servers with Cloud Run. The examples are good but only Python and Node.JS:
gRPC comes to Cloud Run gRPC in Google Cloud Run Missing Golang&hellip;. until now ;-)
I had problems with 1.14 and so I&rsquo;m using 1.13.
Project structure I&rsquo;ll tidy up my repo but the code may be found:
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200207/" class="link black dim">
        Accessing GCR repos from Kubernetes
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Until today, I&rsquo;d not accessed a Google Container Registry repo from a non-GKE Kubernetes deployment.
It turns out that it&rsquo;s pretty well-documented (link) but, here&rsquo;s an end-end example.
Assuming:
BILLING=[[YOUR-BILLING]] PROJECT=[[YOUR-PROJECT]] SERVER=&#34;us.gcr.io&#34; If not already:
gcloud projects create {$PROJECT} gcloud beta billing projects link ${PROJECT} \ --billing-account=${BILLING} gcloud services enable containerregistry.googleapis.com \ --project=${PROJECT} Container Registry IMAGE=&#34;busybox&#34; # Or ... docker pull ${IMAGE} docker tag \ ${IMAGE} \ ${SERVER}/${PROJECT}/${IMAGE} docker push ${SERVER}/${PROJECT}/${IMAGE} gcloud container images list-tags ${SERVER}/${PROJECT}/${IMAGE} Service Account Create a service account that&rsquo;s permitted to download (read-only) images from this project&rsquo;s registry
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200206/" class="link black dim">
        Cloud Build wishlist: Mountable Golang Modules Proxy
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I think it would be valuable if Google were to provide volumes in Cloud Build of package registries (e.g. Go Modules; PyPi; Maven; NPM etc.).
Google provides a mirror of a subset of Docker Hub. This confers several benefits: Google&rsquo;s imprimatur; speed (latency); bandwidth; and convenience.
The same benefits would apply to package registries.
In the meantime, there&rsquo;s a hacky way to gain some of the benefits of these when using Cloud Build.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/ackal/" class="link blue hover-black">
            Tag: Ackal
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/230404/" class="link black dim">
        Azure Container Apps
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      The majority of Ackal&rsquo;s components are deployed to Google Cloud. However, by its nature, Ackal benefits from deployments that span cloud platforms. I&rsquo;ve deployed Ackal&rsquo;s gRPC health checks to Fly, and managed Kubernetes services on Linode and Vultr.
Today, I decided to revisit¹ Azure. Ackal uses Azure (Active Directory) for one of its OAuth providers. This time, I wanted to deploy a containerized gRPC service. Azure provides several container-oriented services. I decided to use Azure Container Apps and, in hindsight, find it analogous to Google Cloud Run.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/grpc/" class="link blue hover-black">
            Tag: gRPC
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/230404/" class="link black dim">
        Azure Container Apps
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      The majority of Ackal&rsquo;s components are deployed to Google Cloud. However, by its nature, Ackal benefits from deployments that span cloud platforms. I&rsquo;ve deployed Ackal&rsquo;s gRPC health checks to Fly, and managed Kubernetes services on Linode and Vultr.
Today, I decided to revisit¹ Azure. Ackal uses Azure (Active Directory) for one of its OAuth providers. This time, I wanted to deploy a containerized gRPC service. Azure provides several container-oriented services. I decided to use Azure Container Apps and, in hindsight, find it analogous to Google Cloud Run.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/230314/" class="link black dim">
        Access Google Services using gRPC
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Google publishes interface definitions of Google APIs (services) that support REST and gRPC in a repo called Google APIs. Google&rsquo;s SDKs uses gRPC to access these services but, how to do this using e.g. gRPCurl?
I wanted to debug Cloud Profiler and its agent makes UpdateProfile RPCs to cloudprofiler.googleapis.com. Cloud Profiler is more challenging service to debug because (a) it&rsquo;s publicly &ldquo;write-only&rdquo;; and (b) it has complex messages. UpdateProfile sends UpdateProfileRequest messages that include Profile messages that include profile_bytes which are gzip compressed serialized protos of pprof&rsquo;s Profile.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/230215/" class="link black dim">
        Secure (TLS) gRPC services with LKE
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      NOTE cert-manager is a better solution to what follows.
I wrote about deploying Secure (TLS) gRPC services with Vultr Kubernetes Engine (VKE). This week, I&rsquo;ve reproduced this deployment using Linode Kubernetes Engine (LKE).
Thanks to the consistency provided by Kubernetes, the Kubernetes programming is almost identical. The main differences are between the CLI&rsquo;s provided by these platforms. Both are good. They&rsquo;re just different.
I&rsquo;m going to include the linode-cli commands I&rsquo;m using in this post as I found it slightly more quirky.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220603/" class="link black dim">
        Secure (TLS) gRPC services with VKE
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      NOTE cert-manager is a better solution to what follows.
I&rsquo;ve a need to deploy a Vultr Kubernetes Engine (VKE) cluster on a daily basis (create and delete within a few hours) and expose (securely|TLS) a gRPC service.
I have an existing solution Automatic Certs w/ Golang gRPC service on Compute Engine that combines a gRPC Healthchecking and an ACME service and decided to reuse this.
In order for it work, we need:
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220421/" class="link black dim">
        Using Google&#39;s Public Certificate Authority with Golang autocert
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Last year, I wrote about using Automatic Certs w/ Golang gRPC service on Compute Engine. That solution uses ACME with (the wonderful) Let&rsquo;s Encrypt. Google is offering a private preview of Automate Public Certificates Lifecycle Management via RFC 8555 (ACME) and, because I&rsquo;m using Google Cloud Platform extensively to build a &ldquo;thing&rdquo; and I think it would be useful to have a backup to Let&rsquo;s Encrypt, I thought I&rsquo;d give the solution a try.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/211130/" class="link black dim">
        Automatic Certs w/ Golang gRPC service on Compute Engine
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I needed to deploy a healthcheck-enabled gRPC TLS-enabled service. Fortunately, most (all?) of the SDKs include an implementation, e.g. Golang has grpc-go/health.
I learned in my travels that:
DigitalOcean [App] platform does not (link) work with TLS-based gRPC apps. Fly has a regression (link) that breaks gRPC So, I resorted to Google Cloud Platform (GCP). Although Cloud Run would be well-suited to running the gRPC app, it uses a proxy|sidecar to provision a cert for the app and I wanted to be able to (easily use a custom domain) and give myself a somewhat general-purpose solution.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210730/" class="link black dim">
        Renewing Firebase Authentication ID tokens with gRPC
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve written before about a project in which I&rsquo;m using Firebase Authentication in combination with Google Cloud Endpoints and a gRPC service running on Cloud Run:
Firebase Authentication, Cloud Endpoints and gRPC (1of2) Firebase Authentication, Cloud Endpoints and gRPC (2of2) This works well with one caveat, the ID tokens (JWTs) minted by Firebase Authentication have a 3600 second (one hour) lifetime.
The user flow in my app is that whenever the user invokes the app&rsquo;s CLI:
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210724/" class="link black dim">
        gRPC Interceptors and in-memory gRPC connections
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      For&hellip; reasons, I wanted to pre-filter gRPC requests to check for authorization. Authorization is implemented as a &lsquo;micro-service&rsquo; and I wanted the authorization server to run in the same process as the gRPC client.
TL;DR:
Shiju&rsquo;s &ldquo;Writing gRPC Interceptors in Go&rdquo; is great This Stack overflow answer ostensibly for writing unit tests for gRPC got me an in-process server What follows stands on these folks&rsquo; shoulders&hellip;
A key motivator for me to write blog posts is that helps me ensure that I understand things.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210618/" class="link black dim">
        Firebase Authentication, Cloud Endpoints and gRPC (2of2)
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Earlier this week, I wrote about using Firebase Authentcation, Cloud Endpoints and gRPC (1of2). Since then, I learned some more and added a gRPC interceptor to implement basic authorization for the service.
ESPv2 --allow-unauthenticated The Cloud Enpoints (ESPv2) proxy must be run as --allow-unauthenticated on Cloud Run to ensure that requests make it to the proxy where the request is authenticated and only authenticated requests make it on to the backend service.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210614/" class="link black dim">
        Firebase Authentication, Cloud Endpoints and gRPC (1of2)
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m building a service that requires user authentication. The primary endpoint is a gRPC-based service. I would like to consider using certificate-based auth but this feels&hellip; challenging. Instead, I have been aware of, but never used, Firebase Authentication and was interested to see that Cloud Endpoints includes Firebase Authentication as one of its supported auth mechanisms. Curiosity piqued, I confirmed that gRPC supports Google token-based authentication.
The following is a summary of what I did but I&rsquo;ll leave the extensive documentation to Google, (Google&rsquo;s) Firebase and gRPC, all of which, in this case, provide really good explanations.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210608/" class="link black dim">
        Cloud Endpoints combine OpenAPI and gRPC... or not!
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      See:
Multiplexing gRPC and HTTP endpoints with Cloud Run gRPC, Cloud Run &amp; Endpoints ESPv2: Configure Cloud Endpoints to proxy traffic to a Cloud Run multiplexed (gRPC|HTTP) service Challenges:
Cloud Run permits single port Cloud Run services publishing e.g. gRPC and Prometheus, must multiplex transports Cloud Run services publishing multiplexed transports are challenging to expose using Cloud Endpoints Hypothesis #1: Multiplexed transports work with Cloud Run See: Multiplexing gRPC and HTTP endpoints with Cloud Run
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210519/" class="link black dim">
        Multiplexing gRPC and HTTP (Prometheus) endpoints with Cloud Run
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Google Cloud Run is useful but, each service is limited to exposing a single port. This caused me problems with a gRPC service that serves (non-gRPC) Prometheus metrics because customarily, you would serve gRPC on one port and the Prometheus metrics on another.
Fortunately, cmux provides a solution by providing a mechanism that multiplexes both services (gRPC and HTTP) on a single port!
TL;DR See the cmux Limitations and use:
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210412/" class="link black dim">
        Fly.io
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I spent some time over the weekend understanding Fly.io. It&rsquo;s always fascinating to me how many smart people are building really neat solutions. Fly.io is subtly different to other platforms that I use (Kubernetes, GCP, DO, Linode) and I&rsquo;ve found the Fly.io team to be highly responsive and helpful to my noob questions.
One of the team&rsquo;s posts, Docker without Docker surfaced in my Feedly feed (hackernews) and it piqued my interest.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210222/" class="link black dim">
        Dapr
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      It&rsquo;s a good name, I read it as &ldquo;dapper&rdquo; but I frequently type &ldquo;darp&rdquo; :-(
Was interested to read that Dapr is now v1.0 and decided to check it out. I was initially confused between Dapr and service mesh functionality. But, having used Dapr, it appears to be more focused in aiding the development of (cloud-native) (distributed) apps by providing developers with abstractions for e.g. service discovery, eventing, observability whereas service meshes feel (!
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200717/" class="link black dim">
        Remotely invoking WASM functions using gRPC and waPC
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Following on from waPC &amp; Protobufs, I can now remotely invoke (arbitrary) WASM functions:
Client:
The logging isn&rsquo;t perfectly clear but, the client gets (a previously added) WASM binary from the server (using the SHA-256 of the WASM binary as a unique identifier). The result includes metadata that includes a protobuf descriptor of the WASM binary&rsquo;s functions. The descriptor defines gRPC services (that represent the WASM functions) with input (parameters) and output (results) messages.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200429/" class="link black dim">
        Rust implementation of Crate Transparency using Google Trillian
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve been hacking on a Rust-based transparent application for Google Trillian. As appears to be my fixation, this personality is for another package manager. This time, Rust&rsquo;s Crates often found in crates.io which is Rust&rsquo;s Package Registry. I discussed this project earlier this month Rust Crate Transparency &amp;&amp; Rust SDK for Google Trillian and and earlier approach for Python&rsquo;s packages with pypi-transparency.
This time, of course, I&rsquo;m using Rust. And, by way of a first for me, for the gRPC server implementation (aka &ldquo;personality&rdquo;).
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200403/" class="link black dim">
        Rust Crate Transparency &amp;&amp; Rust SDK for Google Trillian
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m noodling the utility of a Transparency solution for Rust Crates. When developers push crates to Cargo, a bunch of metadata is associated with the crate. E.g. protobuf. As with Golang Modules, Python packages on PyPi etc., there appears to be utility in making tamperproof recordings of these publications. Then, other developers may confirm that a crate pulled from cates.io is highly unlikely to have been changed.
On Linux, Cargo stores downloaded crates under ${HOME}/.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200326/" class="link black dim">
        Google Trillian on Cloud Run
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve written previously (Google Trillian for Noobs) about Google&rsquo;s interesting project Trillian and about some of the &ldquo;personalities&rdquo; (e.g. PyPi Transparency) that I&rsquo;ve build using it.
Having gone slight cra-cra on Cloud Run and gRPC this week with Golang gRPC Cloud Run and gRPC, Cloud Run &amp; Endpoints, I thought it&rsquo;d be fun to deploy Trillian and a personality to Cloud Run.
It mostly (!) works :-)
At the end of the post, I&rsquo;ve summarized creating a Cloud SQL instance to host the Trillian data(base).
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200325/" class="link black dim">
        gRPC, Cloud Run &amp; Endpoints
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      &lt;3 Google but there&rsquo;s quite often an assumption that we&rsquo;re all sitting around the engineering table and, of course, we&rsquo;re not.
Cloud Endpoints is a powerful offering but &ndash; IMO &ndash; it&rsquo;s super confusing to understand and complex to deploy.
If you&rsquo;re familiar with the motivations behind service meshes (e.g. Istio), Cloud Endpoints fits in a similar niche (&ldquo;neesh&rdquo; or &ldquo;nitch&rdquo;?). The underlying ambition is that, developers can take existing code and by adding a proxy (or sidecar), general-purpose abstractions, security, logging etc.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200320/" class="link black dim">
        Golang gRPC Cloud Run
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Update: 2020-03-24: Since writing this post, I&rsquo;ve contributed Golang and Rust samples to Google&rsquo;s project. I recommend you start there.
Google explained how to run gRPC servers with Cloud Run. The examples are good but only Python and Node.JS:
gRPC comes to Cloud Run gRPC in Google Cloud Run Missing Golang&hellip;. until now ;-)
I had problems with 1.14 and so I&rsquo;m using 1.13.
Project structure I&rsquo;ll tidy up my repo but the code may be found:
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/190918/" class="link black dim">
        Cloud Functions Simple(st) HTTP Multi-host Proxy
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Tweaked yesterday&rsquo;s solution so that it will randomly select one from several hosts with which it&rsquo;s configured.
package proxy import ( &#34;log&#34; &#34;math/rand&#34; &#34;net/http&#34; &#34;net/url&#34; &#34;os&#34; &#34;strings&#34; &#34;time&#34; ) func robin() { hostsList := os.Getenv(&#34;PROXY_HOST&#34;) if hostsList == &#34;&#34; { log.Fatal(&#34;&#39;PROXY_HOST&#39; environment variable should contain comma-separated list of hosts&#34;) } // Comma-separated lists of hosts hosts := strings.Split(hostsList, &#34;,&#34;) urls := make([]*url.URL, len(hosts)) for i, host := range hosts { var origin = Endpoint{ Host: host, Port: os.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/190917/" class="link black dim">
        Cloud Functions Simple(st) HTTP Proxy
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m investigating the use of LetsEncrypt for gRPC services. I found this straightforward post by Scott Devoid and am going to try this approach.
Before I can do that, I need to be able to publish services (make them Internet-accessible) and would like to try to continue to use GCP for free.
Some time ago, I wrote about using the excellent Microk8s on GCP. Using an f1-micro, I&rsquo;m hoping (!) to stay within the Compute Engine free tier.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/apps-script/" class="link blue hover-black">
            Tag: Apps Script
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/230329/" class="link black dim">
        Apps Script connecting to GCS
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m building a Google Sheet that interacts with Google Cloud Storage (GCS) objects using Apps Script.
I Googled but found few examples of such integrations beyond out-of-band solutions (e.g. Python solutions) that interact with Google services and program Google Sheets using its library.
In my case, I&rsquo;m going to bind a Google Sheet to a specific Google Cloud project and my Google (User) account has owner access to the Google Cloud Storage bucket and its objects.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/google-cloud-storage/" class="link blue hover-black">
            Tag: Google Cloud Storage
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/230329/" class="link black dim">
        Apps Script connecting to GCS
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m building a Google Sheet that interacts with Google Cloud Storage (GCS) objects using Apps Script.
I Googled but found few examples of such integrations beyond out-of-band solutions (e.g. Python solutions) that interact with Google services and program Google Sheets using its library.
In my case, I&rsquo;m going to bind a Google Sheet to a specific Google Cloud project and my Google (User) account has owner access to the Google Cloud Storage bucket and its objects.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/golang/" class="link blue hover-black">
            Tag: Golang
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/230314/" class="link black dim">
        Access Google Services using gRPC
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Google publishes interface definitions of Google APIs (services) that support REST and gRPC in a repo called Google APIs. Google&rsquo;s SDKs uses gRPC to access these services but, how to do this using e.g. gRPCurl?
I wanted to debug Cloud Profiler and its agent makes UpdateProfile RPCs to cloudprofiler.googleapis.com. Cloud Profiler is more challenging service to debug because (a) it&rsquo;s publicly &ldquo;write-only&rdquo;; and (b) it has complex messages. UpdateProfile sends UpdateProfileRequest messages that include Profile messages that include profile_bytes which are gzip compressed serialized protos of pprof&rsquo;s Profile.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/221128/" class="link black dim">
        Maintaining Container Images
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      As I contemplate moving my &ldquo;thing&rdquo; into production, I&rsquo;m anticipating aspects of the application that need maintenance and how this can be automated.
I&rsquo;d been negligent in the maintenance of some of my container images.
I&rsquo;m using mostly Go and some Rust as the basis of static(ally-compiled) binaries that run in these containers but not every container has a base image of scratch. scratch is the only base image that doesn&rsquo;t change and thus the only base image that doesn&rsquo;t require that container images buit FROM it, be maintained.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/221117/" class="link black dim">
        Delegate domain-wide authority using Golang
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;d not used Google&rsquo;s Domain-wide Delegation from Golang and struggled to find example code.
Google provides Java and Python samples.
Google has a myriad packages implementing its OAuth security and it&rsquo;s always daunting trying to determine which one to use.
As it happens, I backed into the solution through client.Options
ctx := context.Background() // Google Workspace APIS don&#39;t use IAM do use OAuth scopes // Scopes used here must be reflected in the scopes on the // Google Workspace Domain-wide Delegate client scopes := []string{ .
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/221106/" class="link black dim">
        Basic programmatic access to GitHub Issues
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      It&rsquo;s been a while!
I&rsquo;ve been spending time writing Bash scripts and a web site but neither has been sufficiently creative that I&rsquo;ve felt worth a blog post.
As I&rsquo;ve been finalizing the web site, I needed an Issue Tracker and decided to leverage GitHub(&rsquo;s Issues).
As a former Googler, I&rsquo;m familiar with Google&rsquo;s (excellent) internal issue tracking tool (Buganizer) and it&rsquo;s public manifestation Issue Tracker. Google documents Issue Tracker and its Issue type which I&rsquo;ve mercilessly plagiarized in my implementation.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/211018/" class="link black dim">
        Golang Structured Logging w/ Google Cloud Logging (2)
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      UPDATE There&rsquo;s an issue with my naive implementation of RenderValuesHook as described in this post. I summarized the problem in this issue where I&rsquo;ve outlined (hopefully) a more robust solution.
Recently, I described how to configure Golang logging so that user-defined key-values applied to the logs are parsed when ingested by Google Cloud Logging.
Here&rsquo;s an example of what we&rsquo;re trying to achieve. This is an example Cloud Logging log entry that incorporates user-defined labels (see dog:freddie and foo:bar) and a readily-querable jsonPayload:
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210928/" class="link black dim">
        Golang Structured Logging w/ Google Cloud Logging
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve multiple components in an app and these are deployed across multiple Google Cloud Platform (GCP) services: Kubernetes Engine, Cloud Functions, Cloud Run, etc. Almost everything is written in Golang and I started the project using go-logr.
logr is in two parts: a Logger that you use to write log entries; a LogSink (adaptor) that consumes log entries and outputs them to a specific log implementation.
Initially, I defaulted to using stdr which is a LogSink for Go&rsquo;s standard logging implementation.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210924/" class="link black dim">
        GitHub help with dependency management
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      This is very useful:
I am building an application that comprises multiple repos. I continue to procrastinate on whether using multiple repos vs. a monorepo was a good idea but, an issue that I have (had) is the need to ensure that the repos&rsquo; contents are using current|latest modules. GitHub can help.
Most of the application is written in Golang with a smattering of Rust and some JavaScript.
Aside Even though I&rsquo;m more proficient with Golang, I want to become more proficient in Rust and I contemplated trying to write the entire application in Rust.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210724/" class="link black dim">
        gRPC Interceptors and in-memory gRPC connections
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      For&hellip; reasons, I wanted to pre-filter gRPC requests to check for authorization. Authorization is implemented as a &lsquo;micro-service&rsquo; and I wanted the authorization server to run in the same process as the gRPC client.
TL;DR:
Shiju&rsquo;s &ldquo;Writing gRPC Interceptors in Go&rdquo; is great This Stack overflow answer ostensibly for writing unit tests for gRPC got me an in-process server What follows stands on these folks&rsquo; shoulders&hellip;
A key motivator for me to write blog posts is that helps me ensure that I understand things.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210716/" class="link black dim">
        Stripe
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      It&rsquo;s been almost a month since my last post. I&rsquo;ve been occupied learning Stripe and integrating it into an application that I&rsquo;m developing. The app benefits from a billing mechanism for prospective customers and, as far as I can tell, Stripe is the solution. I&rsquo;d be interested in hearing perspectives on alternatives.
As with any platform, there&rsquo;s good and bad and I&rsquo;ll summarize my perspective on Stripe here. It&rsquo;s been some time since I developed in JavaScript and this lack of familiarity has meant that the solution took longer than I wanted to develop.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210527/" class="link black dim">
        Struggling with Golang structs
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Julia&rsquo;s post Blog about what you&rsquo;ve struggled with resonates because I&rsquo;ve been struggling with Golang structs in a project. Not the definitions of structs but seemingly needing to reproduce them across the project. I realize that each instance of these resources differs from the others but I&rsquo;m particularly concerned by having to duplicate method implementations on them.
I&rsquo;m kinda hoping that I see the solution to my problem by writing it out.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210506/" class="link black dim">
        Firestore Golang Timestamps &amp; Merging
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m using Google&rsquo;s Golang SDK for Firestore. The experience is excellent and I&rsquo;m quikcly becoming a fan of Firestore. However, as a Golang Firestore developer, I&rsquo;m feeling less loved and some of the concepts in the database were causing me a conundrum.
I&rsquo;m still not entirely certain that I have Timestamps nailed but&hellip; I learned an important lesson on the auto-creation of Timestamps in documents and how to retain these values.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210413/" class="link black dim">
        Cloud Firestore Triggers in Golang
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I was pleased to discover that Google provides a non-Node.JS mechanism to subscribe to and act upon Firestore triggers, Google Cloud Firestore Triggers. I&rsquo;ve nothing against Node.JS but, for the project i&rsquo;m developing, everything else is written in Golang. It&rsquo;s good to keep it all in one language.
I&rsquo;m perplexed that Cloud Functions still (!) only supports Go 1.13 (03-Sep-2019). Even Go 1.14 (25-Feb-2020) was released pre-pandemic and we&rsquo;re now running on 1.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210317/" class="link black dim">
        Using Golang with the Firestore Emulator
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      This works great but it wasn&rsquo;t clearly documented for non-Firebase users. I assume it will work, as well, for any of the client libraries (not just Golang).
Assuming you have some (Golang) code (in this case using the Google Cloud Client Library) that interacts with a Firestore database. Something of the form:
package main import ( &#34;context&#34; &#34;crypto/sha256&#34; &#34;fmt&#34; &#34;log&#34; &#34;os&#34; &#34;time&#34; &#34;cloud.google.com/go/firestore&#34; ) func hash(s string) string { h := sha256.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210316/" class="link black dim">
        Programmatically deploying Cloud Run services (Golang|Python)
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Phew! Programmitcally deploying Cloud Run services should be easy but it didn&rsquo;t find it so.
My issues were that the Cloud Run Admin (!) API is poorly documented and it uses non-standard endpoints (thanks Sal!). Here, for others who may struggle with this, is how I got this to work.
Goal Programmatically (have Golang, Python, want Rust) deploy services to Cloud Run.
i.e. achieve this:
gcloud run deploy ${NAME} \ --image=${IMAGE} \ --platform=managed \ --no-allow-unauthenticated \ --region=${REGION} \ --project=${PROJECT} TRICK --log-http is your friend
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210222/" class="link black dim">
        Dapr
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      It&rsquo;s a good name, I read it as &ldquo;dapper&rdquo; but I frequently type &ldquo;darp&rdquo; :-(
Was interested to read that Dapr is now v1.0 and decided to check it out. I was initially confused between Dapr and service mesh functionality. But, having used Dapr, it appears to be more focused in aiding the development of (cloud-native) (distributed) apps by providing developers with abstractions for e.g. service discovery, eventing, observability whereas service meshes feel (!
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/201229/" class="link black dim">
        Kubernetes Webhooks
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I spent some time last week writing my first admission webhook for Kubernetes. I wrote the handler in Golang because I&rsquo;m most familiar with Golang and because, as Kubernetes&rsquo; native language, I was more confident that the necessary SDKs would exist and that the documentation would likely use Golang by default. I struggled to find useful documentation and so this post is to help you (and me!) remember how to do this next time!
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/201113/" class="link black dim">
        Akri
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      For the past couple of weeks, I&rsquo;ve been playing around with Akri, a Microsoft (DeisLabs) project for building a connected edge with Kubernetes. Kubernetes, IoT, Rust (and Golang) make this all compelling to me.
Initially, I deployed an Akri End-to-End to MicroK8s on Google Compute Engine (link) and Digital Ocean (link). But I was interested to create me own example and so have proposed a very (!) simple HTTP-based protocol.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/201029/" class="link black dim">
        GitHub Actions &amp;&amp; GitHub Container Registry
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      You know when you start something and then regret it!? I think I&rsquo;ll be sticking with Google Cloud Build; GitHub Actions appears functional and useful but I found the documentation to be confusing and limited and struggled to get a simple container image build|push working.
I&rsquo;ve long used Docker Hub but am planning to use it less as a result of the planned changes. I want to see Docker succeed and to do so it needs to find a way to make money but, there are free alternatives including the new GitHub Container Registry and the very very cheap Google Container Registry.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200908/" class="link black dim">
        Trillian Map Mode
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Chatting with one of Google&rsquo;s Trillian team, I was encouraged to explore Trillian&rsquo;s Map Mode. The following is the result of some spelunking through this unfamiliar cave. I can&rsquo;t provide any guarantee that this usage is correct or sufficient.
Here&rsquo;s the repo: https://github.com/DazWilkin/go-trillian-map
I&rsquo;ve written about Trillian Log Mode elsewhere.
I uncovered use of Trillian Map Mode through Trillian&rsquo;s integration tests. I&rsquo;m unclear on the distinction between TrillianMapClient and TrillianMapWriteClient but the latter served most of my needs.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200817/" class="link black dim">
        WASM Transparency
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve been playing around with a proof-of-concept combining WASM and Trillian. The hypothesis was to explore using WASM as a form of chaincode with Trillian. The project works but it&rsquo;s far from being a chaincode-like solution.
Let&rsquo;s start with a couple of (trivial) examples and then I&rsquo;ll explain what&rsquo;s going on and how it&rsquo;s implemented.
2020/08/14 18:42:17 [main:loop:dynamic-invoke] Method: mul 2020/08/14 18:42:17 [random:New] Message 2020/08/14 18:42:17 [random:New] Float32 2020/08/14 18:42:17 [random:New] Float32 2020/08/14 18:42:17 [random:New] Message 2020/08/14 18:42:17 [random:New] Float32 2020/08/14 18:42:17 [random:New] Float32 2020/08/14 18:42:17 [Client:Invoke] Metadata: complex.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200807/" class="link black dim">
        waPC and MsgPack (Rust|Golang)
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      As my reader will know (Hey Mom!), I&rsquo;ve been noodling around with WASM and waPC. I&rsquo;ve been exploring ways to pass structured messages across the host:guest boundary.
Protobufs was my first choice. @KevinHoffman created waPC and waSCC and he explained to me and that wSCC uses Message Pack.
It&rsquo;s slightly surprising to me (still) that technologies like this exist with everyone else seemingly using them and I&rsquo;ve not heard of them.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200630/" class="link black dim">
        Golang Protobuf APIv2
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Google has a new Golang Protobuf API, APIv2 (google.golang.org/protobuf) superseding APIv1 (github.com/golang/protobuf). If your code is importing github.com/golang/protobuf, you&rsquo;re using APIv2. Otherwise, you should consult with the docs because Google reimplemented APIv1 atop APIv2. One challenge this caused me, as someone who does not use protobufs and gRPC on a daily basis, is that gRPC (code-generation) is being removed from the (Golang) protoc-gen-go, the Golang plugin that generates gRPC service bindings.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200417/" class="link black dim">
        Golang Xiaomi Bluetooth Temperature|Humidity (LYWSD03MMC) 2nd Gen
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Well, this became more of an adventure that I&rsquo;d originally wanted but, after learning some BLE and, with the help of others (Thanks Jonatha, JsBergbau), I&rsquo;ve sample code that connects to 4 Xiaomi 2nd gen. Thermometers, subscribes to readings and publishes the data to MQTT. From there, I&rsquo;m scraping it using Inuits MQTTGateway into Prometheus.
Repo: https://github.com/DazWilkin/gomijia2
Thanks|Credit: Jonathan McDowell for gomijia and help JsBergbau for help Background I&rsquo;ve been playing around with ESPHome and blogged around my very positive experience ESPHome, MQTT, Prometheus and almost Cloud IoT.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200325/" class="link black dim">
        gRPC, Cloud Run &amp; Endpoints
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      &lt;3 Google but there&rsquo;s quite often an assumption that we&rsquo;re all sitting around the engineering table and, of course, we&rsquo;re not.
Cloud Endpoints is a powerful offering but &ndash; IMO &ndash; it&rsquo;s super confusing to understand and complex to deploy.
If you&rsquo;re familiar with the motivations behind service meshes (e.g. Istio), Cloud Endpoints fits in a similar niche (&ldquo;neesh&rdquo; or &ldquo;nitch&rdquo;?). The underlying ambition is that, developers can take existing code and by adding a proxy (or sidecar), general-purpose abstractions, security, logging etc.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200320/" class="link black dim">
        Golang gRPC Cloud Run
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Update: 2020-03-24: Since writing this post, I&rsquo;ve contributed Golang and Rust samples to Google&rsquo;s project. I recommend you start there.
Google explained how to run gRPC servers with Cloud Run. The examples are good but only Python and Node.JS:
gRPC comes to Cloud Run gRPC in Google Cloud Run Missing Golang&hellip;. until now ;-)
I had problems with 1.14 and so I&rsquo;m using 1.13.
Project structure I&rsquo;ll tidy up my repo but the code may be found:
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200310/" class="link black dim">
        Google&#39;s New Golang SDK for Protobufs
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Google has released a new Golang SDK for protobuf. In the [announcement], a useful tool to redact properties is described. If like me, this is somewhat novel to you, here&rsquo;s a mashup using Google&rsquo;s Protocol Buffer Basics w/ redaction.
To be very clear, as it&rsquo;s an important distinction:
Version Repo Docs v2 google.golang.org/protobuf Docs v1 github.com/golang/protobuf Docs Project Here&rsquo;s my project structure:
. ├── protoc-3.11.4-linux-x86_64 │ ├── bin │ │ └── protoc │ ├── include │ │ └── google │ └── readme.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200226/" class="link black dim">
        OriginStamp: Verifying Proofs
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Recently, I wrote about some initial adventures with OriginStamp
Using OriginStamp&rsquo;s UI or API, submitting a hash results in transactions being submitted to Bitcoin, Ethereum and a German newspaper.
Using the API, it&rsquo;s possible to query OriginStamp&rsquo;s service for a proof. This post explains how to verify such a proof.
The diligent reader among you (Hey Mom!) will recall that I submitted a hash for the message:
Frederik Jack is a bubbly Border Collie The SHA-256 hash of this message is:
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200219/" class="link black dim">
        FreeTSA &amp; Digitorus&#39; Timestamp SDK
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I wrote recently about some exploration of Timestamping with OriginStamp. Since writing that post, I had some supportive feedback from the helpful folks at OriginStamp and plan to continue exploring that solution.
Meanwhile, OriginStamp exposed me to timestamping and trusted timestamping and I discovered freeTSA.org.
What&rsquo;s the point? These services provide authoritative proof of the existence of a digital asset before some point in time; OriginStamp provides a richer service and uses multiple timestamp authorities including Bitcoin, Ethereum and rather interestingly a German Newspaper&rsquo;s Trusted Timestamp.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200217/" class="link black dim">
        OriginStamp Python|Golang SDK Examples
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      A friend mentioned OriginStamp to me.
NB There are 2 sites: originstamp.com and originstamp.org.
It&rsquo;s an interesting project.
It&rsquo;s a solution for providing auditable proof that you had a(ccess to) some digital thing before a certain date. OriginStamp provides user-|developer-friendly means to submit files|hashes (of your content) and have these bundled into transactions that are submitted to e.g. bitcoin.
I won&rsquo;t attempt to duplicate the narrative here, review OriginStamp&rsquo;s site and some of its content.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200206/" class="link black dim">
        Cloud Build wishlist: Mountable Golang Modules Proxy
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I think it would be valuable if Google were to provide volumes in Cloud Build of package registries (e.g. Go Modules; PyPi; Maven; NPM etc.).
Google provides a mirror of a subset of Docker Hub. This confers several benefits: Google&rsquo;s imprimatur; speed (latency); bandwidth; and convenience.
The same benefits would apply to package registries.
In the meantime, there&rsquo;s a hacky way to gain some of the benefits of these when using Cloud Build.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200122/" class="link black dim">
        Setting up a GCE Instance as an Inlets Exit Node
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      The prolific Alex Ellis has a new project, Inlets.
Here&rsquo;s a quick tutorial using Google Compute Platform&rsquo;s (GCP) Compute Engine (GCE).
NB I&rsquo;m using one of Google&rsquo;s &ldquo;Always free&rdquo; f1-micro instances but you may still pay for network *gress and storage
Assumptions I&rsquo;m assuming you&rsquo;ve a Google account, have used GCP and have a billing account established, i.e. the following returns at least one billing account:
gcloud beta billing accounts list If you&rsquo;ve only one billing account and it&rsquo;s the one you wish to use, then you can:
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200110/" class="link black dim">
        Google Fit
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve spent a few days exploring [Google Fit SDK] as I try to wean myself from my obsession with metrics (of all forms). A quick Googling got me to Robert&rsquo;s Exporter Google Fit Daily Steps, Weight and Distance to a Google Sheet. This works and is probably where I should have stopped&hellip; avoiding the rabbit hole that I&rsquo;ve been down&hellip;
I threw together a simple Golang implementation of the SDK using Google&rsquo;s Golang API Client Library.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200107/" class="link black dim">
        Google Home Exporter
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m obsessing over Prometheus exporters. First came Linode Exporter, then GCP Exporter and, on Sunday, I stumbled upon a reverse-engineered API for Google Home devices and so wrote a very basic Google Home SDK and a similarly basic Google Home Exporter:
The SDK only implements /setup/eureka_info and then only some of the returned properties. There&rsquo;s not a lot of metric-like data to use besides SignalLevel (signal_level) and NoiseLevel (noise_level). I&rsquo;m not clear on the meaning of some of the properties.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/191220/" class="link black dim">
        Google Cloud Platform (GCP) Exporter
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Earlier this week I discussed a Linode Prometheus Exporter.
I added metrics for Digital Ocean&rsquo;s Managed Kubernetes service to @metalmatze&rsquo;s Digital Ocean Exporter.
This left, metrics for Google Cloud Platform (GCP) which has, for many years, been my primary cloud platform. So, today I wrote Prometheus Exporter for Google Cloud Platform.
All 3 of these exporters follow the template laid down by @metalmatze and, because each of these services has a well-written Golang SDK, it&rsquo;s straightforward to implement an exporter for each of them.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/191218/" class="link black dim">
        Linode Prometheus Exporter
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I enjoy using Prometheus and have toyed around with it for some time particularly in combination with Kubernetes. I signed up with Linode [referral] compelled by the addition of a managed Kubernetes service called Linode Kubernetes Engine (LKE). I have an anxiety that I&rsquo;ll inadvertently leave resources running (unused) on a cloud platform. Instead of refreshing the relevant billing page, it struck me that Prometheus may (not yet proven) help.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/190926/" class="link black dim">
        PyPi Transparency
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve been noodling around with another Trillian personality.
Another in a theme that interests me in providing tamperproof logs for the packages in the popular package management registries.
The Golang team recently announced Go Module Mirror which is built atop Trillian. It seems to me that all the package registries (Go Modules, npm, Maven, NuGet etc.) would benefit from tamperproof logs hosted by a trusted 3rd-party.
As you may have guessed, PyPi Transparency is a log for PyPi packages.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/190918/" class="link black dim">
        Cloud Functions Simple(st) HTTP Multi-host Proxy
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Tweaked yesterday&rsquo;s solution so that it will randomly select one from several hosts with which it&rsquo;s configured.
package proxy import ( &#34;log&#34; &#34;math/rand&#34; &#34;net/http&#34; &#34;net/url&#34; &#34;os&#34; &#34;strings&#34; &#34;time&#34; ) func robin() { hostsList := os.Getenv(&#34;PROXY_HOST&#34;) if hostsList == &#34;&#34; { log.Fatal(&#34;&#39;PROXY_HOST&#39; environment variable should contain comma-separated list of hosts&#34;) } // Comma-separated lists of hosts hosts := strings.Split(hostsList, &#34;,&#34;) urls := make([]*url.URL, len(hosts)) for i, host := range hosts { var origin = Endpoint{ Host: host, Port: os.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/190917/" class="link black dim">
        Cloud Functions Simple(st) HTTP Proxy
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m investigating the use of LetsEncrypt for gRPC services. I found this straightforward post by Scott Devoid and am going to try this approach.
Before I can do that, I need to be able to publish services (make them Internet-accessible) and would like to try to continue to use GCP for free.
Some time ago, I wrote about using the excellent Microk8s on GCP. Using an f1-micro, I&rsquo;m hoping (!) to stay within the Compute Engine free tier.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/190907/" class="link black dim">
        pypi-transparency
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      The goal of pypi-transparency is very similar to the underlying motivation for the Golang team&rsquo;s Checksum Database (also built with Trillian).
Even though, PyPi provides hashes of the content of packages it hosts, the developer must trust that PyPi&rsquo;s data is consistent. One ambition with pypi-transparency is to provide a companion, tamperproof log of PyPi package files in order to provide a double-check of these hashes.
It is important to understand what this does (and does not) provide.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/googleapis/" class="link blue hover-black">
            Tag: googleapis
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/230314/" class="link black dim">
        Access Google Services using gRPC
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Google publishes interface definitions of Google APIs (services) that support REST and gRPC in a repo called Google APIs. Google&rsquo;s SDKs uses gRPC to access these services but, how to do this using e.g. gRPCurl?
I wanted to debug Cloud Profiler and its agent makes UpdateProfile RPCs to cloudprofiler.googleapis.com. Cloud Profiler is more challenging service to debug because (a) it&rsquo;s publicly &ldquo;write-only&rdquo;; and (b) it has complex messages. UpdateProfile sends UpdateProfileRequest messages that include Profile messages that include profile_bytes which are gzip compressed serialized protos of pprof&rsquo;s Profile.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/grpcurl/" class="link blue hover-black">
            Tag: gRPCurl
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/230314/" class="link black dim">
        Access Google Services using gRPC
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Google publishes interface definitions of Google APIs (services) that support REST and gRPC in a repo called Google APIs. Google&rsquo;s SDKs uses gRPC to access these services but, how to do this using e.g. gRPCurl?
I wanted to debug Cloud Profiler and its agent makes UpdateProfile RPCs to cloudprofiler.googleapis.com. Cloud Profiler is more challenging service to debug because (a) it&rsquo;s publicly &ldquo;write-only&rdquo;; and (b) it has complex messages. UpdateProfile sends UpdateProfileRequest messages that include Profile messages that include profile_bytes which are gzip compressed serialized protos of pprof&rsquo;s Profile.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200326/" class="link black dim">
        Google Trillian on Cloud Run
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve written previously (Google Trillian for Noobs) about Google&rsquo;s interesting project Trillian and about some of the &ldquo;personalities&rdquo; (e.g. PyPi Transparency) that I&rsquo;ve build using it.
Having gone slight cra-cra on Cloud Run and gRPC this week with Golang gRPC Cloud Run and gRPC, Cloud Run &amp; Endpoints, I thought it&rsquo;d be fun to deploy Trillian and a personality to Cloud Run.
It mostly (!) works :-)
At the end of the post, I&rsquo;ve summarized creating a Cloud SQL instance to host the Trillian data(base).
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200325/" class="link black dim">
        gRPC, Cloud Run &amp; Endpoints
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      &lt;3 Google but there&rsquo;s quite often an assumption that we&rsquo;re all sitting around the engineering table and, of course, we&rsquo;re not.
Cloud Endpoints is a powerful offering but &ndash; IMO &ndash; it&rsquo;s super confusing to understand and complex to deploy.
If you&rsquo;re familiar with the motivations behind service meshes (e.g. Istio), Cloud Endpoints fits in a similar niche (&ldquo;neesh&rdquo; or &ldquo;nitch&rdquo;?). The underlying ambition is that, developers can take existing code and by adding a proxy (or sidecar), general-purpose abstractions, security, logging etc.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200320/" class="link black dim">
        Golang gRPC Cloud Run
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Update: 2020-03-24: Since writing this post, I&rsquo;ve contributed Golang and Rust samples to Google&rsquo;s project. I recommend you start there.
Google explained how to run gRPC servers with Cloud Run. The examples are good but only Python and Node.JS:
gRPC comes to Cloud Run gRPC in Google Cloud Run Missing Golang&hellip;. until now ;-)
I had problems with 1.14 and so I&rsquo;m using 1.13.
Project structure I&rsquo;ll tidy up my repo but the code may be found:
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/protobufs/" class="link blue hover-black">
            Tag: protobufs
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/230314/" class="link black dim">
        Access Google Services using gRPC
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Google publishes interface definitions of Google APIs (services) that support REST and gRPC in a repo called Google APIs. Google&rsquo;s SDKs uses gRPC to access these services but, how to do this using e.g. gRPCurl?
I wanted to debug Cloud Profiler and its agent makes UpdateProfile RPCs to cloudprofiler.googleapis.com. Cloud Profiler is more challenging service to debug because (a) it&rsquo;s publicly &ldquo;write-only&rdquo;; and (b) it has complex messages. UpdateProfile sends UpdateProfileRequest messages that include Profile messages that include profile_bytes which are gzip compressed serialized protos of pprof&rsquo;s Profile.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200817/" class="link black dim">
        WASM Transparency
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve been playing around with a proof-of-concept combining WASM and Trillian. The hypothesis was to explore using WASM as a form of chaincode with Trillian. The project works but it&rsquo;s far from being a chaincode-like solution.
Let&rsquo;s start with a couple of (trivial) examples and then I&rsquo;ll explain what&rsquo;s going on and how it&rsquo;s implemented.
2020/08/14 18:42:17 [main:loop:dynamic-invoke] Method: mul 2020/08/14 18:42:17 [random:New] Message 2020/08/14 18:42:17 [random:New] Float32 2020/08/14 18:42:17 [random:New] Float32 2020/08/14 18:42:17 [random:New] Message 2020/08/14 18:42:17 [random:New] Float32 2020/08/14 18:42:17 [random:New] Float32 2020/08/14 18:42:17 [Client:Invoke] Metadata: complex.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200717/" class="link black dim">
        Remotely invoking WASM functions using gRPC and waPC
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Following on from waPC &amp; Protobufs, I can now remotely invoke (arbitrary) WASM functions:
Client:
The logging isn&rsquo;t perfectly clear but, the client gets (a previously added) WASM binary from the server (using the SHA-256 of the WASM binary as a unique identifier). The result includes metadata that includes a protobuf descriptor of the WASM binary&rsquo;s functions. The descriptor defines gRPC services (that represent the WASM functions) with input (parameters) and output (results) messages.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200630/" class="link black dim">
        Golang Protobuf APIv2
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Google has a new Golang Protobuf API, APIv2 (google.golang.org/protobuf) superseding APIv1 (github.com/golang/protobuf). If your code is importing github.com/golang/protobuf, you&rsquo;re using APIv2. Otherwise, you should consult with the docs because Google reimplemented APIv1 atop APIv2. One challenge this caused me, as someone who does not use protobufs and gRPC on a daily basis, is that gRPC (code-generation) is being removed from the (Golang) protoc-gen-go, the Golang plugin that generates gRPC service bindings.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200617/" class="link black dim">
        WASM Cloud Functions
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Following on from waPC &amp; Protobufs and a question on Stack Overflow about Cloud Functions, I was compelled to try running WASM on Cloud Functions no JavaScript.
I wanted to reuse the WASM waPC functions that I&rsquo;d written in Rust as described in the other post. Cloud Functions does not (yet!?) provide a Rust runtime and so I&rsquo;m using the waPC Host for Go in this example.
It works!
PARAMS=$(printf &#39;{&#34;a&#34;:{&#34;real&#34;:39,&#34;imag&#34;:3},&#34;b&#34;:{&#34;real&#34;:39,&#34;imag&#34;:3}}&#39; | base64) TOKEN=$(gcloud auth print-identity-token) echo &#34;{ \&#34;filename\&#34;:\&#34;complex.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200612/" class="link black dim">
        waPC &amp; Protobufs
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m hacking around with a solution that combines WASM and Google Trillian.
Ultimately, I&rsquo;d like to be able to ship WASM (binaries) to a Trillian personality and then invoke (exported) functions on them. Some this was borne from the interesting exploration of Krustlet and its application of wascc.
I&rsquo;m still booting into WASM but it&rsquo;s a very interesting technology that has most interesting potential outside the browser. Some folks have been trailblazing the technology and I have been reading Kevin Hoffman&rsquo;s medium and wascc (nee waxosuit) work.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200429/" class="link black dim">
        Rust implementation of Crate Transparency using Google Trillian
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve been hacking on a Rust-based transparent application for Google Trillian. As appears to be my fixation, this personality is for another package manager. This time, Rust&rsquo;s Crates often found in crates.io which is Rust&rsquo;s Package Registry. I discussed this project earlier this month Rust Crate Transparency &amp;&amp; Rust SDK for Google Trillian and and earlier approach for Python&rsquo;s packages with pypi-transparency.
This time, of course, I&rsquo;m using Rust. And, by way of a first for me, for the gRPC server implementation (aka &ldquo;personality&rdquo;).
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200325/" class="link black dim">
        gRPC, Cloud Run &amp; Endpoints
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      &lt;3 Google but there&rsquo;s quite often an assumption that we&rsquo;re all sitting around the engineering table and, of course, we&rsquo;re not.
Cloud Endpoints is a powerful offering but &ndash; IMO &ndash; it&rsquo;s super confusing to understand and complex to deploy.
If you&rsquo;re familiar with the motivations behind service meshes (e.g. Istio), Cloud Endpoints fits in a similar niche (&ldquo;neesh&rdquo; or &ldquo;nitch&rdquo;?). The underlying ambition is that, developers can take existing code and by adding a proxy (or sidecar), general-purpose abstractions, security, logging etc.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200320/" class="link black dim">
        Golang gRPC Cloud Run
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Update: 2020-03-24: Since writing this post, I&rsquo;ve contributed Golang and Rust samples to Google&rsquo;s project. I recommend you start there.
Google explained how to run gRPC servers with Cloud Run. The examples are good but only Python and Node.JS:
gRPC comes to Cloud Run gRPC in Google Cloud Run Missing Golang&hellip;. until now ;-)
I had problems with 1.14 and so I&rsquo;m using 1.13.
Project structure I&rsquo;ll tidy up my repo but the code may be found:
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200310/" class="link black dim">
        Google&#39;s New Golang SDK for Protobufs
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Google has released a new Golang SDK for protobuf. In the [announcement], a useful tool to redact properties is described. If like me, this is somewhat novel to you, here&rsquo;s a mashup using Google&rsquo;s Protocol Buffer Basics w/ redaction.
To be very clear, as it&rsquo;s an important distinction:
Version Repo Docs v2 google.golang.org/protobuf Docs v1 github.com/golang/protobuf Docs Project Here&rsquo;s my project structure:
. ├── protoc-3.11.4-linux-x86_64 │ ├── bin │ │ └── protoc │ ├── include │ │ └── google │ └── readme.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/bash/" class="link blue hover-black">
            Tag: bash
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/230310/" class="link black dim">
        Kubernetes Operators
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Ackal uses a Kubernetes Operator to orchestrate the lifecycle of its health checks. Ackal&rsquo;s Operator is written in Go using kubebuilder.
Yesterday, my interest was piqued by a MetalBear blog post Writing a Kubernetes Operator [in Rust]. I spent some time reimplementing one of Ackal&rsquo;s CRDs (Check) using kube-rs and not only refreshed my Rust knowledge but learned a bunch more about Kubernetes and Operators.
While rummaging around the Kubernetes documentation, I discovered flant&rsquo;s Shell-operator and spent some time today exploring its potential.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210902/" class="link black dim">
        Infrastructure as Code
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Problem I&rsquo;m building an application that comprises:
Kubernetes¹ Kubernetes Operator Cloud Firestore Cloud Functions Cloud Run Cloud Endpoints Stripe Firebase Authentication ¹ - I&rsquo;m using Google Kubernetes Engine (GKE) but may include other managed Kubernetes offerings (e.g. Digital Ocean, Linode, Oracle). GKE clusters are manageable by gcloud but other platforms require other CLI tools. All are accessible from bash but are these supported by e.g. Terraform (see below)?
Many of the components are packaged as container images and, because I&rsquo;m using GitHub to host the project&rsquo;s repos (I&rsquo;ll leave the monorepo discussion for another post), I&rsquo;ve become inculcated and use GitHub Container Registry (GHCR) as the container repo.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/operators/" class="link blue hover-black">
            Tag: Operators
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/230310/" class="link black dim">
        Kubernetes Operators
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Ackal uses a Kubernetes Operator to orchestrate the lifecycle of its health checks. Ackal&rsquo;s Operator is written in Go using kubebuilder.
Yesterday, my interest was piqued by a MetalBear blog post Writing a Kubernetes Operator [in Rust]. I spent some time reimplementing one of Ackal&rsquo;s CRDs (Check) using kube-rs and not only refreshed my Rust knowledge but learned a bunch more about Kubernetes and Operators.
While rummaging around the Kubernetes documentation, I discovered flant&rsquo;s Shell-operator and spent some time today exploring its potential.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/rust/" class="link blue hover-black">
            Tag: Rust
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/230310/" class="link black dim">
        Kubernetes Operators
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Ackal uses a Kubernetes Operator to orchestrate the lifecycle of its health checks. Ackal&rsquo;s Operator is written in Go using kubebuilder.
Yesterday, my interest was piqued by a MetalBear blog post Writing a Kubernetes Operator [in Rust]. I spent some time reimplementing one of Ackal&rsquo;s CRDs (Check) using kube-rs and not only refreshed my Rust knowledge but learned a bunch more about Kubernetes and Operators.
While rummaging around the Kubernetes documentation, I discovered flant&rsquo;s Shell-operator and spent some time today exploring its potential.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/201202/" class="link black dim">
        pest: parsing in Rust
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      A Microsoft engineer introduced me to pest as a way to introduce service filtering in a ZeroConf plugin that I&rsquo;m prototyping for Akri. It&rsquo;s been fun to learn but I worry that, because I won&rsquo;t use it frequently, I&rsquo;m going to quickly forget what I&rsquo;ve done. So, here are my notes.
Here&rsquo;s the problem, I&rsquo;d like to be able to provide users of the ZeroConf plugin with a string-based filter that permits them to filter the services discovered when the Akri agent browses a network.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/201113/" class="link black dim">
        Akri
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      For the past couple of weeks, I&rsquo;ve been playing around with Akri, a Microsoft (DeisLabs) project for building a connected edge with Kubernetes. Kubernetes, IoT, Rust (and Golang) make this all compelling to me.
Initially, I deployed an Akri End-to-End to MicroK8s on Google Compute Engine (link) and Digital Ocean (link). But I was interested to create me own example and so have proposed a very (!) simple HTTP-based protocol.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/201008/" class="link black dim">
        Deploying a Rust HTTP server to DigitalOcean App Platform
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      DigitalOcean launched an App Platform with many Supported Languages and Frameworks. I used Golang first, then wondered how to use non-natively-supported languages, i.e. Rust.
The good news is that Docker is a supported framework and so, you can run pretty much anything.
Repo: https://github.com/DazWilkin/do-apps-rust
Rust I&rsquo;m a Rust noob. I&rsquo;m always receptive to feedback on improvements to the code. I looked to mirror the Golang example. I&rsquo;m using rocket and rocket-prometheus for the first time:
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200819/" class="link black dim">
        Minimizing WASM binaries
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve spent time recently playing around with WebAssembly (WASM) and waPC. Rust and WASM were born at Mozilla and there&rsquo;s a natural affinity with writing WASM binaries in Rust. In the WASM examples I&rsquo;ve been using for WASM Transparency, waPC and MsgPack and waPC and Protobufs.
I&rsquo;ve created 3 WASM binaries: complex.wasm, simplex.wasm and fabcar.wasm and each is about 2.5MB when:
cargo build --target=wasm32-unknown-unknown --release The Rust and WebAssembly book has an excellent section titled Shrinking .
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200817/" class="link black dim">
        WASM Transparency
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve been playing around with a proof-of-concept combining WASM and Trillian. The hypothesis was to explore using WASM as a form of chaincode with Trillian. The project works but it&rsquo;s far from being a chaincode-like solution.
Let&rsquo;s start with a couple of (trivial) examples and then I&rsquo;ll explain what&rsquo;s going on and how it&rsquo;s implemented.
2020/08/14 18:42:17 [main:loop:dynamic-invoke] Method: mul 2020/08/14 18:42:17 [random:New] Message 2020/08/14 18:42:17 [random:New] Float32 2020/08/14 18:42:17 [random:New] Float32 2020/08/14 18:42:17 [random:New] Message 2020/08/14 18:42:17 [random:New] Float32 2020/08/14 18:42:17 [random:New] Float32 2020/08/14 18:42:17 [Client:Invoke] Metadata: complex.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200807/" class="link black dim">
        waPC and MsgPack (Rust|Golang)
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      As my reader will know (Hey Mom!), I&rsquo;ve been noodling around with WASM and waPC. I&rsquo;ve been exploring ways to pass structured messages across the host:guest boundary.
Protobufs was my first choice. @KevinHoffman created waPC and waSCC and he explained to me and that wSCC uses Message Pack.
It&rsquo;s slightly surprising to me (still) that technologies like this exist with everyone else seemingly using them and I&rsquo;ve not heard of them.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200723/" class="link black dim">
        Envoy WASM filters in Rust
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      A digression thanks to Sal Rashid who&rsquo;s exploring WASM filters w/ Envoy.
The documentation is sparse but:
How to write WASM filters for Envoy&hellip; There is a Rust SDK but it&rsquo;s not documented:
proxy-wasm-rust-sdk I found two useful posts by Rustaceans who were able to make use of it:
Extending Envoy with WASM and Rust Extending Istio with Rust and WebAssembly Here&rsquo;s my simple use of the SDK&rsquo;s examples.
wasme curl -sL https://run.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200429/" class="link black dim">
        Rust implementation of Crate Transparency using Google Trillian
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve been hacking on a Rust-based transparent application for Google Trillian. As appears to be my fixation, this personality is for another package manager. This time, Rust&rsquo;s Crates often found in crates.io which is Rust&rsquo;s Package Registry. I discussed this project earlier this month Rust Crate Transparency &amp;&amp; Rust SDK for Google Trillian and and earlier approach for Python&rsquo;s packages with pypi-transparency.
This time, of course, I&rsquo;m using Rust. And, by way of a first for me, for the gRPC server implementation (aka &ldquo;personality&rdquo;).
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200403/" class="link black dim">
        Rust Crate Transparency &amp;&amp; Rust SDK for Google Trillian
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m noodling the utility of a Transparency solution for Rust Crates. When developers push crates to Cargo, a bunch of metadata is associated with the crate. E.g. protobuf. As with Golang Modules, Python packages on PyPi etc., there appears to be utility in making tamperproof recordings of these publications. Then, other developers may confirm that a crate pulled from cates.io is highly unlikely to have been changed.
On Linux, Cargo stores downloaded crates under ${HOME}/.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200325/" class="link black dim">
        gRPC, Cloud Run &amp; Endpoints
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      &lt;3 Google but there&rsquo;s quite often an assumption that we&rsquo;re all sitting around the engineering table and, of course, we&rsquo;re not.
Cloud Endpoints is a powerful offering but &ndash; IMO &ndash; it&rsquo;s super confusing to understand and complex to deploy.
If you&rsquo;re familiar with the motivations behind service meshes (e.g. Istio), Cloud Endpoints fits in a similar niche (&ldquo;neesh&rdquo; or &ldquo;nitch&rdquo;?). The underlying ambition is that, developers can take existing code and by adding a proxy (or sidecar), general-purpose abstractions, security, logging etc.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200312/" class="link black dim">
        OriginStamp Rust SDK Example
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I wrote recently describing Python and Golang clients for OriginStamp based on OriginStamp&rsquo;s API&rsquo;s swagger spec. As a way to pursue learning rust, I&rsquo;ve been forcing myself to write examples using rust. I&rsquo;m honestly finding learning rust tough going and think I&rsquo;m probably better to revert to the &ldquo;Learning Rust&rdquo; tutorials.
That said, herewith an explanation of building a rust client using an OpenAPI (!) generated SDK from OriginStamp&rsquo;s swagger spec.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/190930/" class="link black dim">
        PyPi Transparency Client (Rust)
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve finally being able to hack my way through to a working Rust gRPC client (for PyPi Transparency).
It&rsquo;s not very good: poorly structured, hacky etc. but it serves the purpose of giving me a foothold into Rust development so that I can evolve it as I learn the language and its practices.
There are several Rust crates (SDK) for gRPC. There&rsquo;s no sanctioned SDK for Rust on grpc.io.
I chose stepancheg&rsquo;s grpc-rust because it&rsquo;s a pure Rust implementation (not built atop the C implementation).
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/linode/" class="link blue hover-black">
            Tag: Linode
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/230215/" class="link black dim">
        Secure (TLS) gRPC services with LKE
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      NOTE cert-manager is a better solution to what follows.
I wrote about deploying Secure (TLS) gRPC services with Vultr Kubernetes Engine (VKE). This week, I&rsquo;ve reproduced this deployment using Linode Kubernetes Engine (LKE).
Thanks to the consistency provided by Kubernetes, the Kubernetes programming is almost identical. The main differences are between the CLI&rsquo;s provided by these platforms. Both are good. They&rsquo;re just different.
I&rsquo;m going to include the linode-cli commands I&rsquo;m using in this post as I found it slightly more quirky.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/191219/" class="link black dim">
        Prometheus AlertManager
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Yesterday I discussed a Linode Prometheus Exporter and tantalized use of Prometheus AlertManager.
Success:
Configure The process is straightforward although I found the Prometheus (config) documentation slightly unwieldy to navigate :-(
The overall process is documented.
Here are the steps I took:
Configure Prometheus Configure AlertManager Revise Docker Compose Configure Prometheus Added the following to prometheus.yml:
rule_files: - &#34;/etc/alertmanager/rules/linode.yml&#34; alerting: alertmanagers: - scheme: http static_configs: - targets: - &#34;alertmanager:9093&#34; Rules must be defined in separate rules files.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/191218/" class="link black dim">
        Linode Prometheus Exporter
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I enjoy using Prometheus and have toyed around with it for some time particularly in combination with Kubernetes. I signed up with Linode [referral] compelled by the addition of a managed Kubernetes service called Linode Kubernetes Engine (LKE). I have an anxiety that I&rsquo;ll inadvertently leave resources running (unused) on a cloud platform. Instead of refreshing the relevant billing page, it struck me that Prometheus may (not yet proven) help.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/lke/" class="link blue hover-black">
            Tag: lke
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/230215/" class="link black dim">
        Secure (TLS) gRPC services with LKE
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      NOTE cert-manager is a better solution to what follows.
I wrote about deploying Secure (TLS) gRPC services with Vultr Kubernetes Engine (VKE). This week, I&rsquo;ve reproduced this deployment using Linode Kubernetes Engine (LKE).
Thanks to the consistency provided by Kubernetes, the Kubernetes programming is almost identical. The main differences are between the CLI&rsquo;s provided by these platforms. Both are good. They&rsquo;re just different.
I&rsquo;m going to include the linode-cli commands I&rsquo;m using in this post as I found it slightly more quirky.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/ssl/" class="link blue hover-black">
            Tag: ssl
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/230215/" class="link black dim">
        Secure (TLS) gRPC services with LKE
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      NOTE cert-manager is a better solution to what follows.
I wrote about deploying Secure (TLS) gRPC services with Vultr Kubernetes Engine (VKE). This week, I&rsquo;ve reproduced this deployment using Linode Kubernetes Engine (LKE).
Thanks to the consistency provided by Kubernetes, the Kubernetes programming is almost identical. The main differences are between the CLI&rsquo;s provided by these platforms. Both are good. They&rsquo;re just different.
I&rsquo;m going to include the linode-cli commands I&rsquo;m using in this post as I found it slightly more quirky.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220603/" class="link black dim">
        Secure (TLS) gRPC services with VKE
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      NOTE cert-manager is a better solution to what follows.
I&rsquo;ve a need to deploy a Vultr Kubernetes Engine (VKE) cluster on a daily basis (create and delete within a few hours) and expose (securely|TLS) a gRPC service.
I have an existing solution Automatic Certs w/ Golang gRPC service on Compute Engine that combines a gRPC Healthchecking and an ACME service and decided to reuse this.
In order for it work, we need:
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/tls/" class="link blue hover-black">
            Tag: tls
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/230215/" class="link black dim">
        Secure (TLS) gRPC services with LKE
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      NOTE cert-manager is a better solution to what follows.
I wrote about deploying Secure (TLS) gRPC services with Vultr Kubernetes Engine (VKE). This week, I&rsquo;ve reproduced this deployment using Linode Kubernetes Engine (LKE).
Thanks to the consistency provided by Kubernetes, the Kubernetes programming is almost identical. The main differences are between the CLI&rsquo;s provided by these platforms. Both are good. They&rsquo;re just different.
I&rsquo;m going to include the linode-cli commands I&rsquo;m using in this post as I found it slightly more quirky.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220603/" class="link black dim">
        Secure (TLS) gRPC services with VKE
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      NOTE cert-manager is a better solution to what follows.
I&rsquo;ve a need to deploy a Vultr Kubernetes Engine (VKE) cluster on a daily basis (create and delete within a few hours) and expose (securely|TLS) a gRPC service.
I have an existing solution Automatic Certs w/ Golang gRPC service on Compute Engine that combines a gRPC Healthchecking and an ACME service and decided to reuse this.
In order for it work, we need:
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/gcp/" class="link blue hover-black">
            Tag: GCP
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/230104/" class="link black dim">
        Authenticate PromLens to Google Managed Prometheus
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m using Google Managed Service for Prometheus (GMP) and liking it.
Sometime ago, I tried using PromLens with GMP but GMP&rsquo;s Prometheus HTTP API endpoint requires auth and I&rsquo;ve battled Prometheus&rsquo; somewhat limited auth mechanism before (Scraping metrics exposed by Google Cloud Run services that require authentication).
Listening to PromCon EU 2022 videos, I learned that PromLens has been open sourced and contributed to the Prometheus project. Eventually, the functionality of PromLens should be combined into the Prometheus UI.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220520/" class="link black dim">
        Prometheus Exporters for fly.io and Vultr
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve been on a roll building utilities this week. I developed a Service Health dashboard for my &ldquo;thing&rdquo;, a Prometheus Exporter for Fly.io and today, a Prometheus Exporter for Vultr. This is motivated by the fear that I will forget a deployed Cloud resource and incur a horrible bill.
I&rsquo;ve no written several Prometheus Exporters for cloud platforms:
Prometheus Exporter for GCP Prometheus Exporter for Linode Prometheus Exporter for Fly.io Prometheus Exporter for Vultr Each of them monitors resource deployments and produces resource count metrics that can be scraped by Prometheus and alerted with Alertmanager.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220514/" class="link black dim">
        Using Google Monitoring Alerting to send Pushover notifications
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Table of Contents Artifacts Pushover Caveat Cloud Monitoring Webhook Cloud Functions Cloud Run Artifacts GitHub: go-gcp-pushover-notificationchannel Image: ghcr.io/dazwilkin/go-gcp-pushover-notificationchannel:220515 Pushover Logging in to your Pushover account, you will be presented with a summary|dashboard page that includes Your User Key. Copy the value of this key into a variable called PUSHOVER_USER
Create New Application|API Token
Pushover API has a Pushing Messages method. The documentation describes the format of the HTTP Request. It must be a POST using TLS (https://) to https://api.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220506/" class="link black dim">
        Cloud Run custom domain mappings
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I have several Cloud Run services that I want to map to a domain.
During development, I create a Google Cloud Platform (GCP) project each day into which everything is deployed. This means that, every day, the Cloud Run services have newly non-inferable (to me) URLs. I thought this would be tedious to manage because:
My DNS service isn&rsquo;t programmable (I know!) Cloud Run services have non-inferable (by me) URLs i.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220503/" class="link black dim">
        Automating Scheduled Firestore Exports
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      For my &ldquo;thing&rdquo;, I use Firestore to persist state. I like Firestore a lot and, having been around Google for almost (!) a decade, I much prefer it to Datastore.
Firestore has a managed export|import service and I use this to backup Firestore collections|documents.
I&rsquo;d been doing backups manually (using gcloud) and decided today to take the plunge and use Cloud Scheduler for the first time. I&rsquo;d been reluctant to do this until now because I&rsquo;d assumed incorrectly that I&rsquo;d need to write a wrapping service to invoke the export.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220421/" class="link black dim">
        Using Google&#39;s Public Certificate Authority with Golang autocert
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Last year, I wrote about using Automatic Certs w/ Golang gRPC service on Compute Engine. That solution uses ACME with (the wonderful) Let&rsquo;s Encrypt. Google is offering a private preview of Automate Public Certificates Lifecycle Management via RFC 8555 (ACME) and, because I&rsquo;m using Google Cloud Platform extensively to build a &ldquo;thing&rdquo; and I think it would be useful to have a backup to Let&rsquo;s Encrypt, I thought I&rsquo;d give the solution a try.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210902/" class="link black dim">
        Infrastructure as Code
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Problem I&rsquo;m building an application that comprises:
Kubernetes¹ Kubernetes Operator Cloud Firestore Cloud Functions Cloud Run Cloud Endpoints Stripe Firebase Authentication ¹ - I&rsquo;m using Google Kubernetes Engine (GKE) but may include other managed Kubernetes offerings (e.g. Digital Ocean, Linode, Oracle). GKE clusters are manageable by gcloud but other platforms require other CLI tools. All are accessible from bash but are these supported by e.g. Terraform (see below)?
Many of the components are packaged as container images and, because I&rsquo;m using GitHub to host the project&rsquo;s repos (I&rsquo;ll leave the monorepo discussion for another post), I&rsquo;ve become inculcated and use GitHub Container Registry (GHCR) as the container repo.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210413/" class="link black dim">
        Cloud Firestore Triggers in Golang
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I was pleased to discover that Google provides a non-Node.JS mechanism to subscribe to and act upon Firestore triggers, Google Cloud Firestore Triggers. I&rsquo;ve nothing against Node.JS but, for the project i&rsquo;m developing, everything else is written in Golang. It&rsquo;s good to keep it all in one language.
I&rsquo;m perplexed that Cloud Functions still (!) only supports Go 1.13 (03-Sep-2019). Even Go 1.14 (25-Feb-2020) was released pre-pandemic and we&rsquo;re now running on 1.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200617/" class="link black dim">
        WASM Cloud Functions
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Following on from waPC &amp; Protobufs and a question on Stack Overflow about Cloud Functions, I was compelled to try running WASM on Cloud Functions no JavaScript.
I wanted to reuse the WASM waPC functions that I&rsquo;d written in Rust as described in the other post. Cloud Functions does not (yet!?) provide a Rust runtime and so I&rsquo;m using the waPC Host for Go in this example.
It works!
PARAMS=$(printf &#39;{&#34;a&#34;:{&#34;real&#34;:39,&#34;imag&#34;:3},&#34;b&#34;:{&#34;real&#34;:39,&#34;imag&#34;:3}}&#39; | base64) TOKEN=$(gcloud auth print-identity-token) echo &#34;{ \&#34;filename\&#34;:\&#34;complex.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200122/" class="link black dim">
        Setting up a GCE Instance as an Inlets Exit Node
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      The prolific Alex Ellis has a new project, Inlets.
Here&rsquo;s a quick tutorial using Google Compute Platform&rsquo;s (GCP) Compute Engine (GCE).
NB I&rsquo;m using one of Google&rsquo;s &ldquo;Always free&rdquo; f1-micro instances but you may still pay for network *gress and storage
Assumptions I&rsquo;m assuming you&rsquo;ve a Google account, have used GCP and have a billing account established, i.e. the following returns at least one billing account:
gcloud beta billing accounts list If you&rsquo;ve only one billing account and it&rsquo;s the one you wish to use, then you can:
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/191220/" class="link black dim">
        Google Cloud Platform (GCP) Exporter
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Earlier this week I discussed a Linode Prometheus Exporter.
I added metrics for Digital Ocean&rsquo;s Managed Kubernetes service to @metalmatze&rsquo;s Digital Ocean Exporter.
This left, metrics for Google Cloud Platform (GCP) which has, for many years, been my primary cloud platform. So, today I wrote Prometheus Exporter for Google Cloud Platform.
All 3 of these exporters follow the template laid down by @metalmatze and, because each of these services has a well-written Golang SDK, it&rsquo;s straightforward to implement an exporter for each of them.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/promlens/" class="link blue hover-black">
            Tag: PromLens
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/230104/" class="link black dim">
        Authenticate PromLens to Google Managed Prometheus
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m using Google Managed Service for Prometheus (GMP) and liking it.
Sometime ago, I tried using PromLens with GMP but GMP&rsquo;s Prometheus HTTP API endpoint requires auth and I&rsquo;ve battled Prometheus&rsquo; somewhat limited auth mechanism before (Scraping metrics exposed by Google Cloud Run services that require authentication).
Listening to PromCon EU 2022 videos, I learned that PromLens has been open sourced and contributed to the Prometheus project. Eventually, the functionality of PromLens should be combined into the Prometheus UI.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/container/" class="link blue hover-black">
            Tag: container
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/221128/" class="link black dim">
        Maintaining Container Images
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      As I contemplate moving my &ldquo;thing&rdquo; into production, I&rsquo;m anticipating aspects of the application that need maintenance and how this can be automated.
I&rsquo;d been negligent in the maintenance of some of my container images.
I&rsquo;m using mostly Go and some Rust as the basis of static(ally-compiled) binaries that run in these containers but not every container has a base image of scratch. scratch is the only base image that doesn&rsquo;t change and thus the only base image that doesn&rsquo;t require that container images buit FROM it, be maintained.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220422/" class="link black dim">
        Playing with GitHub Container Registry REST API
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve a day to catch up on blogging. I&rsquo;m building a &ldquo;thing&rdquo; and getting this near to the finish line consumes my time and has meant that I&rsquo;m not originating anything particularly new. However, there are a couple of tricks in my deployment process that may be of interest to others.
I&rsquo;ve been a long-term using of Google&rsquo;s [Cloud Build] and like the simplicity (everything&rsquo;s a container, alot!). Because I&rsquo;m using GitHub repos, I&rsquo;ve been using GitHub Actions to (re)build containers on pushes and GitHub Container registry (GHCR) to store the results.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220421/" class="link black dim">
        Using Google&#39;s Public Certificate Authority with Golang autocert
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Last year, I wrote about using Automatic Certs w/ Golang gRPC service on Compute Engine. That solution uses ACME with (the wonderful) Let&rsquo;s Encrypt. Google is offering a private preview of Automate Public Certificates Lifecycle Management via RFC 8555 (ACME) and, because I&rsquo;m using Google Cloud Platform extensively to build a &ldquo;thing&rdquo; and I think it would be useful to have a backup to Let&rsquo;s Encrypt, I thought I&rsquo;d give the solution a try.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/211130/" class="link black dim">
        Automatic Certs w/ Golang gRPC service on Compute Engine
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I needed to deploy a healthcheck-enabled gRPC TLS-enabled service. Fortunately, most (all?) of the SDKs include an implementation, e.g. Golang has grpc-go/health.
I learned in my travels that:
DigitalOcean [App] platform does not (link) work with TLS-based gRPC apps. Fly has a regression (link) that breaks gRPC So, I resorted to Google Cloud Platform (GCP). Although Cloud Run would be well-suited to running the gRPC app, it uses a proxy|sidecar to provision a cert for the app and I wanted to be able to (easily use a custom domain) and give myself a somewhat general-purpose solution.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/docker/" class="link blue hover-black">
            Tag: docker
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/221128/" class="link black dim">
        Maintaining Container Images
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      As I contemplate moving my &ldquo;thing&rdquo; into production, I&rsquo;m anticipating aspects of the application that need maintenance and how this can be automated.
I&rsquo;d been negligent in the maintenance of some of my container images.
I&rsquo;m using mostly Go and some Rust as the basis of static(ally-compiled) binaries that run in these containers but not every container has a base image of scratch. scratch is the only base image that doesn&rsquo;t change and thus the only base image that doesn&rsquo;t require that container images buit FROM it, be maintained.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/190925/" class="link black dim">
        Run cAdvisor when using Docker Compose
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      cAdvisor has long been a favorite monitoring tool of mine. I&rsquo;m using Docker Compose for local testing and have begun including a cAdvisor in my docker-compose.yaml files.
cadvisor: restart: always image: google/cadvisor:${CADVISOR_VERSION} container_name: cadvisor # command: # - --prometheus_endpoint=&#34;/metrics&#34; # Default volumes: - &#34;/:/rootfs:ro&#34; - &#34;/var/run:/var/run:rw&#34; - &#34;/sys:/sys:ro&#34; - &#34;/var/snap/docker/current:/var/lib/docker:ro&#34; #- &#34;/var/lib/docker/:/var/lib/docker:ro&#34; expose: - &#34;8080&#34; ports: - 8080:8080 I&rsquo;d not realized until recently, that cAdvisor also surfaces a Prometheus metrics endpoint and so, if you do follow this path and you&rsquo;re also using Prometheus, don&rsquo;t forget to add cAdvisor to your Prometheus targets.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/podman/" class="link blue hover-black">
            Tag: podman
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/221128/" class="link black dim">
        Maintaining Container Images
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      As I contemplate moving my &ldquo;thing&rdquo; into production, I&rsquo;m anticipating aspects of the application that need maintenance and how this can be automated.
I&rsquo;d been negligent in the maintenance of some of my container images.
I&rsquo;m using mostly Go and some Rust as the basis of static(ally-compiled) binaries that run in these containers but not every container has a base image of scratch. scratch is the only base image that doesn&rsquo;t change and thus the only base image that doesn&rsquo;t require that container images buit FROM it, be maintained.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/211006/" class="link black dim">
        Podman
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve read about Podman and been intrigued by it but never taken the time to install it and play around. This morning, walking with my dog, I listened to the almost-always-interesting Kubernetes Podcast and two of the principals behind Podman were on the show to discuss it.
I decided to install it and use it in this week&rsquo;s project.
Here&rsquo;s a working Podman deployment for gcp-oidc-token-proxy
ACCOUNT=&#34;...&#34; ENDPOINT=&#34;...&#34; # Can&#39;t match container name i.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/domain-wide-delegation/" class="link blue hover-black">
            Tag: Domain-wide Delegation
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/221117/" class="link black dim">
        Delegate domain-wide authority using Golang
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;d not used Google&rsquo;s Domain-wide Delegation from Golang and struggled to find example code.
Google provides Java and Python samples.
Google has a myriad packages implementing its OAuth security and it&rsquo;s always daunting trying to determine which one to use.
As it happens, I backed into the solution through client.Options
ctx := context.Background() // Google Workspace APIS don&#39;t use IAM do use OAuth scopes // Scopes used here must be reflected in the scopes on the // Google Workspace Domain-wide Delegate client scopes := []string{ .
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/google-workspace/" class="link blue hover-black">
            Tag: Google Workspace
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/221117/" class="link black dim">
        Delegate domain-wide authority using Golang
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;d not used Google&rsquo;s Domain-wide Delegation from Golang and struggled to find example code.
Google provides Java and Python samples.
Google has a myriad packages implementing its OAuth security and it&rsquo;s always daunting trying to determine which one to use.
As it happens, I backed into the solution through client.Options
ctx := context.Background() // Google Workspace APIS don&#39;t use IAM do use OAuth scopes // Scopes used here must be reflected in the scopes on the // Google Workspace Domain-wide Delegate client scopes := []string{ .
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/curl/" class="link blue hover-black">
            Tag: curl
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/221114/" class="link black dim">
        `curl`&#39;ing a Tailscale Webhook
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      [Tailscale] is really good. I&rsquo;ve been using it as a virtual private network to span 2 home networks and to securely (!) access my hosts when I&rsquo;m remote.
Recently Tailscale added Webhook functionality to permit processing subscribed-to (Tailscale) events. I&rsquo;m always a sucker for a webhook ;-)
Here&rsquo;s a curl command to send a test event to a Tailscale Webhook:
URL=&#34;&#34; # From Tailscale&#39;s docs # https://tailscale.com/kb/1213/webhooks/#events-payload BODY=&#39; [ { &#34;timestamp&#34;: &#34;2022-09-21T13:37:51.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220422/" class="link black dim">
        Playing with GitHub Container Registry REST API
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve a day to catch up on blogging. I&rsquo;m building a &ldquo;thing&rdquo; and getting this near to the finish line consumes my time and has meant that I&rsquo;m not originating anything particularly new. However, there are a couple of tricks in my deployment process that may be of interest to others.
I&rsquo;ve been a long-term using of Google&rsquo;s [Cloud Build] and like the simplicity (everything&rsquo;s a container, alot!). Because I&rsquo;m using GitHub repos, I&rsquo;ve been using GitHub Actions to (re)build containers on pushes and GitHub Container registry (GHCR) to store the results.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/tailscale/" class="link blue hover-black">
            Tag: tailscale
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/221114/" class="link black dim">
        `curl`&#39;ing a Tailscale Webhook
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      [Tailscale] is really good. I&rsquo;ve been using it as a virtual private network to span 2 home networks and to securely (!) access my hosts when I&rsquo;m remote.
Recently Tailscale added Webhook functionality to permit processing subscribed-to (Tailscale) events. I&rsquo;m always a sucker for a webhook ;-)
Here&rsquo;s a curl command to send a test event to a Tailscale Webhook:
URL=&#34;&#34; # From Tailscale&#39;s docs # https://tailscale.com/kb/1213/webhooks/#events-payload BODY=&#39; [ { &#34;timestamp&#34;: &#34;2022-09-21T13:37:51.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/webhook/" class="link blue hover-black">
            Tag: webhook
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/221114/" class="link black dim">
        `curl`&#39;ing a Tailscale Webhook
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      [Tailscale] is really good. I&rsquo;ve been using it as a virtual private network to span 2 home networks and to securely (!) access my hosts when I&rsquo;m remote.
Recently Tailscale added Webhook functionality to permit processing subscribed-to (Tailscale) events. I&rsquo;m always a sucker for a webhook ;-)
Here&rsquo;s a curl command to send a test event to a Tailscale Webhook:
URL=&#34;&#34; # From Tailscale&#39;s docs # https://tailscale.com/kb/1213/webhooks/#events-payload BODY=&#39; [ { &#34;timestamp&#34;: &#34;2022-09-21T13:37:51.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220514/" class="link black dim">
        Using Google Monitoring Alerting to send Pushover notifications
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Table of Contents Artifacts Pushover Caveat Cloud Monitoring Webhook Cloud Functions Cloud Run Artifacts GitHub: go-gcp-pushover-notificationchannel Image: ghcr.io/dazwilkin/go-gcp-pushover-notificationchannel:220515 Pushover Logging in to your Pushover account, you will be presented with a summary|dashboard page that includes Your User Key. Copy the value of this key into a variable called PUSHOVER_USER
Create New Application|API Token
Pushover API has a Pushing Messages method. The documentation describes the format of the HTTP Request. It must be a POST using TLS (https://) to https://api.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210108/" class="link black dim">
        Kubernetes cert-manager
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I developed an admission webhook for Akri, twice (Golang, Rust). I naively followed other examples for the generation of the certificates, created a 1.20 cluster and broke that process.
I&rsquo;d briefly considered using cert-manager recently but quickly abandoned the idea thinking it would be onerous and unnecessary complexity for little-old-me. I was wrong. It&rsquo;s excellent and I recommend it highly.
I won&rsquo;t reproduce the v1beta1 and v1 examples from the Stackoverflow question as they should be self-explanatory.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/201229/" class="link black dim">
        Kubernetes Webhooks
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I spent some time last week writing my first admission webhook for Kubernetes. I wrote the handler in Golang because I&rsquo;m most familiar with Golang and because, as Kubernetes&rsquo; native language, I was more confident that the necessary SDKs would exist and that the documentation would likely use Golang by default. I struggled to find useful documentation and so this post is to help you (and me!) remember how to do this next time!
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/firestore/" class="link blue hover-black">
            Tag: firestore
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/221111/" class="link black dim">
        The curious cases of the `deleted:serviceaccount`
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      While testing Firestore export and import yesterday and checking the IAM permissions on a Cloud Storage Bucket, I noticed some Member (member) values (I think Google refers to these as Principals) were logical but unfamiliar to me:
deleted:serviceAccount:{email}?uid={uid} I was using gsutil iam get gs://${BUCKET} because I&rsquo;d realized (and this is another useful lesson) that, as I&rsquo;ve been creating daily test projects, I&rsquo;ve been binding each project&rsquo;s Firestore Service Account (service-{project-number}@gcp-sa-firestore.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220503/" class="link black dim">
        Automating Scheduled Firestore Exports
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      For my &ldquo;thing&rdquo;, I use Firestore to persist state. I like Firestore a lot and, having been around Google for almost (!) a decade, I much prefer it to Datastore.
Firestore has a managed export|import service and I use this to backup Firestore collections|documents.
I&rsquo;d been doing backups manually (using gcloud) and decided today to take the plunge and use Cloud Scheduler for the first time. I&rsquo;d been reluctant to do this until now because I&rsquo;d assumed incorrectly that I&rsquo;d need to write a wrapping service to invoke the export.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210506/" class="link black dim">
        Firestore Golang Timestamps &amp; Merging
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m using Google&rsquo;s Golang SDK for Firestore. The experience is excellent and I&rsquo;m quikcly becoming a fan of Firestore. However, as a Golang Firestore developer, I&rsquo;m feeling less loved and some of the concepts in the database were causing me a conundrum.
I&rsquo;m still not entirely certain that I have Timestamps nailed but&hellip; I learned an important lesson on the auto-creation of Timestamps in documents and how to retain these values.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210413/" class="link black dim">
        Cloud Firestore Triggers in Golang
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I was pleased to discover that Google provides a non-Node.JS mechanism to subscribe to and act upon Firestore triggers, Google Cloud Firestore Triggers. I&rsquo;ve nothing against Node.JS but, for the project i&rsquo;m developing, everything else is written in Golang. It&rsquo;s good to keep it all in one language.
I&rsquo;m perplexed that Cloud Functions still (!) only supports Go 1.13 (03-Sep-2019). Even Go 1.14 (25-Feb-2020) was released pre-pandemic and we&rsquo;re now running on 1.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210317/" class="link black dim">
        Using Golang with the Firestore Emulator
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      This works great but it wasn&rsquo;t clearly documented for non-Firebase users. I assume it will work, as well, for any of the client libraries (not just Golang).
Assuming you have some (Golang) code (in this case using the Google Cloud Client Library) that interacts with a Firestore database. Something of the form:
package main import ( &#34;context&#34; &#34;crypto/sha256&#34; &#34;fmt&#34; &#34;log&#34; &#34;os&#34; &#34;time&#34; &#34;cloud.google.com/go/firestore&#34; ) func hash(s string) string { h := sha256.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/google-cloud-platform/" class="link blue hover-black">
            Tag: Google Cloud Platform
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/221111/" class="link black dim">
        The curious cases of the `deleted:serviceaccount`
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      While testing Firestore export and import yesterday and checking the IAM permissions on a Cloud Storage Bucket, I noticed some Member (member) values (I think Google refers to these as Principals) were logical but unfamiliar to me:
deleted:serviceAccount:{email}?uid={uid} I was using gsutil iam get gs://${BUCKET} because I&rsquo;d realized (and this is another useful lesson) that, as I&rsquo;ve been creating daily test projects, I&rsquo;ve been binding each project&rsquo;s Firestore Service Account (service-{project-number}@gcp-sa-firestore.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/221110/" class="link black dim">
        Firestore Export &amp; Import
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m using Firestore to maintain state in my &ldquo;thing&rdquo;.
In an attempt to ensure that I&rsquo;m able to restore the database, I run (Cloud Scheduler) scheduled backups (see Automating Scheduled Firestore Exports and I&rsquo;ve been testing imports to ensure that the process works.
It does.
I thought I&rsquo;d document an important but subtle consideration with Firestore exports (which I&rsquo;d not initially understood).
Google facilitates that backup process with the sibling commands:
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200122/" class="link black dim">
        Setting up a GCE Instance as an Inlets Exit Node
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      The prolific Alex Ellis has a new project, Inlets.
Here&rsquo;s a quick tutorial using Google Compute Platform&rsquo;s (GCP) Compute Engine (GCE).
NB I&rsquo;m using one of Google&rsquo;s &ldquo;Always free&rdquo; f1-micro instances but you may still pay for network *gress and storage
Assumptions I&rsquo;m assuming you&rsquo;ve a Google account, have used GCP and have a billing account established, i.e. the following returns at least one billing account:
gcloud beta billing accounts list If you&rsquo;ve only one billing account and it&rsquo;s the one you wish to use, then you can:
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/190924/" class="link black dim">
        Kubernetes Engine and Free Tier
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Google Cloud Platform Free Tier appears (please verify this for yourself) to provide the ability to run a(n admittedly miniscule) Kubernetes cluster for free. So, why do this? It provides a definitive Kubernetes (Engine) experience on Google Cloud Platform that you may use for learning and testing.
Kubernetes Engine the master node(s) and the control plane are free.
Kubernetes (i.e. Compute Engine) nodes potentially incur charges including for the VM runtime and any attached storage, snapshots etc.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/iam/" class="link blue hover-black">
            Tag: iam
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/221111/" class="link black dim">
        The curious cases of the `deleted:serviceaccount`
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      While testing Firestore export and import yesterday and checking the IAM permissions on a Cloud Storage Bucket, I noticed some Member (member) values (I think Google refers to these as Principals) were logical but unfamiliar to me:
deleted:serviceAccount:{email}?uid={uid} I was using gsutil iam get gs://${BUCKET} because I&rsquo;d realized (and this is another useful lesson) that, as I&rsquo;ve been creating daily test projects, I&rsquo;ve been binding each project&rsquo;s Firestore Service Account (service-{project-number}@gcp-sa-firestore.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/service-accounts/" class="link blue hover-black">
            Tag: service-accounts
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/221111/" class="link black dim">
        The curious cases of the `deleted:serviceaccount`
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      While testing Firestore export and import yesterday and checking the IAM permissions on a Cloud Storage Bucket, I noticed some Member (member) values (I think Google refers to these as Principals) were logical but unfamiliar to me:
deleted:serviceAccount:{email}?uid={uid} I was using gsutil iam get gs://${BUCKET} because I&rsquo;d realized (and this is another useful lesson) that, as I&rsquo;ve been creating daily test projects, I&rsquo;ve been binding each project&rsquo;s Firestore Service Account (service-{project-number}@gcp-sa-firestore.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/cloud-firestore/" class="link blue hover-black">
            Tag: cloud-firestore
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/221110/" class="link black dim">
        Firestore Export &amp; Import
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m using Firestore to maintain state in my &ldquo;thing&rdquo;.
In an attempt to ensure that I&rsquo;m able to restore the database, I run (Cloud Scheduler) scheduled backups (see Automating Scheduled Firestore Exports and I&rsquo;ve been testing imports to ensure that the process works.
It does.
I thought I&rsquo;d document an important but subtle consideration with Firestore exports (which I&rsquo;d not initially understood).
Google facilitates that backup process with the sibling commands:
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/github/" class="link blue hover-black">
            Tag: github
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/221106/" class="link black dim">
        Basic programmatic access to GitHub Issues
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      It&rsquo;s been a while!
I&rsquo;ve been spending time writing Bash scripts and a web site but neither has been sufficiently creative that I&rsquo;ve felt worth a blog post.
As I&rsquo;ve been finalizing the web site, I needed an Issue Tracker and decided to leverage GitHub(&rsquo;s Issues).
As a former Googler, I&rsquo;m familiar with Google&rsquo;s (excellent) internal issue tracking tool (Buganizer) and it&rsquo;s public manifestation Issue Tracker. Google documents Issue Tracker and its Issue type which I&rsquo;ve mercilessly plagiarized in my implementation.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210924/" class="link black dim">
        GitHub help with dependency management
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      This is very useful:
I am building an application that comprises multiple repos. I continue to procrastinate on whether using multiple repos vs. a monorepo was a good idea but, an issue that I have (had) is the need to ensure that the repos&rsquo; contents are using current|latest modules. GitHub can help.
Most of the application is written in Golang with a smattering of Rust and some JavaScript.
Aside Even though I&rsquo;m more proficient with Golang, I want to become more proficient in Rust and I contemplated trying to write the entire application in Rust.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/201029/" class="link black dim">
        GitHub Actions &amp;&amp; GitHub Container Registry
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      You know when you start something and then regret it!? I think I&rsquo;ll be sticking with Google Cloud Build; GitHub Actions appears functional and useful but I found the documentation to be confusing and limited and struggled to get a simple container image build|push working.
I&rsquo;ve long used Docker Hub but am planning to use it less as a result of the planned changes. I want to see Docker succeed and to do so it needs to find a way to make money but, there are free alternatives including the new GitHub Container Registry and the very very cheap Google Container Registry.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/vke/" class="link blue hover-black">
            Tag: vke
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220603/" class="link black dim">
        Secure (TLS) gRPC services with VKE
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      NOTE cert-manager is a better solution to what follows.
I&rsquo;ve a need to deploy a Vultr Kubernetes Engine (VKE) cluster on a daily basis (create and delete within a few hours) and expose (securely|TLS) a gRPC service.
I have an existing solution Automatic Certs w/ Golang gRPC service on Compute Engine that combines a gRPC Healthchecking and an ACME service and decided to reuse this.
In order for it work, we need:
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220602/" class="link black dim">
        Vultr CLI and JSON output
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve begun exploring Vultr after the company announced a managed Kubernetes offering Vultr Kubernetes Engine (VKE).
In my brief experience, it&rsquo;s a decent platform and its CLI vultr-cli is mostly (!) good. The CLI has a limitation in that command output is text formatted and this makes it challenging to parse the output when scripting.
NOTE The Vultr developers have a branch rewrite that includes a solution to this problem.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/vultr/" class="link blue hover-black">
            Tag: vultr
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220603/" class="link black dim">
        Secure (TLS) gRPC services with VKE
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      NOTE cert-manager is a better solution to what follows.
I&rsquo;ve a need to deploy a Vultr Kubernetes Engine (VKE) cluster on a daily basis (create and delete within a few hours) and expose (securely|TLS) a gRPC service.
I have an existing solution Automatic Certs w/ Golang gRPC service on Compute Engine that combines a gRPC Healthchecking and an ACME service and decided to reuse this.
In order for it work, we need:
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220602/" class="link black dim">
        Vultr CLI and JSON output
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve begun exploring Vultr after the company announced a managed Kubernetes offering Vultr Kubernetes Engine (VKE).
In my brief experience, it&rsquo;s a decent platform and its CLI vultr-cli is mostly (!) good. The CLI has a limitation in that command output is text formatted and this makes it challenging to parse the output when scripting.
NOTE The Vultr developers have a branch rewrite that includes a solution to this problem.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220520/" class="link black dim">
        Prometheus Exporters for fly.io and Vultr
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve been on a roll building utilities this week. I developed a Service Health dashboard for my &ldquo;thing&rdquo;, a Prometheus Exporter for Fly.io and today, a Prometheus Exporter for Vultr. This is motivated by the fear that I will forget a deployed Cloud resource and incur a horrible bill.
I&rsquo;ve no written several Prometheus Exporters for cloud platforms:
Prometheus Exporter for GCP Prometheus Exporter for Linode Prometheus Exporter for Fly.io Prometheus Exporter for Vultr Each of them monitors resource deployments and produces resource count metrics that can be scraped by Prometheus and alerted with Alertmanager.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/cli/" class="link blue hover-black">
            Tag: cli
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220602/" class="link black dim">
        Vultr CLI and JSON output
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve begun exploring Vultr after the company announced a managed Kubernetes offering Vultr Kubernetes Engine (VKE).
In my brief experience, it&rsquo;s a decent platform and its CLI vultr-cli is mostly (!) good. The CLI has a limitation in that command output is text formatted and this makes it challenging to parse the output when scripting.
NOTE The Vultr developers have a branch rewrite that includes a solution to this problem.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/json/" class="link blue hover-black">
            Tag: json
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220602/" class="link black dim">
        Vultr CLI and JSON output
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve begun exploring Vultr after the company announced a managed Kubernetes offering Vultr Kubernetes Engine (VKE).
In my brief experience, it&rsquo;s a decent platform and its CLI vultr-cli is mostly (!) good. The CLI has a limitation in that command output is text formatted and this makes it challenging to parse the output when scripting.
NOTE The Vultr developers have a branch rewrite that includes a solution to this problem.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/api/" class="link blue hover-black">
            Tag: api
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220524/" class="link black dim">
        Automating HackMD documents
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I was introduced to HackMD while working on an open-source project. It&rsquo;s a collaborative editing tool for Markdown documents and there&rsquo;s an API
I wanted to be able to programmatically edit one of my documents with a daily update. The API is easy-to-use and my only challenge was futzing with escape characters in bash strips representing the document Markdown content.
You&rsquo;ll need an account with HackMD and an to Create API Token that I&rsquo;ll refer to as TOKEN.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/hackmd/" class="link blue hover-black">
            Tag: hackmd
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220524/" class="link black dim">
        Automating HackMD documents
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I was introduced to HackMD while working on an open-source project. It&rsquo;s a collaborative editing tool for Markdown documents and there&rsquo;s an API
I wanted to be able to programmatically edit one of my documents with a daily update. The API is easy-to-use and my only challenge was futzing with escape characters in bash strips representing the document Markdown content.
You&rsquo;ll need an account with HackMD and an to Create API Token that I&rsquo;ll refer to as TOKEN.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/markdown/" class="link blue hover-black">
            Tag: markdown
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220524/" class="link black dim">
        Automating HackMD documents
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I was introduced to HackMD while working on an open-source project. It&rsquo;s a collaborative editing tool for Markdown documents and there&rsquo;s an API
I wanted to be able to programmatically edit one of my documents with a daily update. The API is easy-to-use and my only challenge was futzing with escape characters in bash strips representing the document Markdown content.
You&rsquo;ll need an account with HackMD and an to Create API Token that I&rsquo;ll refer to as TOKEN.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/digitalocean/" class="link blue hover-black">
            Tag: digitalocean
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220520/" class="link black dim">
        Prometheus Exporters for fly.io and Vultr
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve been on a roll building utilities this week. I developed a Service Health dashboard for my &ldquo;thing&rdquo;, a Prometheus Exporter for Fly.io and today, a Prometheus Exporter for Vultr. This is motivated by the fear that I will forget a deployed Cloud resource and incur a horrible bill.
I&rsquo;ve no written several Prometheus Exporters for cloud platforms:
Prometheus Exporter for GCP Prometheus Exporter for Linode Prometheus Exporter for Fly.io Prometheus Exporter for Vultr Each of them monitors resource deployments and produces resource count metrics that can be scraped by Prometheus and alerted with Alertmanager.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210122/" class="link black dim">
        Krustlet on DO Managed Kubernetes
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve spent time this week returning to the interesting Deislabs project Krustlet. Since the last time, the bootstrapping process has been simplified using Kubernetes Bootstrap Tokens. I know this updated process works with MicroK8s. Unfortunately, I&rsquo;m struggling with it on GKE and thought I&rsquo;d try DigitalOcean Managed Kubernetes.
It worked first time!
In the following, we run both the Kubernetes cluster and the Krustlet Droplet on DigitalOcean but, as long as the cluster and the VM are able to communicate with one another, you should be able to run these anywhere.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/201008/" class="link black dim">
        Deploying a Rust HTTP server to DigitalOcean App Platform
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      DigitalOcean launched an App Platform with many Supported Languages and Frameworks. I used Golang first, then wondered how to use non-natively-supported languages, i.e. Rust.
The good news is that Docker is a supported framework and so, you can run pretty much anything.
Repo: https://github.com/DazWilkin/do-apps-rust
Rust I&rsquo;m a Rust noob. I&rsquo;m always receptive to feedback on improvements to the code. I looked to mirror the Golang example. I&rsquo;m using rocket and rocket-prometheus for the first time:
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/exporter/" class="link blue hover-black">
            Tag: exporter
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220520/" class="link black dim">
        Prometheus Exporters for fly.io and Vultr
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve been on a roll building utilities this week. I developed a Service Health dashboard for my &ldquo;thing&rdquo;, a Prometheus Exporter for Fly.io and today, a Prometheus Exporter for Vultr. This is motivated by the fear that I will forget a deployed Cloud resource and incur a horrible bill.
I&rsquo;ve no written several Prometheus Exporters for cloud platforms:
Prometheus Exporter for GCP Prometheus Exporter for Linode Prometheus Exporter for Fly.io Prometheus Exporter for Vultr Each of them monitors resource deployments and produces resource count metrics that can be scraped by Prometheus and alerted with Alertmanager.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/fly.io/" class="link blue hover-black">
            Tag: fly.io
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220520/" class="link black dim">
        Prometheus Exporters for fly.io and Vultr
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve been on a roll building utilities this week. I developed a Service Health dashboard for my &ldquo;thing&rdquo;, a Prometheus Exporter for Fly.io and today, a Prometheus Exporter for Vultr. This is motivated by the fear that I will forget a deployed Cloud resource and incur a horrible bill.
I&rsquo;ve no written several Prometheus Exporters for cloud platforms:
Prometheus Exporter for GCP Prometheus Exporter for Linode Prometheus Exporter for Fly.io Prometheus Exporter for Vultr Each of them monitors resource deployments and produces resource count metrics that can be scraped by Prometheus and alerted with Alertmanager.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210412/" class="link black dim">
        Fly.io
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I spent some time over the weekend understanding Fly.io. It&rsquo;s always fascinating to me how many smart people are building really neat solutions. Fly.io is subtly different to other platforms that I use (Kubernetes, GCP, DO, Linode) and I&rsquo;ve found the Fly.io team to be highly responsive and helpful to my noob questions.
One of the team&rsquo;s posts, Docker without Docker surfaced in my Feedly feed (hackernews) and it piqued my interest.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/cloud-monitoring/" class="link blue hover-black">
            Tag: cloud-monitoring
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220514/" class="link black dim">
        Using Google Monitoring Alerting to send Pushover notifications
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Table of Contents Artifacts Pushover Caveat Cloud Monitoring Webhook Cloud Functions Cloud Run Artifacts GitHub: go-gcp-pushover-notificationchannel Image: ghcr.io/dazwilkin/go-gcp-pushover-notificationchannel:220515 Pushover Logging in to your Pushover account, you will be presented with a summary|dashboard page that includes Your User Key. Copy the value of this key into a variable called PUSHOVER_USER
Create New Application|API Token
Pushover API has a Pushing Messages method. The documentation describes the format of the HTTP Request. It must be a POST using TLS (https://) to https://api.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/pushover/" class="link blue hover-black">
            Tag: pushover
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220514/" class="link black dim">
        Using Google Monitoring Alerting to send Pushover notifications
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Table of Contents Artifacts Pushover Caveat Cloud Monitoring Webhook Cloud Functions Cloud Run Artifacts GitHub: go-gcp-pushover-notificationchannel Image: ghcr.io/dazwilkin/go-gcp-pushover-notificationchannel:220515 Pushover Logging in to your Pushover account, you will be presented with a summary|dashboard page that includes Your User Key. Copy the value of this key into a variable called PUSHOVER_USER
Create New Application|API Token
Pushover API has a Pushing Messages method. The documentation describes the format of the HTTP Request. It must be a POST using TLS (https://) to https://api.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/cloud-run/" class="link blue hover-black">
            Tag: Cloud Run
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220506/" class="link black dim">
        Cloud Run custom domain mappings
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I have several Cloud Run services that I want to map to a domain.
During development, I create a Google Cloud Platform (GCP) project each day into which everything is deployed. This means that, every day, the Cloud Run services have newly non-inferable (to me) URLs. I thought this would be tedious to manage because:
My DNS service isn&rsquo;t programmable (I know!) Cloud Run services have non-inferable (by me) URLs i.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220225/" class="link black dim">
        Prometheus HTTP Service Discovery of Cloud Run services
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Some time ago, I wrote about using Prometheus Service Discovery w/ Consul for Cloud Run and also Scraping metrics exposed by Google Cloud Run services that require authentication. Both solutions remain viable but they didn&rsquo;t address another use case for Prometheus and Cloud Run services that I have with a &ldquo;thing&rdquo; that I&rsquo;ve been building.
In this scenario, I want to:
Configure Prometheus to scrape Cloud Run service metrics Discover Cloud Run services dynamically Authenticate to Cloud Run using Firebase Auth ID tokens These requirements and &ndash; one other &ndash; present several challenges:
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/211026/" class="link black dim">
        Firebase Auth authorized domains
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m using Firebase Authentication in a project to authenticate users of various OAuth2 identity systems. Firebase Authentication requires a set of Authorized Domains.
The (web) app that interacts with Firebase Authentication is deployed to Cloud Run. The Authorized Domains list must include the app&rsquo;s Cloud Run service URL.
Cloud Run service URLs vary by Project (ID). They are a combination of the service name, a hash (?) of the Project (ID) and .
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/211005/" class="link black dim">
        Scraping metrics exposed by Google Cloud Run services that require authentication
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve written a solution (gcp-oidc-token-proxy) that can be used in conjunction with Prometheus OAuth2 to authenticate requests so that Prometheus can scrape metrics exposed by e.g. Cloud Run services that require authentication. The solution resulted from my question on Stack overflow.
Problem #1: Endpoint requires authentication
Given a Cloud Run service URL for which:
ENDPOINT=&#34;my-server-blahblah-wl.a.run.app&#34; # Returns 200 when authentication w/ an ID token TOKEN=&#34;$(gcloud auth print-identity-token)&#34; curl \ --silent \ --request GET \ --header &#34;Authorization: Bearer ${TOKEN}&#34; \ --write-out &#34;%{response_code}&#34; \ --output /dev/null \ https://${ENDPOINT}/metrics # Returns 403 otherwise curl \ --silent \ --request GET \ --write-out &#34;%{response_code}&#34; \ --output /dev/null \ https://${ENDPOINT}/metrics Problem #2: Prometheus OAuth2 configuration is constrained
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210907/" class="link black dim">
        `gcloud beta run services replace`
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      TL;DR I&rsquo;m working on a project that includes multiple Cloud Run services. I&rsquo;ve been putting my gcloud head on to deploy these services thinking that it&rsquo;s curious there&rsquo;s no way to write the specs as YAML configs. Today, I learned that there is: gcloud beta run services replace.
What prompted the discovery was some frustration trying to deploy a JSON-valued environment variable to Cloud Run:
local FIREBASE_CONFIG=&#34;{ apiKey: ${FIREBASE_API_KEY}, authDomain: ${FIREBASE_AUTH_DOMAIN}, projectId: ${FIREBASE_PROJECT}, storageBucket: ${FIREBASE_STORAGE_BUCKET}, messagingSenderId: ${FIREBASE_MESSAGING_SENDER}, appId: ${FIREBASE_APP}}&#34; gcloud run deploy ${SRV_NAME} \ --image=${IMAGE} \ --command=&#34;/server&#34; \ --args=&#34;--endpoint=:${PORT}&#34; \ --set-env-vars=FIREBASE_CONFIG=&#34;${FIREBASE_CONFIG}&#34; \ --max-instances=1 \ --memory=256Mi \ --ingress=all \ --platform=managed \ --port=${PORT} \ --allow-unauthenticated \ --region=${REGION} \ --project=${PROJECT} gcloud balks at this.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210608/" class="link black dim">
        Cloud Endpoints combine OpenAPI and gRPC... or not!
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      See:
Multiplexing gRPC and HTTP endpoints with Cloud Run gRPC, Cloud Run &amp; Endpoints ESPv2: Configure Cloud Endpoints to proxy traffic to a Cloud Run multiplexed (gRPC|HTTP) service Challenges:
Cloud Run permits single port Cloud Run services publishing e.g. gRPC and Prometheus, must multiplex transports Cloud Run services publishing multiplexed transports are challenging to expose using Cloud Endpoints Hypothesis #1: Multiplexed transports work with Cloud Run See: Multiplexing gRPC and HTTP endpoints with Cloud Run
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210520/" class="link black dim">
        Consul discovers Google Cloud Run
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve written a basic discoverer of Google Cloud Run services. This is for a project and it extends work done in some previous posts to Multiplex gRPC and Prometheus with Cloud Run and to use Consul for Prometheus service discovery.
This solution:
Accepts a set of Google Cloud Platform (GCP) projects Trawls them for Cloud Run services Assumes that the services expose Prometheus metrics on :443/metrics Relabels the services Surfaces any discovered Cloud Run services&rsquo; metrics in Prometheus You&rsquo;ll need Docker and Docker Compose.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210519/" class="link black dim">
        Multiplexing gRPC and HTTP (Prometheus) endpoints with Cloud Run
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Google Cloud Run is useful but, each service is limited to exposing a single port. This caused me problems with a gRPC service that serves (non-gRPC) Prometheus metrics because customarily, you would serve gRPC on one port and the Prometheus metrics on another.
Fortunately, cmux provides a solution by providing a mechanism that multiplexes both services (gRPC and HTTP) on a single port!
TL;DR See the cmux Limitations and use:
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210419/" class="link black dim">
        Prometheus Service Discovery w/ Consul for Cloud Run
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m working on a project that will programmatically create Google Cloud Run services and I want to be able to dynamically discover these services using Prometheus.
This is one solution.
NOTE Google Cloud Run is the service I&rsquo;m using, but the principle described herein applies to any runtime service that you&rsquo;d wish to use.
Why is this challenging? IIUC, it&rsquo;s primarily because Prometheus has a limited set of plugins for service discovery, see the sections that include _sd_ in Prometheus Configuration documentation.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210316/" class="link black dim">
        Programmatically deploying Cloud Run services (Golang|Python)
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Phew! Programmitcally deploying Cloud Run services should be easy but it didn&rsquo;t find it so.
My issues were that the Cloud Run Admin (!) API is poorly documented and it uses non-standard endpoints (thanks Sal!). Here, for others who may struggle with this, is how I got this to work.
Goal Programmatically (have Golang, Python, want Rust) deploy services to Cloud Run.
i.e. achieve this:
gcloud run deploy ${NAME} \ --image=${IMAGE} \ --platform=managed \ --no-allow-unauthenticated \ --region=${REGION} \ --project=${PROJECT} TRICK --log-http is your friend
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200326/" class="link black dim">
        Google Trillian on Cloud Run
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve written previously (Google Trillian for Noobs) about Google&rsquo;s interesting project Trillian and about some of the &ldquo;personalities&rdquo; (e.g. PyPi Transparency) that I&rsquo;ve build using it.
Having gone slight cra-cra on Cloud Run and gRPC this week with Golang gRPC Cloud Run and gRPC, Cloud Run &amp; Endpoints, I thought it&rsquo;d be fun to deploy Trillian and a personality to Cloud Run.
It mostly (!) works :-)
At the end of the post, I&rsquo;ve summarized creating a Cloud SQL instance to host the Trillian data(base).
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200325/" class="link black dim">
        gRPC, Cloud Run &amp; Endpoints
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      &lt;3 Google but there&rsquo;s quite often an assumption that we&rsquo;re all sitting around the engineering table and, of course, we&rsquo;re not.
Cloud Endpoints is a powerful offering but &ndash; IMO &ndash; it&rsquo;s super confusing to understand and complex to deploy.
If you&rsquo;re familiar with the motivations behind service meshes (e.g. Istio), Cloud Endpoints fits in a similar niche (&ldquo;neesh&rdquo; or &ldquo;nitch&rdquo;?). The underlying ambition is that, developers can take existing code and by adding a proxy (or sidecar), general-purpose abstractions, security, logging etc.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200320/" class="link black dim">
        Golang gRPC Cloud Run
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Update: 2020-03-24: Since writing this post, I&rsquo;ve contributed Golang and Rust samples to Google&rsquo;s project. I recommend you start there.
Google explained how to run gRPC servers with Cloud Run. The examples are good but only Python and Node.JS:
gRPC comes to Cloud Run gRPC in Google Cloud Run Missing Golang&hellip;. until now ;-)
I had problems with 1.14 and so I&rsquo;m using 1.13.
Project structure I&rsquo;ll tidy up my repo but the code may be found:
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/dns/" class="link blue hover-black">
            Tag: dns
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220506/" class="link black dim">
        Cloud Run custom domain mappings
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I have several Cloud Run services that I want to map to a domain.
During development, I create a Google Cloud Platform (GCP) project each day into which everything is deployed. This means that, every day, the Cloud Run services have newly non-inferable (to me) URLs. I thought this would be tedious to manage because:
My DNS service isn&rsquo;t programmable (I know!) Cloud Run services have non-inferable (by me) URLs i.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/cloud-scheduler/" class="link blue hover-black">
            Tag: cloud-scheduler
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220503/" class="link black dim">
        Automating Scheduled Firestore Exports
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      For my &ldquo;thing&rdquo;, I use Firestore to persist state. I like Firestore a lot and, having been around Google for almost (!) a decade, I much prefer it to Datastore.
Firestore has a managed export|import service and I use this to backup Firestore collections|documents.
I&rsquo;d been doing backups manually (using gcloud) and decided today to take the plunge and use Cloud Scheduler for the first time. I&rsquo;d been reluctant to do this until now because I&rsquo;d assumed incorrectly that I&rsquo;d need to write a wrapping service to invoke the export.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/ghcr/" class="link blue hover-black">
            Tag: ghcr
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220422/" class="link black dim">
        Playing with GitHub Container Registry REST API
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve a day to catch up on blogging. I&rsquo;m building a &ldquo;thing&rdquo; and getting this near to the finish line consumes my time and has meant that I&rsquo;m not originating anything particularly new. However, there are a couple of tricks in my deployment process that may be of interest to others.
I&rsquo;ve been a long-term using of Google&rsquo;s [Cloud Build] and like the simplicity (everything&rsquo;s a container, alot!). Because I&rsquo;m using GitHub repos, I&rsquo;ve been using GitHub Actions to (re)build containers on pushes and GitHub Container registry (GHCR) to store the results.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/211007/" class="link black dim">
        Sigstore
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve been on a digression (gcp-oidc-token-proxy) this week. Yesterday I began exploring Podman and wrote briefly about running gcp-oidc-token-proxy on my localhost using it.
This morning while walking with my dog, I listened to Google&rsquo;s Dan Lorenc explain Sigstore (blog](https://blog.sigstore.dev/)) on The Kubelist Podcast1
The plan today is to try to sign the gcp-oidc-token-proxy container images in GitHub Container Registry.
NOTE I decided against trying the hardware key approach. I have a Google Titan key and only Yubikeys are well-tested by go-piv
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/201029/" class="link black dim">
        GitHub Actions &amp;&amp; GitHub Container Registry
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      You know when you start something and then regret it!? I think I&rsquo;ll be sticking with Google Cloud Build; GitHub Actions appears functional and useful but I found the documentation to be confusing and limited and struggled to get a simple container image build|push working.
I&rsquo;ve long used Docker Hub but am planning to use it less as a result of the planned changes. I want to see Docker succeed and to do so it needs to find a way to make money but, there are free alternatives including the new GitHub Container Registry and the very very cheap Google Container Registry.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/sigstore/" class="link blue hover-black">
            Tag: sigstore
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220422/" class="link black dim">
        Playing with GitHub Container Registry REST API
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve a day to catch up on blogging. I&rsquo;m building a &ldquo;thing&rdquo; and getting this near to the finish line consumes my time and has meant that I&rsquo;m not originating anything particularly new. However, there are a couple of tricks in my deployment process that may be of interest to others.
I&rsquo;ve been a long-term using of Google&rsquo;s [Cloud Build] and like the simplicity (everything&rsquo;s a container, alot!). Because I&rsquo;m using GitHub repos, I&rsquo;ve been using GitHub Actions to (re)build containers on pushes and GitHub Container registry (GHCR) to store the results.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/211007/" class="link black dim">
        Sigstore
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve been on a digression (gcp-oidc-token-proxy) this week. Yesterday I began exploring Podman and wrote briefly about running gcp-oidc-token-proxy on my localhost using it.
This morning while walking with my dog, I listened to Google&rsquo;s Dan Lorenc explain Sigstore (blog](https://blog.sigstore.dev/)) on The Kubelist Podcast1
The plan today is to try to sign the gcp-oidc-token-proxy container images in GitHub Container Registry.
NOTE I decided against trying the hardware key approach. I have a Google Titan key and only Yubikeys are well-tested by go-piv
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/acme/" class="link blue hover-black">
            Tag: acme
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220421/" class="link black dim">
        Using Google&#39;s Public Certificate Authority with Golang autocert
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Last year, I wrote about using Automatic Certs w/ Golang gRPC service on Compute Engine. That solution uses ACME with (the wonderful) Let&rsquo;s Encrypt. Google is offering a private preview of Automate Public Certificates Lifecycle Management via RFC 8555 (ACME) and, because I&rsquo;m using Google Cloud Platform extensively to build a &ldquo;thing&rdquo; and I think it would be useful to have a backup to Let&rsquo;s Encrypt, I thought I&rsquo;d give the solution a try.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/211130/" class="link black dim">
        Automatic Certs w/ Golang gRPC service on Compute Engine
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I needed to deploy a healthcheck-enabled gRPC TLS-enabled service. Fortunately, most (all?) of the SDKs include an implementation, e.g. Golang has grpc-go/health.
I learned in my travels that:
DigitalOcean [App] platform does not (link) work with TLS-based gRPC apps. Fly has a regression (link) that breaks gRPC So, I resorted to Google Cloud Platform (GCP). Although Cloud Run would be well-suited to running the gRPC app, it uses a proxy|sidecar to provision a cert for the app and I wanted to be able to (easily use a custom domain) and give myself a somewhat general-purpose solution.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/compute-engine/" class="link blue hover-black">
            Tag: Compute Engine
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220421/" class="link black dim">
        Using Google&#39;s Public Certificate Authority with Golang autocert
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Last year, I wrote about using Automatic Certs w/ Golang gRPC service on Compute Engine. That solution uses ACME with (the wonderful) Let&rsquo;s Encrypt. Google is offering a private preview of Automate Public Certificates Lifecycle Management via RFC 8555 (ACME) and, because I&rsquo;m using Google Cloud Platform extensively to build a &ldquo;thing&rdquo; and I think it would be useful to have a backup to Let&rsquo;s Encrypt, I thought I&rsquo;d give the solution a try.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/211130/" class="link black dim">
        Automatic Certs w/ Golang gRPC service on Compute Engine
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I needed to deploy a healthcheck-enabled gRPC TLS-enabled service. Fortunately, most (all?) of the SDKs include an implementation, e.g. Golang has grpc-go/health.
I learned in my travels that:
DigitalOcean [App] platform does not (link) work with TLS-based gRPC apps. Fly has a regression (link) that breaks gRPC So, I resorted to Google Cloud Platform (GCP). Although Cloud Run would be well-suited to running the gRPC app, it uses a proxy|sidecar to provision a cert for the app and I wanted to be able to (easily use a custom domain) and give myself a somewhat general-purpose solution.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/201113/" class="link black dim">
        Akri
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      For the past couple of weeks, I&rsquo;ve been playing around with Akri, a Microsoft (DeisLabs) project for building a connected edge with Kubernetes. Kubernetes, IoT, Rust (and Golang) make this all compelling to me.
Initially, I deployed an Akri End-to-End to MicroK8s on Google Compute Engine (link) and Digital Ocean (link). But I was interested to create me own example and so have proposed a very (!) simple HTTP-based protocol.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/201022/" class="link black dim">
        akri
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I was very interested to read about Microsoft&rsquo;s DeisLab&rsquo;s latest (rust-based) Kubernetes project: akri. If I understand it correctly, it provides a mechanism to make any (IoT) device accessible to containers running within a cluster. I need to spend more time playing around with it so that I can fully understand it. I had some problems getting the End-to-End demo running on Google Compute Engine (and then I tried DigitalOcean droplet) instances.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200122/" class="link black dim">
        Setting up a GCE Instance as an Inlets Exit Node
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      The prolific Alex Ellis has a new project, Inlets.
Here&rsquo;s a quick tutorial using Google Compute Platform&rsquo;s (GCP) Compute Engine (GCE).
NB I&rsquo;m using one of Google&rsquo;s &ldquo;Always free&rdquo; f1-micro instances but you may still pay for network *gress and storage
Assumptions I&rsquo;m assuming you&rsquo;ve a Google account, have used GCP and have a billing account established, i.e. the following returns at least one billing account:
gcloud beta billing accounts list If you&rsquo;ve only one billing account and it&rsquo;s the one you wish to use, then you can:
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/191220/" class="link black dim">
        Google Cloud Platform (GCP) Exporter
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Earlier this week I discussed a Linode Prometheus Exporter.
I added metrics for Digital Ocean&rsquo;s Managed Kubernetes service to @metalmatze&rsquo;s Digital Ocean Exporter.
This left, metrics for Google Cloud Platform (GCP) which has, for many years, been my primary cloud platform. So, today I wrote Prometheus Exporter for Google Cloud Platform.
All 3 of these exporters follow the template laid down by @metalmatze and, because each of these services has a well-written Golang SDK, it&rsquo;s straightforward to implement an exporter for each of them.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/service-discovery/" class="link blue hover-black">
            Tag: service-discovery
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/220225/" class="link black dim">
        Prometheus HTTP Service Discovery of Cloud Run services
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Some time ago, I wrote about using Prometheus Service Discovery w/ Consul for Cloud Run and also Scraping metrics exposed by Google Cloud Run services that require authentication. Both solutions remain viable but they didn&rsquo;t address another use case for Prometheus and Cloud Run services that I have with a &ldquo;thing&rdquo; that I&rsquo;ve been building.
In this scenario, I want to:
Configure Prometheus to scrape Cloud Run service metrics Discover Cloud Run services dynamically Authenticate to Cloud Run using Firebase Auth ID tokens These requirements and &ndash; one other &ndash; present several challenges:
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210520/" class="link black dim">
        Consul discovers Google Cloud Run
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve written a basic discoverer of Google Cloud Run services. This is for a project and it extends work done in some previous posts to Multiplex gRPC and Prometheus with Cloud Run and to use Consul for Prometheus service discovery.
This solution:
Accepts a set of Google Cloud Platform (GCP) projects Trawls them for Cloud Run services Assumes that the services expose Prometheus metrics on :443/metrics Relabels the services Surfaces any discovered Cloud Run services&rsquo; metrics in Prometheus You&rsquo;ll need Docker and Docker Compose.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210419/" class="link black dim">
        Prometheus Service Discovery w/ Consul for Cloud Run
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m working on a project that will programmatically create Google Cloud Run services and I want to be able to dynamically discover these services using Prometheus.
This is one solution.
NOTE Google Cloud Run is the service I&rsquo;m using, but the principle described herein applies to any runtime service that you&rsquo;d wish to use.
Why is this challenging? IIUC, it&rsquo;s primarily because Prometheus has a limited set of plugins for service discovery, see the sections that include _sd_ in Prometheus Configuration documentation.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/lets-encrypt/" class="link blue hover-black">
            Tag: lets-encrypt
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/211130/" class="link black dim">
        Automatic Certs w/ Golang gRPC service on Compute Engine
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I needed to deploy a healthcheck-enabled gRPC TLS-enabled service. Fortunately, most (all?) of the SDKs include an implementation, e.g. Golang has grpc-go/health.
I learned in my travels that:
DigitalOcean [App] platform does not (link) work with TLS-based gRPC apps. Fly has a regression (link) that breaks gRPC So, I resorted to Google Cloud Platform (GCP). Although Cloud Run would be well-suited to running the gRPC app, it uses a proxy|sidecar to provision a cert for the app and I wanted to be able to (easily use a custom domain) and give myself a somewhat general-purpose solution.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/firebase-auth/" class="link blue hover-black">
            Tag: firebase-auth
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/211026/" class="link black dim">
        Firebase Auth authorized domains
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m using Firebase Authentication in a project to authenticate users of various OAuth2 identity systems. Firebase Authentication requires a set of Authorized Domains.
The (web) app that interacts with Firebase Authentication is deployed to Cloud Run. The Authorized Domains list must include the app&rsquo;s Cloud Run service URL.
Cloud Run service URLs vary by Project (ID). They are a combination of the service name, a hash (?) of the Project (ID) and .
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/gcloud/" class="link blue hover-black">
            Tag: gcloud
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/211022/" class="link black dim">
        Using `gcloud ... --format` with arbitrary returned data
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      If you use jq, you&rsquo;ll know that, its documentation uses examples that you can try locally or using the excellent jqplay:
printf &#34;[1,2,3]&#34; | jq .[1:] [ 2, 3 ] And here
If you use Google Cloud Platform (GCP) CLI, gcloud, this powerful tool includes JSON output formatting of results (--format=json) and YAML (--format=yaml) etc. and includes a set of so-called projections that you can use to format the returned data.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/cloud-logging/" class="link blue hover-black">
            Tag: cloud-logging
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/211018/" class="link black dim">
        Golang Structured Logging w/ Google Cloud Logging (2)
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      UPDATE There&rsquo;s an issue with my naive implementation of RenderValuesHook as described in this post. I summarized the problem in this issue where I&rsquo;ve outlined (hopefully) a more robust solution.
Recently, I described how to configure Golang logging so that user-defined key-values applied to the logs are parsed when ingested by Google Cloud Logging.
Here&rsquo;s an example of what we&rsquo;re trying to achieve. This is an example Cloud Logging log entry that incorporates user-defined labels (see dog:freddie and foo:bar) and a readily-querable jsonPayload:
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210928/" class="link black dim">
        Golang Structured Logging w/ Google Cloud Logging
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve multiple components in an app and these are deployed across multiple Google Cloud Platform (GCP) services: Kubernetes Engine, Cloud Functions, Cloud Run, etc. Almost everything is written in Golang and I started the project using go-logr.
logr is in two parts: a Logger that you use to write log entries; a LogSink (adaptor) that consumes log entries and outputs them to a specific log implementation.
Initially, I defaulted to using stdr which is a LogSink for Go&rsquo;s standard logging implementation.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/go-logr/" class="link blue hover-black">
            Tag: go-logr
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/211018/" class="link black dim">
        Golang Structured Logging w/ Google Cloud Logging (2)
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      UPDATE There&rsquo;s an issue with my naive implementation of RenderValuesHook as described in this post. I summarized the problem in this issue where I&rsquo;ve outlined (hopefully) a more robust solution.
Recently, I described how to configure Golang logging so that user-defined key-values applied to the logs are parsed when ingested by Google Cloud Logging.
Here&rsquo;s an example of what we&rsquo;re trying to achieve. This is an example Cloud Logging log entry that incorporates user-defined labels (see dog:freddie and foo:bar) and a readily-querable jsonPayload:
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/logr/" class="link blue hover-black">
            Tag: logr
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/211018/" class="link black dim">
        Golang Structured Logging w/ Google Cloud Logging (2)
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      UPDATE There&rsquo;s an issue with my naive implementation of RenderValuesHook as described in this post. I summarized the problem in this issue where I&rsquo;ve outlined (hopefully) a more robust solution.
Recently, I described how to configure Golang logging so that user-defined key-values applied to the logs are parsed when ingested by Google Cloud Logging.
Here&rsquo;s an example of what we&rsquo;re trying to achieve. This is an example Cloud Logging log entry that incorporates user-defined labels (see dog:freddie and foo:bar) and a readily-querable jsonPayload:
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210928/" class="link black dim">
        Golang Structured Logging w/ Google Cloud Logging
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve multiple components in an app and these are deployed across multiple Google Cloud Platform (GCP) services: Kubernetes Engine, Cloud Functions, Cloud Run, etc. Almost everything is written in Golang and I started the project using go-logr.
logr is in two parts: a Logger that you use to write log entries; a LogSink (adaptor) that consumes log entries and outputs them to a specific log implementation.
Initially, I defaulted to using stdr which is a LogSink for Go&rsquo;s standard logging implementation.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/oauth/" class="link blue hover-black">
            Tag: oauth
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/211005/" class="link black dim">
        Scraping metrics exposed by Google Cloud Run services that require authentication
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve written a solution (gcp-oidc-token-proxy) that can be used in conjunction with Prometheus OAuth2 to authenticate requests so that Prometheus can scrape metrics exposed by e.g. Cloud Run services that require authentication. The solution resulted from my question on Stack overflow.
Problem #1: Endpoint requires authentication
Given a Cloud Run service URL for which:
ENDPOINT=&#34;my-server-blahblah-wl.a.run.app&#34; # Returns 200 when authentication w/ an ID token TOKEN=&#34;$(gcloud auth print-identity-token)&#34; curl \ --silent \ --request GET \ --header &#34;Authorization: Bearer ${TOKEN}&#34; \ --write-out &#34;%{response_code}&#34; \ --output /dev/null \ https://${ENDPOINT}/metrics # Returns 403 otherwise curl \ --silent \ --request GET \ --write-out &#34;%{response_code}&#34; \ --output /dev/null \ https://${ENDPOINT}/metrics Problem #2: Prometheus OAuth2 configuration is constrained
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/oauth2/" class="link blue hover-black">
            Tag: oauth2
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/211005/" class="link black dim">
        Scraping metrics exposed by Google Cloud Run services that require authentication
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve written a solution (gcp-oidc-token-proxy) that can be used in conjunction with Prometheus OAuth2 to authenticate requests so that Prometheus can scrape metrics exposed by e.g. Cloud Run services that require authentication. The solution resulted from my question on Stack overflow.
Problem #1: Endpoint requires authentication
Given a Cloud Run service URL for which:
ENDPOINT=&#34;my-server-blahblah-wl.a.run.app&#34; # Returns 200 when authentication w/ an ID token TOKEN=&#34;$(gcloud auth print-identity-token)&#34; curl \ --silent \ --request GET \ --header &#34;Authorization: Bearer ${TOKEN}&#34; \ --write-out &#34;%{response_code}&#34; \ --output /dev/null \ https://${ENDPOINT}/metrics # Returns 403 otherwise curl \ --silent \ --request GET \ --write-out &#34;%{response_code}&#34; \ --output /dev/null \ https://${ENDPOINT}/metrics Problem #2: Prometheus OAuth2 configuration is constrained
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/oidc/" class="link blue hover-black">
            Tag: oidc
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/211005/" class="link black dim">
        Scraping metrics exposed by Google Cloud Run services that require authentication
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve written a solution (gcp-oidc-token-proxy) that can be used in conjunction with Prometheus OAuth2 to authenticate requests so that Prometheus can scrape metrics exposed by e.g. Cloud Run services that require authentication. The solution resulted from my question on Stack overflow.
Problem #1: Endpoint requires authentication
Given a Cloud Run service URL for which:
ENDPOINT=&#34;my-server-blahblah-wl.a.run.app&#34; # Returns 200 when authentication w/ an ID token TOKEN=&#34;$(gcloud auth print-identity-token)&#34; curl \ --silent \ --request GET \ --header &#34;Authorization: Bearer ${TOKEN}&#34; \ --write-out &#34;%{response_code}&#34; \ --output /dev/null \ https://${ENDPOINT}/metrics # Returns 403 otherwise curl \ --silent \ --request GET \ --write-out &#34;%{response_code}&#34; \ --output /dev/null \ https://${ENDPOINT}/metrics Problem #2: Prometheus OAuth2 configuration is constrained
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/token/" class="link blue hover-black">
            Tag: token
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/211005/" class="link black dim">
        Scraping metrics exposed by Google Cloud Run services that require authentication
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve written a solution (gcp-oidc-token-proxy) that can be used in conjunction with Prometheus OAuth2 to authenticate requests so that Prometheus can scrape metrics exposed by e.g. Cloud Run services that require authentication. The solution resulted from my question on Stack overflow.
Problem #1: Endpoint requires authentication
Given a Cloud Run service URL for which:
ENDPOINT=&#34;my-server-blahblah-wl.a.run.app&#34; # Returns 200 when authentication w/ an ID token TOKEN=&#34;$(gcloud auth print-identity-token)&#34; curl \ --silent \ --request GET \ --header &#34;Authorization: Bearer ${TOKEN}&#34; \ --write-out &#34;%{response_code}&#34; \ --output /dev/null \ https://${ENDPOINT}/metrics # Returns 403 otherwise curl \ --silent \ --request GET \ --write-out &#34;%{response_code}&#34; \ --output /dev/null \ https://${ENDPOINT}/metrics Problem #2: Prometheus OAuth2 configuration is constrained
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/zerolog/" class="link blue hover-black">
            Tag: zerolog
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210928/" class="link black dim">
        Golang Structured Logging w/ Google Cloud Logging
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve multiple components in an app and these are deployed across multiple Google Cloud Platform (GCP) services: Kubernetes Engine, Cloud Functions, Cloud Run, etc. Almost everything is written in Golang and I started the project using go-logr.
logr is in two parts: a Logger that you use to write log entries; a LogSink (adaptor) that consumes log entries and outputs them to a specific log implementation.
Initially, I defaulted to using stdr which is a LogSink for Go&rsquo;s standard logging implementation.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/dependabot/" class="link blue hover-black">
            Tag: dependabot
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210924/" class="link black dim">
        GitHub help with dependency management
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      This is very useful:
I am building an application that comprises multiple repos. I continue to procrastinate on whether using multiple repos vs. a monorepo was a good idea but, an issue that I have (had) is the need to ensure that the repos&rsquo; contents are using current|latest modules. GitHub can help.
Most of the application is written in Golang with a smattering of Rust and some JavaScript.
Aside Even though I&rsquo;m more proficient with Golang, I want to become more proficient in Rust and I contemplated trying to write the entire application in Rust.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/dependencies/" class="link blue hover-black">
            Tag: dependencies
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210924/" class="link black dim">
        GitHub help with dependency management
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      This is very useful:
I am building an application that comprises multiple repos. I continue to procrastinate on whether using multiple repos vs. a monorepo was a good idea but, an issue that I have (had) is the need to ensure that the repos&rsquo; contents are using current|latest modules. GitHub can help.
Most of the application is written in Golang with a smattering of Rust and some JavaScript.
Aside Even though I&rsquo;m more proficient with Golang, I want to become more proficient in Rust and I contemplated trying to write the entire application in Rust.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/modules/" class="link blue hover-black">
            Tag: Modules
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210924/" class="link black dim">
        GitHub help with dependency management
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      This is very useful:
I am building an application that comprises multiple repos. I continue to procrastinate on whether using multiple repos vs. a monorepo was a good idea but, an issue that I have (had) is the need to ensure that the repos&rsquo; contents are using current|latest modules. GitHub can help.
Most of the application is written in Golang with a smattering of Rust and some JavaScript.
Aside Even though I&rsquo;m more proficient with Golang, I want to become more proficient in Rust and I contemplated trying to write the entire application in Rust.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200206/" class="link black dim">
        Cloud Build wishlist: Mountable Golang Modules Proxy
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I think it would be valuable if Google were to provide volumes in Cloud Build of package registries (e.g. Go Modules; PyPi; Maven; NPM etc.).
Google provides a mirror of a subset of Docker Hub. This confers several benefits: Google&rsquo;s imprimatur; speed (latency); bandwidth; and convenience.
The same benefits would apply to package registries.
In the meantime, there&rsquo;s a hacky way to gain some of the benefits of these when using Cloud Build.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/kubectl/" class="link blue hover-black">
            Tag: kubectl
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210907/" class="link black dim">
        `gcloud beta run services replace`
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      TL;DR I&rsquo;m working on a project that includes multiple Cloud Run services. I&rsquo;ve been putting my gcloud head on to deploy these services thinking that it&rsquo;s curious there&rsquo;s no way to write the specs as YAML configs. Today, I learned that there is: gcloud beta run services replace.
What prompted the discovery was some frustration trying to deploy a JSON-valued environment variable to Cloud Run:
local FIREBASE_CONFIG=&#34;{ apiKey: ${FIREBASE_API_KEY}, authDomain: ${FIREBASE_AUTH_DOMAIN}, projectId: ${FIREBASE_PROJECT}, storageBucket: ${FIREBASE_STORAGE_BUCKET}, messagingSenderId: ${FIREBASE_MESSAGING_SENDER}, appId: ${FIREBASE_APP}}&#34; gcloud run deploy ${SRV_NAME} \ --image=${IMAGE} \ --command=&#34;/server&#34; \ --args=&#34;--endpoint=:${PORT}&#34; \ --set-env-vars=FIREBASE_CONFIG=&#34;${FIREBASE_CONFIG}&#34; \ --max-instances=1 \ --memory=256Mi \ --ingress=all \ --platform=managed \ --port=${PORT} \ --allow-unauthenticated \ --region=${REGION} \ --project=${PROJECT} gcloud balks at this.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/yaml/" class="link blue hover-black">
            Tag: YAML
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210907/" class="link black dim">
        `gcloud beta run services replace`
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      TL;DR I&rsquo;m working on a project that includes multiple Cloud Run services. I&rsquo;ve been putting my gcloud head on to deploy these services thinking that it&rsquo;s curious there&rsquo;s no way to write the specs as YAML configs. Today, I learned that there is: gcloud beta run services replace.
What prompted the discovery was some frustration trying to deploy a JSON-valued environment variable to Cloud Run:
local FIREBASE_CONFIG=&#34;{ apiKey: ${FIREBASE_API_KEY}, authDomain: ${FIREBASE_AUTH_DOMAIN}, projectId: ${FIREBASE_PROJECT}, storageBucket: ${FIREBASE_STORAGE_BUCKET}, messagingSenderId: ${FIREBASE_MESSAGING_SENDER}, appId: ${FIREBASE_APP}}&#34; gcloud run deploy ${SRV_NAME} \ --image=${IMAGE} \ --command=&#34;/server&#34; \ --args=&#34;--endpoint=:${PORT}&#34; \ --set-env-vars=FIREBASE_CONFIG=&#34;${FIREBASE_CONFIG}&#34; \ --max-instances=1 \ --memory=256Mi \ --ingress=all \ --platform=managed \ --port=${PORT} \ --allow-unauthenticated \ --region=${REGION} \ --project=${PROJECT} gcloud balks at this.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/terraform/" class="link blue hover-black">
            Tag: terraform
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210902/" class="link black dim">
        Infrastructure as Code
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Problem I&rsquo;m building an application that comprises:
Kubernetes¹ Kubernetes Operator Cloud Firestore Cloud Functions Cloud Run Cloud Endpoints Stripe Firebase Authentication ¹ - I&rsquo;m using Google Kubernetes Engine (GKE) but may include other managed Kubernetes offerings (e.g. Digital Ocean, Linode, Oracle). GKE clusters are manageable by gcloud but other platforms require other CLI tools. All are accessible from bash but are these supported by e.g. Terraform (see below)?
Many of the components are packaged as container images and, because I&rsquo;m using GitHub to host the project&rsquo;s repos (I&rsquo;ll leave the monorepo discussion for another post), I&rsquo;ve become inculcated and use GitHub Container Registry (GHCR) as the container repo.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/cloud-endpoints/" class="link blue hover-black">
            Tag: Cloud Endpoints
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210730/" class="link black dim">
        Renewing Firebase Authentication ID tokens with gRPC
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve written before about a project in which I&rsquo;m using Firebase Authentication in combination with Google Cloud Endpoints and a gRPC service running on Cloud Run:
Firebase Authentication, Cloud Endpoints and gRPC (1of2) Firebase Authentication, Cloud Endpoints and gRPC (2of2) This works well with one caveat, the ID tokens (JWTs) minted by Firebase Authentication have a 3600 second (one hour) lifetime.
The user flow in my app is that whenever the user invokes the app&rsquo;s CLI:
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210618/" class="link black dim">
        Firebase Authentication, Cloud Endpoints and gRPC (2of2)
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Earlier this week, I wrote about using Firebase Authentcation, Cloud Endpoints and gRPC (1of2). Since then, I learned some more and added a gRPC interceptor to implement basic authorization for the service.
ESPv2 --allow-unauthenticated The Cloud Enpoints (ESPv2) proxy must be run as --allow-unauthenticated on Cloud Run to ensure that requests make it to the proxy where the request is authenticated and only authenticated requests make it on to the backend service.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210614/" class="link black dim">
        Firebase Authentication, Cloud Endpoints and gRPC (1of2)
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m building a service that requires user authentication. The primary endpoint is a gRPC-based service. I would like to consider using certificate-based auth but this feels&hellip; challenging. Instead, I have been aware of, but never used, Firebase Authentication and was interested to see that Cloud Endpoints includes Firebase Authentication as one of its supported auth mechanisms. Curiosity piqued, I confirmed that gRPC supports Google token-based authentication.
The following is a summary of what I did but I&rsquo;ll leave the extensive documentation to Google, (Google&rsquo;s) Firebase and gRPC, all of which, in this case, provide really good explanations.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210608/" class="link black dim">
        Cloud Endpoints combine OpenAPI and gRPC... or not!
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      See:
Multiplexing gRPC and HTTP endpoints with Cloud Run gRPC, Cloud Run &amp; Endpoints ESPv2: Configure Cloud Endpoints to proxy traffic to a Cloud Run multiplexed (gRPC|HTTP) service Challenges:
Cloud Run permits single port Cloud Run services publishing e.g. gRPC and Prometheus, must multiplex transports Cloud Run services publishing multiplexed transports are challenging to expose using Cloud Endpoints Hypothesis #1: Multiplexed transports work with Cloud Run See: Multiplexing gRPC and HTTP endpoints with Cloud Run
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200325/" class="link black dim">
        gRPC, Cloud Run &amp; Endpoints
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      &lt;3 Google but there&rsquo;s quite often an assumption that we&rsquo;re all sitting around the engineering table and, of course, we&rsquo;re not.
Cloud Endpoints is a powerful offering but &ndash; IMO &ndash; it&rsquo;s super confusing to understand and complex to deploy.
If you&rsquo;re familiar with the motivations behind service meshes (e.g. Istio), Cloud Endpoints fits in a similar niche (&ldquo;neesh&rdquo; or &ldquo;nitch&rdquo;?). The underlying ambition is that, developers can take existing code and by adding a proxy (or sidecar), general-purpose abstractions, security, logging etc.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/firebase-authentication/" class="link blue hover-black">
            Tag: firebase-authentication&#34;
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210730/" class="link black dim">
        Renewing Firebase Authentication ID tokens with gRPC
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve written before about a project in which I&rsquo;m using Firebase Authentication in combination with Google Cloud Endpoints and a gRPC service running on Cloud Run:
Firebase Authentication, Cloud Endpoints and gRPC (1of2) Firebase Authentication, Cloud Endpoints and gRPC (2of2) This works well with one caveat, the ID tokens (JWTs) minted by Firebase Authentication have a 3600 second (one hour) lifetime.
The user flow in my app is that whenever the user invokes the app&rsquo;s CLI:
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210618/" class="link black dim">
        Firebase Authentication, Cloud Endpoints and gRPC (2of2)
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Earlier this week, I wrote about using Firebase Authentcation, Cloud Endpoints and gRPC (1of2). Since then, I learned some more and added a gRPC interceptor to implement basic authorization for the service.
ESPv2 --allow-unauthenticated The Cloud Enpoints (ESPv2) proxy must be run as --allow-unauthenticated on Cloud Run to ensure that requests make it to the proxy where the request is authenticated and only authenticated requests make it on to the backend service.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210614/" class="link black dim">
        Firebase Authentication, Cloud Endpoints and gRPC (1of2)
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m building a service that requires user authentication. The primary endpoint is a gRPC-based service. I would like to consider using certificate-based auth but this feels&hellip; challenging. Instead, I have been aware of, but never used, Firebase Authentication and was interested to see that Cloud Endpoints includes Firebase Authentication as one of its supported auth mechanisms. Curiosity piqued, I confirmed that gRPC supports Google token-based authentication.
The following is a summary of what I did but I&rsquo;ll leave the extensive documentation to Google, (Google&rsquo;s) Firebase and gRPC, all of which, in this case, provide really good explanations.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/id-token/" class="link blue hover-black">
            Tag: id-token
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210730/" class="link black dim">
        Renewing Firebase Authentication ID tokens with gRPC
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve written before about a project in which I&rsquo;m using Firebase Authentication in combination with Google Cloud Endpoints and a gRPC service running on Cloud Run:
Firebase Authentication, Cloud Endpoints and gRPC (1of2) Firebase Authentication, Cloud Endpoints and gRPC (2of2) This works well with one caveat, the ID tokens (JWTs) minted by Firebase Authentication have a 3600 second (one hour) lifetime.
The user flow in my app is that whenever the user invokes the app&rsquo;s CLI:
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/jwt/" class="link blue hover-black">
            Tag: jwt
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210730/" class="link black dim">
        Renewing Firebase Authentication ID tokens with gRPC
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve written before about a project in which I&rsquo;m using Firebase Authentication in combination with Google Cloud Endpoints and a gRPC service running on Cloud Run:
Firebase Authentication, Cloud Endpoints and gRPC (1of2) Firebase Authentication, Cloud Endpoints and gRPC (2of2) This works well with one caveat, the ID tokens (JWTs) minted by Firebase Authentication have a 3600 second (one hour) lifetime.
The user flow in my app is that whenever the user invokes the app&rsquo;s CLI:
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/refresh-token/" class="link blue hover-black">
            Tag: refresh-token
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210730/" class="link black dim">
        Renewing Firebase Authentication ID tokens with gRPC
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve written before about a project in which I&rsquo;m using Firebase Authentication in combination with Google Cloud Endpoints and a gRPC service running on Cloud Run:
Firebase Authentication, Cloud Endpoints and gRPC (1of2) Firebase Authentication, Cloud Endpoints and gRPC (2of2) This works well with one caveat, the ID tokens (JWTs) minted by Firebase Authentication have a 3600 second (one hour) lifetime.
The user flow in my app is that whenever the user invokes the app&rsquo;s CLI:
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/in-memory/" class="link blue hover-black">
            Tag: in-memory
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210724/" class="link black dim">
        gRPC Interceptors and in-memory gRPC connections
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      For&hellip; reasons, I wanted to pre-filter gRPC requests to check for authorization. Authorization is implemented as a &lsquo;micro-service&rsquo; and I wanted the authorization server to run in the same process as the gRPC client.
TL;DR:
Shiju&rsquo;s &ldquo;Writing gRPC Interceptors in Go&rdquo; is great This Stack overflow answer ostensibly for writing unit tests for gRPC got me an in-process server What follows stands on these folks&rsquo; shoulders&hellip;
A key motivator for me to write blog posts is that helps me ensure that I understand things.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/interceptor/" class="link blue hover-black">
            Tag: interceptor
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210724/" class="link black dim">
        gRPC Interceptors and in-memory gRPC connections
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      For&hellip; reasons, I wanted to pre-filter gRPC requests to check for authorization. Authorization is implemented as a &lsquo;micro-service&rsquo; and I wanted the authorization server to run in the same process as the gRPC client.
TL;DR:
Shiju&rsquo;s &ldquo;Writing gRPC Interceptors in Go&rdquo; is great This Stack overflow answer ostensibly for writing unit tests for gRPC got me an in-process server What follows stands on these folks&rsquo; shoulders&hellip;
A key motivator for me to write blog posts is that helps me ensure that I understand things.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/javascript/" class="link blue hover-black">
            Tag: javascript
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210716/" class="link black dim">
        Stripe
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      It&rsquo;s been almost a month since my last post. I&rsquo;ve been occupied learning Stripe and integrating it into an application that I&rsquo;m developing. The app benefits from a billing mechanism for prospective customers and, as far as I can tell, Stripe is the solution. I&rsquo;d be interested in hearing perspectives on alternatives.
As with any platform, there&rsquo;s good and bad and I&rsquo;ll summarize my perspective on Stripe here. It&rsquo;s been some time since I developed in JavaScript and this lack of familiarity has meant that the solution took longer than I wanted to develop.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/stripe/" class="link blue hover-black">
            Tag: stripe
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210716/" class="link black dim">
        Stripe
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      It&rsquo;s been almost a month since my last post. I&rsquo;ve been occupied learning Stripe and integrating it into an application that I&rsquo;m developing. The app benefits from a billing mechanism for prospective customers and, as far as I can tell, Stripe is the solution. I&rsquo;d be interested in hearing perspectives on alternatives.
As with any platform, there&rsquo;s good and bad and I&rsquo;ll summarize my perspective on Stripe here. It&rsquo;s been some time since I developed in JavaScript and this lack of familiarity has meant that the solution took longer than I wanted to develop.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/firebase/" class="link blue hover-black">
            Tag: firebase
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210618/" class="link black dim">
        Firebase Authentication, Cloud Endpoints and gRPC (2of2)
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Earlier this week, I wrote about using Firebase Authentcation, Cloud Endpoints and gRPC (1of2). Since then, I learned some more and added a gRPC interceptor to implement basic authorization for the service.
ESPv2 --allow-unauthenticated The Cloud Enpoints (ESPv2) proxy must be run as --allow-unauthenticated on Cloud Run to ensure that requests make it to the proxy where the request is authenticated and only authenticated requests make it on to the backend service.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210614/" class="link black dim">
        Firebase Authentication, Cloud Endpoints and gRPC (1of2)
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m building a service that requires user authentication. The primary endpoint is a gRPC-based service. I would like to consider using certificate-based auth but this feels&hellip; challenging. Instead, I have been aware of, but never used, Firebase Authentication and was interested to see that Cloud Endpoints includes Firebase Authentication as one of its supported auth mechanisms. Curiosity piqued, I confirmed that gRPC supports Google token-based authentication.
The following is a summary of what I did but I&rsquo;ll leave the extensive documentation to Google, (Google&rsquo;s) Firebase and gRPC, all of which, in this case, provide really good explanations.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/openapi/" class="link blue hover-black">
            Tag: openapi
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210608/" class="link black dim">
        Cloud Endpoints combine OpenAPI and gRPC... or not!
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      See:
Multiplexing gRPC and HTTP endpoints with Cloud Run gRPC, Cloud Run &amp; Endpoints ESPv2: Configure Cloud Endpoints to proxy traffic to a Cloud Run multiplexed (gRPC|HTTP) service Challenges:
Cloud Run permits single port Cloud Run services publishing e.g. gRPC and Prometheus, must multiplex transports Cloud Run services publishing multiplexed transports are challenging to expose using Cloud Endpoints Hypothesis #1: Multiplexed transports work with Cloud Run See: Multiplexing gRPC and HTTP endpoints with Cloud Run
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/consul/" class="link blue hover-black">
            Tag: consul
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210520/" class="link black dim">
        Consul discovers Google Cloud Run
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve written a basic discoverer of Google Cloud Run services. This is for a project and it extends work done in some previous posts to Multiplex gRPC and Prometheus with Cloud Run and to use Consul for Prometheus service discovery.
This solution:
Accepts a set of Google Cloud Platform (GCP) projects Trawls them for Cloud Run services Assumes that the services expose Prometheus metrics on :443/metrics Relabels the services Surfaces any discovered Cloud Run services&rsquo; metrics in Prometheus You&rsquo;ll need Docker and Docker Compose.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210419/" class="link black dim">
        Prometheus Service Discovery w/ Consul for Cloud Run
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m working on a project that will programmatically create Google Cloud Run services and I want to be able to dynamically discover these services using Prometheus.
This is one solution.
NOTE Google Cloud Run is the service I&rsquo;m using, but the principle described herein applies to any runtime service that you&rsquo;d wish to use.
Why is this challenging? IIUC, it&rsquo;s primarily because Prometheus has a limited set of plugins for service discovery, see the sections that include _sd_ in Prometheus Configuration documentation.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/http/" class="link blue hover-black">
            Tag: http
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210519/" class="link black dim">
        Multiplexing gRPC and HTTP (Prometheus) endpoints with Cloud Run
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Google Cloud Run is useful but, each service is limited to exposing a single port. This caused me problems with a gRPC service that serves (non-gRPC) Prometheus metrics because customarily, you would serve gRPC on one port and the Prometheus metrics on another.
Fortunately, cmux provides a solution by providing a mechanism that multiplexes both services (gRPC and HTTP) on a single port!
TL;DR See the cmux Limitations and use:
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/merge/" class="link blue hover-black">
            Tag: merge
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210506/" class="link black dim">
        Firestore Golang Timestamps &amp; Merging
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m using Google&rsquo;s Golang SDK for Firestore. The experience is excellent and I&rsquo;m quikcly becoming a fan of Firestore. However, as a Golang Firestore developer, I&rsquo;m feeling less loved and some of the concepts in the database were causing me a conundrum.
I&rsquo;m still not entirely certain that I have Timestamps nailed but&hellip; I learned an important lesson on the auto-creation of Timestamps in documents and how to retain these values.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/timestamp/" class="link blue hover-black">
            Tag: timestamp
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210506/" class="link black dim">
        Firestore Golang Timestamps &amp; Merging
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m using Google&rsquo;s Golang SDK for Firestore. The experience is excellent and I&rsquo;m quikcly becoming a fan of Firestore. However, as a Golang Firestore developer, I&rsquo;m feeling less loved and some of the concepts in the database were causing me a conundrum.
I&rsquo;m still not entirely certain that I have Timestamps nailed but&hellip; I learned an important lesson on the auto-creation of Timestamps in documents and how to retain these values.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/coredns/" class="link blue hover-black">
            Tag: coredns
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210419/" class="link black dim">
        Prometheus Service Discovery w/ Consul for Cloud Run
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m working on a project that will programmatically create Google Cloud Run services and I want to be able to dynamically discover these services using Prometheus.
This is one solution.
NOTE Google Cloud Run is the service I&rsquo;m using, but the principle described herein applies to any runtime service that you&rsquo;d wish to use.
Why is this challenging? IIUC, it&rsquo;s primarily because Prometheus has a limited set of plugins for service discovery, see the sections that include _sd_ in Prometheus Configuration documentation.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/cloud-functions/" class="link blue hover-black">
            Tag: cloud-functions
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210413/" class="link black dim">
        Cloud Firestore Triggers in Golang
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I was pleased to discover that Google provides a non-Node.JS mechanism to subscribe to and act upon Firestore triggers, Google Cloud Firestore Triggers. I&rsquo;ve nothing against Node.JS but, for the project i&rsquo;m developing, everything else is written in Golang. It&rsquo;s good to keep it all in one language.
I&rsquo;m perplexed that Cloud Functions still (!) only supports Go 1.13 (03-Sep-2019). Even Go 1.14 (25-Feb-2020) was released pre-pandemic and we&rsquo;re now running on 1.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/201203/" class="link black dim">
        webmention
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Let&rsquo;s see if this works!?
I&rsquo;ve added the following link to this site&rsquo;s baseof.html so that it is now rendered for each page:
&lt;link href=&#34;https://us-central1-webmention.cloudfunctions.net/webmention&#34; rel=&#34;webmention&#34; /&gt; I discovered indieweb yesterday reading about webmention. Who knows what got me to webmention!?
The principles of both are sound. Instead of relying on come-go behemoths to run our digital world, indieweb seeks to provide technologies that enable us to achieve things without them.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200617/" class="link black dim">
        WASM Cloud Functions
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Following on from waPC &amp; Protobufs and a question on Stack Overflow about Cloud Functions, I was compelled to try running WASM on Cloud Functions no JavaScript.
I wanted to reuse the WASM waPC functions that I&rsquo;d written in Rust as described in the other post. Cloud Functions does not (yet!?) provide a Rust runtime and so I&rsquo;m using the waPC Host for Go in this example.
It works!
PARAMS=$(printf &#39;{&#34;a&#34;:{&#34;real&#34;:39,&#34;imag&#34;:3},&#34;b&#34;:{&#34;real&#34;:39,&#34;imag&#34;:3}}&#39; | base64) TOKEN=$(gcloud auth print-identity-token) echo &#34;{ \&#34;filename\&#34;:\&#34;complex.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/healthcheck/" class="link blue hover-black">
            Tag: healthcheck
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210412/" class="link black dim">
        Fly.io
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I spent some time over the weekend understanding Fly.io. It&rsquo;s always fascinating to me how many smart people are building really neat solutions. Fly.io is subtly different to other platforms that I use (Kubernetes, GCP, DO, Linode) and I&rsquo;ve found the Fly.io team to be highly responsive and helpful to my noob questions.
One of the team&rsquo;s posts, Docker without Docker surfaced in my Feedly feed (hackernews) and it piqued my interest.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/emulator/" class="link blue hover-black">
            Tag: emulator
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210317/" class="link black dim">
        Using Golang with the Firestore Emulator
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      This works great but it wasn&rsquo;t clearly documented for non-Firebase users. I assume it will work, as well, for any of the client libraries (not just Golang).
Assuming you have some (Golang) code (in this case using the Google Cloud Client Library) that interacts with a Firestore database. Something of the form:
package main import ( &#34;context&#34; &#34;crypto/sha256&#34; &#34;fmt&#34; &#34;log&#34; &#34;os&#34; &#34;time&#34; &#34;cloud.google.com/go/firestore&#34; ) func hash(s string) string { h := sha256.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/python/" class="link blue hover-black">
            Tag: Python
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210316/" class="link black dim">
        Programmatically deploying Cloud Run services (Golang|Python)
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Phew! Programmitcally deploying Cloud Run services should be easy but it didn&rsquo;t find it so.
My issues were that the Cloud Run Admin (!) API is poorly documented and it uses non-standard endpoints (thanks Sal!). Here, for others who may struggle with this, is how I got this to work.
Goal Programmatically (have Golang, Python, want Rust) deploy services to Cloud Run.
i.e. achieve this:
gcloud run deploy ${NAME} \ --image=${IMAGE} \ --platform=managed \ --no-allow-unauthenticated \ --region=${REGION} \ --project=${PROJECT} TRICK --log-http is your friend
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200217/" class="link black dim">
        OriginStamp Python|Golang SDK Examples
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      A friend mentioned OriginStamp to me.
NB There are 2 sites: originstamp.com and originstamp.org.
It&rsquo;s an interesting project.
It&rsquo;s a solution for providing auditable proof that you had a(ccess to) some digital thing before a certain date. OriginStamp provides user-|developer-friendly means to submit files|hashes (of your content) and have these bundled into transactions that are submitted to e.g. bitcoin.
I won&rsquo;t attempt to duplicate the narrative here, review OriginStamp&rsquo;s site and some of its content.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/190926/" class="link black dim">
        PyPi Transparency
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve been noodling around with another Trillian personality.
Another in a theme that interests me in providing tamperproof logs for the packages in the popular package management registries.
The Golang team recently announced Go Module Mirror which is built atop Trillian. It seems to me that all the package registries (Go Modules, npm, Maven, NuGet etc.) would benefit from tamperproof logs hosted by a trusted 3rd-party.
As you may have guessed, PyPi Transparency is a log for PyPi packages.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/run/" class="link blue hover-black">
            Tag: run
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210316/" class="link black dim">
        Programmatically deploying Cloud Run services (Golang|Python)
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Phew! Programmitcally deploying Cloud Run services should be easy but it didn&rsquo;t find it so.
My issues were that the Cloud Run Admin (!) API is poorly documented and it uses non-standard endpoints (thanks Sal!). Here, for others who may struggle with this, is how I got this to work.
Goal Programmatically (have Golang, Python, want Rust) deploy services to Cloud Run.
i.e. achieve this:
gcloud run deploy ${NAME} \ --image=${IMAGE} \ --platform=managed \ --no-allow-unauthenticated \ --region=${REGION} \ --project=${PROJECT} TRICK --log-http is your friend
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/kube-metrics/" class="link blue hover-black">
            Tag: kube-metrics
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210305/" class="link black dim">
        Prometheus VPA Recommendations
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Phew!
For Want of a Nail
I was interested in learning how to Manage Resources for Containers. On the way, I learned and discovered:
kubectl top Vertical Pod Autoscaler A (valuable) digression through PodMonitor kube-state-metrics `kubectl-patch Created a Graph References Kubernetes Resources Visual Studio Code has begun to bug me (reasonably) to add resources to Kubernetes manifests.
E.g.:
resources: limits: cpu: &#34;1&#34; memory: &#34;512Mi&#34; I&rsquo;ve been spending time with Deislab&rsquo;s Akri and decided to determine whether Akri&rsquo;s primary resources (Agent, Controller) and some of my creations HTTP Device and Discovery, were being suitably constrained.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/kube-state-metrics/" class="link blue hover-black">
            Tag: kube-state-metrics
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210305/" class="link black dim">
        Prometheus VPA Recommendations
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Phew!
For Want of a Nail
I was interested in learning how to Manage Resources for Containers. On the way, I learned and discovered:
kubectl top Vertical Pod Autoscaler A (valuable) digression through PodMonitor kube-state-metrics `kubectl-patch Created a Graph References Kubernetes Resources Visual Studio Code has begun to bug me (reasonably) to add resources to Kubernetes manifests.
E.g.:
resources: limits: cpu: &#34;1&#34; memory: &#34;512Mi&#34; I&rsquo;ve been spending time with Deislab&rsquo;s Akri and decided to determine whether Akri&rsquo;s primary resources (Agent, Controller) and some of my creations HTTP Device and Discovery, were being suitably constrained.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/microk8s/" class="link blue hover-black">
            Tag: microk8s
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210305/" class="link black dim">
        Prometheus VPA Recommendations
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Phew!
For Want of a Nail
I was interested in learning how to Manage Resources for Containers. On the way, I learned and discovered:
kubectl top Vertical Pod Autoscaler A (valuable) digression through PodMonitor kube-state-metrics `kubectl-patch Created a Graph References Kubernetes Resources Visual Studio Code has begun to bug me (reasonably) to add resources to Kubernetes manifests.
E.g.:
resources: limits: cpu: &#34;1&#34; memory: &#34;512Mi&#34; I&rsquo;ve been spending time with Deislab&rsquo;s Akri and decided to determine whether Akri&rsquo;s primary resources (Agent, Controller) and some of my creations HTTP Device and Discovery, were being suitably constrained.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210222/" class="link black dim">
        Dapr
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      It&rsquo;s a good name, I read it as &ldquo;dapper&rdquo; but I frequently type &ldquo;darp&rdquo; :-(
Was interested to read that Dapr is now v1.0 and decided to check it out. I was initially confused between Dapr and service mesh functionality. But, having used Dapr, it appears to be more focused in aiding the development of (cloud-native) (distributed) apps by providing developers with abstractions for e.g. service discovery, eventing, observability whereas service meshes feel (!
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/201217/" class="link black dim">
        Kubernetes Device Plugins
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m debugging an issue with Akri Zeroconf protocol in which Instance environment variables are no longer (!) being surfaced within the Broker pods. In my adventures, it seemed useful to better understand how Akri works and specifically, how Akri uses Kubernetes Device Plugins.
IIUC plugins register with the Kubelet (!) via a gRPC service (Registration) that the Kubelet exposes on a UNIX socket at /var/lib/kubelet/device-plugins/kubelet.sock
Then (!) if successful, devices should be reported by the Node&rsquo;s metadata (spec) and available to be bound to Pods.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/201113/" class="link black dim">
        Akri
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      For the past couple of weeks, I&rsquo;ve been playing around with Akri, a Microsoft (DeisLabs) project for building a connected edge with Kubernetes. Kubernetes, IoT, Rust (and Golang) make this all compelling to me.
Initially, I deployed an Akri End-to-End to MicroK8s on Google Compute Engine (link) and Digital Ocean (link). But I was interested to create me own example and so have proposed a very (!) simple HTTP-based protocol.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/201022/" class="link black dim">
        akri
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I was very interested to read about Microsoft&rsquo;s DeisLab&rsquo;s latest (rust-based) Kubernetes project: akri. If I understand it correctly, it provides a mechanism to make any (IoT) device accessible to containers running within a cluster. I need to spend more time playing around with it so that I can fully understand it. I had some problems getting the End-to-End demo running on Google Compute Engine (and then I tried DigitalOcean droplet) instances.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/virtualpodautoscaler/" class="link blue hover-black">
            Tag: virtualpodautoscaler
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210305/" class="link black dim">
        Prometheus VPA Recommendations
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Phew!
For Want of a Nail
I was interested in learning how to Manage Resources for Containers. On the way, I learned and discovered:
kubectl top Vertical Pod Autoscaler A (valuable) digression through PodMonitor kube-state-metrics `kubectl-patch Created a Graph References Kubernetes Resources Visual Studio Code has begun to bug me (reasonably) to add resources to Kubernetes manifests.
E.g.:
resources: limits: cpu: &#34;1&#34; memory: &#34;512Mi&#34; I&rsquo;ve been spending time with Deislab&rsquo;s Akri and decided to determine whether Akri&rsquo;s primary resources (Agent, Controller) and some of my creations HTTP Device and Discovery, were being suitably constrained.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/dapr/" class="link blue hover-black">
            Tag: dapr
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210222/" class="link black dim">
        Dapr
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      It&rsquo;s a good name, I read it as &ldquo;dapper&rdquo; but I frequently type &ldquo;darp&rdquo; :-(
Was interested to read that Dapr is now v1.0 and decided to check it out. I was initially confused between Dapr and service mesh functionality. But, having used Dapr, it appears to be more focused in aiding the development of (cloud-native) (distributed) apps by providing developers with abstractions for e.g. service discovery, eventing, observability whereas service meshes feel (!
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/deislabs/" class="link blue hover-black">
            Tag: deislabs
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210122/" class="link black dim">
        Krustlet on DO Managed Kubernetes
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve spent time this week returning to the interesting Deislabs project Krustlet. Since the last time, the bootstrapping process has been simplified using Kubernetes Bootstrap Tokens. I know this updated process works with MicroK8s. Unfortunately, I&rsquo;m struggling with it on GKE and thought I&rsquo;d try DigitalOcean Managed Kubernetes.
It worked first time!
In the following, we run both the Kubernetes cluster and the Krustlet Droplet on DigitalOcean but, as long as the cluster and the VM are able to communicate with one another, you should be able to run these anywhere.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/krustlet/" class="link blue hover-black">
            Tag: krustlet
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210122/" class="link black dim">
        Krustlet on DO Managed Kubernetes
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve spent time this week returning to the interesting Deislabs project Krustlet. Since the last time, the bootstrapping process has been simplified using Kubernetes Bootstrap Tokens. I know this updated process works with MicroK8s. Unfortunately, I&rsquo;m struggling with it on GKE and thought I&rsquo;d try DigitalOcean Managed Kubernetes.
It worked first time!
In the following, we run both the Kubernetes cluster and the Krustlet Droplet on DigitalOcean but, as long as the cluster and the VM are able to communicate with one another, you should be able to run these anywhere.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200612/" class="link black dim">
        waPC &amp; Protobufs
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m hacking around with a solution that combines WASM and Google Trillian.
Ultimately, I&rsquo;d like to be able to ship WASM (binaries) to a Trillian personality and then invoke (exported) functions on them. Some this was borne from the interesting exploration of Krustlet and its application of wascc.
I&rsquo;m still booting into WASM but it&rsquo;s a very interesting technology that has most interesting potential outside the browser. Some folks have been trailblazing the technology and I have been reading Kevin Hoffman&rsquo;s medium and wascc (nee waxosuit) work.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/akri/" class="link blue hover-black">
            Tag: akri
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210108/" class="link black dim">
        Kubernetes cert-manager
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I developed an admission webhook for Akri, twice (Golang, Rust). I naively followed other examples for the generation of the certificates, created a 1.20 cluster and broke that process.
I&rsquo;d briefly considered using cert-manager recently but quickly abandoned the idea thinking it would be onerous and unnecessary complexity for little-old-me. I was wrong. It&rsquo;s excellent and I recommend it highly.
I won&rsquo;t reproduce the v1beta1 and v1 examples from the Stackoverflow question as they should be self-explanatory.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/201229/" class="link black dim">
        Kubernetes Webhooks
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I spent some time last week writing my first admission webhook for Kubernetes. I wrote the handler in Golang because I&rsquo;m most familiar with Golang and because, as Kubernetes&rsquo; native language, I was more confident that the necessary SDKs would exist and that the documentation would likely use Golang by default. I struggled to find useful documentation and so this post is to help you (and me!) remember how to do this next time!
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/201217/" class="link black dim">
        Kubernetes Device Plugins
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m debugging an issue with Akri Zeroconf protocol in which Instance environment variables are no longer (!) being surfaced within the Broker pods. In my adventures, it seemed useful to better understand how Akri works and specifically, how Akri uses Kubernetes Device Plugins.
IIUC plugins register with the Kubelet (!) via a gRPC service (Registration) that the Kubelet exposes on a UNIX socket at /var/lib/kubelet/device-plugins/kubelet.sock
Then (!) if successful, devices should be reported by the Node&rsquo;s metadata (spec) and available to be bound to Pods.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/201113/" class="link black dim">
        Akri
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      For the past couple of weeks, I&rsquo;ve been playing around with Akri, a Microsoft (DeisLabs) project for building a connected edge with Kubernetes. Kubernetes, IoT, Rust (and Golang) make this all compelling to me.
Initially, I deployed an Akri End-to-End to MicroK8s on Google Compute Engine (link) and Digital Ocean (link). But I was interested to create me own example and so have proposed a very (!) simple HTTP-based protocol.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/201029/" class="link black dim">
        GitHub Actions &amp;&amp; GitHub Container Registry
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      You know when you start something and then regret it!? I think I&rsquo;ll be sticking with Google Cloud Build; GitHub Actions appears functional and useful but I found the documentation to be confusing and limited and struggled to get a simple container image build|push working.
I&rsquo;ve long used Docker Hub but am planning to use it less as a result of the planned changes. I want to see Docker succeed and to do so it needs to find a way to make money but, there are free alternatives including the new GitHub Container Registry and the very very cheap Google Container Registry.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/201022/" class="link black dim">
        akri
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I was very interested to read about Microsoft&rsquo;s DeisLab&rsquo;s latest (rust-based) Kubernetes project: akri. If I understand it correctly, it provides a mechanism to make any (IoT) device accessible to containers running within a cluster. I need to spend more time playing around with it so that I can fully understand it. I had some problems getting the End-to-End demo running on Google Compute Engine (and then I tried DigitalOcean droplet) instances.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/cert-manager/" class="link blue hover-black">
            Tag: cert-manager
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/210108/" class="link black dim">
        Kubernetes cert-manager
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I developed an admission webhook for Akri, twice (Golang, Rust). I naively followed other examples for the generation of the certificates, created a 1.20 cluster and broke that process.
I&rsquo;d briefly considered using cert-manager recently but quickly abandoned the idea thinking it would be onerous and unnecessary complexity for little-old-me. I was wrong. It&rsquo;s excellent and I recommend it highly.
I won&rsquo;t reproduce the v1beta1 and v1 examples from the Stackoverflow question as they should be self-explanatory.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/device-plugins/" class="link blue hover-black">
            Tag: device-plugins&#34;
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/201217/" class="link black dim">
        Kubernetes Device Plugins
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m debugging an issue with Akri Zeroconf protocol in which Instance environment variables are no longer (!) being surfaced within the Broker pods. In my adventures, it seemed useful to better understand how Akri works and specifically, how Akri uses Kubernetes Device Plugins.
IIUC plugins register with the Kubelet (!) via a gRPC service (Registration) that the Kubelet exposes on a UNIX socket at /var/lib/kubelet/device-plugins/kubelet.sock
Then (!) if successful, devices should be reported by the Node&rsquo;s metadata (spec) and available to be bound to Pods.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/indieweb/" class="link blue hover-black">
            Tag: indieweb
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/201203/" class="link black dim">
        webmention
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Let&rsquo;s see if this works!?
I&rsquo;ve added the following link to this site&rsquo;s baseof.html so that it is now rendered for each page:
&lt;link href=&#34;https://us-central1-webmention.cloudfunctions.net/webmention&#34; rel=&#34;webmention&#34; /&gt; I discovered indieweb yesterday reading about webmention. Who knows what got me to webmention!?
The principles of both are sound. Instead of relying on come-go behemoths to run our digital world, indieweb seeks to provide technologies that enable us to achieve things without them.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/webmention/" class="link blue hover-black">
            Tag: webmention
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/201203/" class="link black dim">
        webmention
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Let&rsquo;s see if this works!?
I&rsquo;ve added the following link to this site&rsquo;s baseof.html so that it is now rendered for each page:
&lt;link href=&#34;https://us-central1-webmention.cloudfunctions.net/webmention&#34; rel=&#34;webmention&#34; /&gt; I discovered indieweb yesterday reading about webmention. Who knows what got me to webmention!?
The principles of both are sound. Instead of relying on come-go behemoths to run our digital world, indieweb seeks to provide technologies that enable us to achieve things without them.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/pest/" class="link blue hover-black">
            Tag: pest
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/201202/" class="link black dim">
        pest: parsing in Rust
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      A Microsoft engineer introduced me to pest as a way to introduce service filtering in a ZeroConf plugin that I&rsquo;m prototyping for Akri. It&rsquo;s been fun to learn but I worry that, because I won&rsquo;t use it frequently, I&rsquo;m going to quickly forget what I&rsquo;ve done. So, here are my notes.
Here&rsquo;s the problem, I&rsquo;d like to be able to provide users of the ZeroConf plugin with a string-based filter that permits them to filter the services discovered when the Akri agent browses a network.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/zeroconf/" class="link blue hover-black">
            Tag: zeroconf
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/201202/" class="link black dim">
        pest: parsing in Rust
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      A Microsoft engineer introduced me to pest as a way to introduce service filtering in a ZeroConf plugin that I&rsquo;m prototyping for Akri. It&rsquo;s been fun to learn but I worry that, because I won&rsquo;t use it frequently, I&rsquo;m going to quickly forget what I&rsquo;ve done. So, here are my notes.
Here&rsquo;s the problem, I&rsquo;d like to be able to provide users of the ZeroConf plugin with a string-based filter that permits them to filter the services discovered when the Akri agent browses a network.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/github-actions/" class="link blue hover-black">
            Tag: github-actions
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/201029/" class="link black dim">
        GitHub Actions &amp;&amp; GitHub Container Registry
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      You know when you start something and then regret it!? I think I&rsquo;ll be sticking with Google Cloud Build; GitHub Actions appears functional and useful but I found the documentation to be confusing and limited and struggled to get a simple container image build|push working.
I&rsquo;ve long used Docker Hub but am planning to use it less as a result of the planned changes. I want to see Docker succeed and to do so it needs to find a way to make money but, there are free alternatives including the new GitHub Container Registry and the very very cheap Google Container Registry.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/microsoft/" class="link blue hover-black">
            Tag: microsoft
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/201022/" class="link black dim">
        akri
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I was very interested to read about Microsoft&rsquo;s DeisLab&rsquo;s latest (rust-based) Kubernetes project: akri. If I understand it correctly, it provides a mechanism to make any (IoT) device accessible to containers running within a cluster. I need to spend more time playing around with it so that I can fully understand it. I had some problems getting the End-to-End demo running on Google Compute Engine (and then I tried DigitalOcean droplet) instances.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/rocket/" class="link blue hover-black">
            Tag: rocket
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/201008/" class="link black dim">
        Deploying a Rust HTTP server to DigitalOcean App Platform
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      DigitalOcean launched an App Platform with many Supported Languages and Frameworks. I used Golang first, then wondered how to use non-natively-supported languages, i.e. Rust.
The good news is that Docker is a supported framework and so, you can run pretty much anything.
Repo: https://github.com/DazWilkin/do-apps-rust
Rust I&rsquo;m a Rust noob. I&rsquo;m always receptive to feedback on improvements to the code. I looked to mirror the Golang example. I&rsquo;m using rocket and rocket-prometheus for the first time:
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/cloud-storage/" class="link blue hover-black">
            Tag: cloud-storage
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200930/" class="link black dim">
        Hugo and Google Cloud Storage
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m using Hugo as a static site generator for this blog. I&rsquo;m using Firebase (for free) to host lefsilver.
I have other domains that I want to promote and decided to use Google Cloud Storage buckets for these sites. Using Google Cloud Storage for Hosting a static website and using Hugo to deploy sites to Google Cloud Storage (GCS) are documented but, I didn&rsquo;t find a location where this is combined into a single tutorial and I wanted to add an explanation for ensuring your sites are included in Google&rsquo;s and Bing&rsquo;s search indexes.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/gcs/" class="link blue hover-black">
            Tag: GCS
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200930/" class="link black dim">
        Hugo and Google Cloud Storage
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m using Hugo as a static site generator for this blog. I&rsquo;m using Firebase (for free) to host lefsilver.
I have other domains that I want to promote and decided to use Google Cloud Storage buckets for these sites. Using Google Cloud Storage for Hosting a static website and using Hugo to deploy sites to Google Cloud Storage (GCS) are documented but, I didn&rsquo;t find a location where this is combined into a single tutorial and I wanted to add an explanation for ensuring your sites are included in Google&rsquo;s and Bing&rsquo;s search indexes.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/hugo/" class="link blue hover-black">
            Tag: hugo
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200930/" class="link black dim">
        Hugo and Google Cloud Storage
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m using Hugo as a static site generator for this blog. I&rsquo;m using Firebase (for free) to host lefsilver.
I have other domains that I want to promote and decided to use Google Cloud Storage buckets for these sites. Using Google Cloud Storage for Hosting a static website and using Hugo to deploy sites to Google Cloud Storage (GCS) are documented but, I didn&rsquo;t find a location where this is combined into a single tutorial and I wanted to add an explanation for ensuring your sites are included in Google&rsquo;s and Bing&rsquo;s search indexes.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/cloud-build/" class="link blue hover-black">
            Tag: Cloud Build
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200928/" class="link black dim">
        Rube Goldberg Cloud Build machine for solving Quadratic equations
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Google Cloud Build is described by Google as a &ldquo;CI/CD platform&rdquo; but it&rsquo;s fundamentally a service that permits a series of containers to be chained together in a pipeline, optionally leveraging shared data.
As a CI/CD platform, it can be used to lint, test, compile and build software but, if you were looking for a way to explain its basic awesomeness, you could&hellip; I don&rsquo;t know&hellip; build a Rube Goldberg style machine that solves Quadratic equations using it 😄
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200206/" class="link black dim">
        Cloud Build wishlist: Mountable Golang Modules Proxy
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I think it would be valuable if Google were to provide volumes in Cloud Build of package registries (e.g. Go Modules; PyPi; Maven; NPM etc.).
Google provides a mirror of a subset of Docker Hub. This confers several benefits: Google&rsquo;s imprimatur; speed (latency); bandwidth; and convenience.
The same benefits would apply to package registries.
In the meantime, there&rsquo;s a hacky way to gain some of the benefits of these when using Cloud Build.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/cloud-shell/" class="link blue hover-black">
            Tag: Cloud Shell
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200917/" class="link black dim">
        Visual Studio Code plus Google Cloud Shell
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Update: 2020-09-24 Three updates since I wrote the post:
gcloud alpha cloud-shell get-mount-command ${DIR} It&rsquo;s possible to use sshfs to mount the Cloud Shell home directory locally:
DIR=/path/to/dir gcloud alpha cloud-shell get-mount-command ${DIR} Which generates something of the form:
sshfs [[USERNAME]]@[[HOST]]: ${DIR} \ -p [[PORT]] \ -oIdentityFile=~/.ssh/google_compute_engine \ -oStrictHostKeyChecking=no You may then code --new-window ${DIR}
curl command may lack .sshHost curl&rsquo;ing the cloudshell.googleapis.com endpoint will result in a null value for .
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/visual-studio-code/" class="link blue hover-black">
            Tag: Visual Studio Code
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200917/" class="link black dim">
        Visual Studio Code plus Google Cloud Shell
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Update: 2020-09-24 Three updates since I wrote the post:
gcloud alpha cloud-shell get-mount-command ${DIR} It&rsquo;s possible to use sshfs to mount the Cloud Shell home directory locally:
DIR=/path/to/dir gcloud alpha cloud-shell get-mount-command ${DIR} Which generates something of the form:
sshfs [[USERNAME]]@[[HOST]]: ${DIR} \ -p [[PORT]] \ -oIdentityFile=~/.ssh/google_compute_engine \ -oStrictHostKeyChecking=no You may then code --new-window ${DIR}
curl command may lack .sshHost curl&rsquo;ing the cloudshell.googleapis.com endpoint will result in a null value for .
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/actions/" class="link blue hover-black">
            Tag: actions
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200916/" class="link black dim">
        Actions SDK Conversational Quickstart
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Google&rsquo;s tutorial didn&rsquo;t work for me.
In this post, I&rsquo;ll help you get this working.
https://developers.google.com/assistant/conversational/quickstart
Create and set up a project This mostly works.
I recommend using the Actions Console as described to create the project.
I chose &ldquo;Custom&rdquo; and &ldquo;Blank Project&rdquo;
You need not enable Actions API as this is done automatically:
For the console work, I&rsquo;m going to use Google&rsquo;s excellent Cloud Shell. You may access this through the browser or through a terminal:
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/actions-sdk/" class="link blue hover-black">
            Tag: actions-sdk
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200916/" class="link black dim">
        Actions SDK Conversational Quickstart
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Google&rsquo;s tutorial didn&rsquo;t work for me.
In this post, I&rsquo;ll help you get this working.
https://developers.google.com/assistant/conversational/quickstart
Create and set up a project This mostly works.
I recommend using the Actions Console as described to create the project.
I chose &ldquo;Custom&rdquo; and &ldquo;Blank Project&rdquo;
You need not enable Actions API as this is done automatically:
For the console work, I&rsquo;m going to use Google&rsquo;s excellent Cloud Shell. You may access this through the browser or through a terminal:
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/assistant/" class="link blue hover-black">
            Tag: assistant
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200916/" class="link black dim">
        Actions SDK Conversational Quickstart
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Google&rsquo;s tutorial didn&rsquo;t work for me.
In this post, I&rsquo;ll help you get this working.
https://developers.google.com/assistant/conversational/quickstart
Create and set up a project This mostly works.
I recommend using the Actions Console as described to create the project.
I chose &ldquo;Custom&rdquo; and &ldquo;Blank Project&rdquo;
You need not enable Actions API as this is done automatically:
For the console work, I&rsquo;m going to use Google&rsquo;s excellent Cloud Shell. You may access this through the browser or through a terminal:
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/trillian/" class="link blue hover-black">
            Tag: trillian
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200908/" class="link black dim">
        Trillian Map Mode
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Chatting with one of Google&rsquo;s Trillian team, I was encouraged to explore Trillian&rsquo;s Map Mode. The following is the result of some spelunking through this unfamiliar cave. I can&rsquo;t provide any guarantee that this usage is correct or sufficient.
Here&rsquo;s the repo: https://github.com/DazWilkin/go-trillian-map
I&rsquo;ve written about Trillian Log Mode elsewhere.
I uncovered use of Trillian Map Mode through Trillian&rsquo;s integration tests. I&rsquo;m unclear on the distinction between TrillianMapClient and TrillianMapWriteClient but the latter served most of my needs.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200817/" class="link black dim">
        WASM Transparency
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve been playing around with a proof-of-concept combining WASM and Trillian. The hypothesis was to explore using WASM as a form of chaincode with Trillian. The project works but it&rsquo;s far from being a chaincode-like solution.
Let&rsquo;s start with a couple of (trivial) examples and then I&rsquo;ll explain what&rsquo;s going on and how it&rsquo;s implemented.
2020/08/14 18:42:17 [main:loop:dynamic-invoke] Method: mul 2020/08/14 18:42:17 [random:New] Message 2020/08/14 18:42:17 [random:New] Float32 2020/08/14 18:42:17 [random:New] Float32 2020/08/14 18:42:17 [random:New] Message 2020/08/14 18:42:17 [random:New] Float32 2020/08/14 18:42:17 [random:New] Float32 2020/08/14 18:42:17 [Client:Invoke] Metadata: complex.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200429/" class="link black dim">
        Rust implementation of Crate Transparency using Google Trillian
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve been hacking on a Rust-based transparent application for Google Trillian. As appears to be my fixation, this personality is for another package manager. This time, Rust&rsquo;s Crates often found in crates.io which is Rust&rsquo;s Package Registry. I discussed this project earlier this month Rust Crate Transparency &amp;&amp; Rust SDK for Google Trillian and and earlier approach for Python&rsquo;s packages with pypi-transparency.
This time, of course, I&rsquo;m using Rust. And, by way of a first for me, for the gRPC server implementation (aka &ldquo;personality&rdquo;).
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200403/" class="link black dim">
        Rust Crate Transparency &amp;&amp; Rust SDK for Google Trillian
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m noodling the utility of a Transparency solution for Rust Crates. When developers push crates to Cargo, a bunch of metadata is associated with the crate. E.g. protobuf. As with Golang Modules, Python packages on PyPi etc., there appears to be utility in making tamperproof recordings of these publications. Then, other developers may confirm that a crate pulled from cates.io is highly unlikely to have been changed.
On Linux, Cargo stores downloaded crates under ${HOME}/.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200326/" class="link black dim">
        Google Trillian on Cloud Run
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve written previously (Google Trillian for Noobs) about Google&rsquo;s interesting project Trillian and about some of the &ldquo;personalities&rdquo; (e.g. PyPi Transparency) that I&rsquo;ve build using it.
Having gone slight cra-cra on Cloud Run and gRPC this week with Golang gRPC Cloud Run and gRPC, Cloud Run &amp; Endpoints, I thought it&rsquo;d be fun to deploy Trillian and a personality to Cloud Run.
It mostly (!) works :-)
At the end of the post, I&rsquo;ve summarized creating a Cloud SQL instance to host the Trillian data(base).
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/190930/" class="link black dim">
        PyPi Transparency Client (Rust)
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve finally being able to hack my way through to a working Rust gRPC client (for PyPi Transparency).
It&rsquo;s not very good: poorly structured, hacky etc. but it serves the purpose of giving me a foothold into Rust development so that I can evolve it as I learn the language and its practices.
There are several Rust crates (SDK) for gRPC. There&rsquo;s no sanctioned SDK for Rust on grpc.io.
I chose stepancheg&rsquo;s grpc-rust because it&rsquo;s a pure Rust implementation (not built atop the C implementation).
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/190926/" class="link black dim">
        PyPi Transparency
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve been noodling around with another Trillian personality.
Another in a theme that interests me in providing tamperproof logs for the packages in the popular package management registries.
The Golang team recently announced Go Module Mirror which is built atop Trillian. It seems to me that all the package registries (Go Modules, npm, Maven, NuGet etc.) would benefit from tamperproof logs hosted by a trusted 3rd-party.
As you may have guessed, PyPi Transparency is a log for PyPi packages.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/190907/" class="link black dim">
        pypi-transparency
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      The goal of pypi-transparency is very similar to the underlying motivation for the Golang team&rsquo;s Checksum Database (also built with Trillian).
Even though, PyPi provides hashes of the content of packages it hosts, the developer must trust that PyPi&rsquo;s data is consistent. One ambition with pypi-transparency is to provide a companion, tamperproof log of PyPi package files in order to provide a double-check of these hashes.
It is important to understand what this does (and does not) provide.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/binaryen/" class="link blue hover-black">
            Tag: binaryen
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200819/" class="link black dim">
        Minimizing WASM binaries
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve spent time recently playing around with WebAssembly (WASM) and waPC. Rust and WASM were born at Mozilla and there&rsquo;s a natural affinity with writing WASM binaries in Rust. In the WASM examples I&rsquo;ve been using for WASM Transparency, waPC and MsgPack and waPC and Protobufs.
I&rsquo;ve created 3 WASM binaries: complex.wasm, simplex.wasm and fabcar.wasm and each is about 2.5MB when:
cargo build --target=wasm32-unknown-unknown --release The Rust and WebAssembly book has an excellent section titled Shrinking .
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/twiggy/" class="link blue hover-black">
            Tag: twiggy
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200819/" class="link black dim">
        Minimizing WASM binaries
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve spent time recently playing around with WebAssembly (WASM) and waPC. Rust and WASM were born at Mozilla and there&rsquo;s a natural affinity with writing WASM binaries in Rust. In the WASM examples I&rsquo;ve been using for WASM Transparency, waPC and MsgPack and waPC and Protobufs.
I&rsquo;ve created 3 WASM binaries: complex.wasm, simplex.wasm and fabcar.wasm and each is about 2.5MB when:
cargo build --target=wasm32-unknown-unknown --release The Rust and WebAssembly book has an excellent section titled Shrinking .
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/wasm/" class="link blue hover-black">
            Tag: wasm
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200819/" class="link black dim">
        Minimizing WASM binaries
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve spent time recently playing around with WebAssembly (WASM) and waPC. Rust and WASM were born at Mozilla and there&rsquo;s a natural affinity with writing WASM binaries in Rust. In the WASM examples I&rsquo;ve been using for WASM Transparency, waPC and MsgPack and waPC and Protobufs.
I&rsquo;ve created 3 WASM binaries: complex.wasm, simplex.wasm and fabcar.wasm and each is about 2.5MB when:
cargo build --target=wasm32-unknown-unknown --release The Rust and WebAssembly book has an excellent section titled Shrinking .
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200817/" class="link black dim">
        WASM Transparency
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve been playing around with a proof-of-concept combining WASM and Trillian. The hypothesis was to explore using WASM as a form of chaincode with Trillian. The project works but it&rsquo;s far from being a chaincode-like solution.
Let&rsquo;s start with a couple of (trivial) examples and then I&rsquo;ll explain what&rsquo;s going on and how it&rsquo;s implemented.
2020/08/14 18:42:17 [main:loop:dynamic-invoke] Method: mul 2020/08/14 18:42:17 [random:New] Message 2020/08/14 18:42:17 [random:New] Float32 2020/08/14 18:42:17 [random:New] Float32 2020/08/14 18:42:17 [random:New] Message 2020/08/14 18:42:17 [random:New] Float32 2020/08/14 18:42:17 [random:New] Float32 2020/08/14 18:42:17 [Client:Invoke] Metadata: complex.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200807/" class="link black dim">
        waPC and MsgPack (Rust|Golang)
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      As my reader will know (Hey Mom!), I&rsquo;ve been noodling around with WASM and waPC. I&rsquo;ve been exploring ways to pass structured messages across the host:guest boundary.
Protobufs was my first choice. @KevinHoffman created waPC and waSCC and he explained to me and that wSCC uses Message Pack.
It&rsquo;s slightly surprising to me (still) that technologies like this exist with everyone else seemingly using them and I&rsquo;ve not heard of them.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200723/" class="link black dim">
        Envoy WASM filters in Rust
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      A digression thanks to Sal Rashid who&rsquo;s exploring WASM filters w/ Envoy.
The documentation is sparse but:
How to write WASM filters for Envoy&hellip; There is a Rust SDK but it&rsquo;s not documented:
proxy-wasm-rust-sdk I found two useful posts by Rustaceans who were able to make use of it:
Extending Envoy with WASM and Rust Extending Istio with Rust and WebAssembly Here&rsquo;s my simple use of the SDK&rsquo;s examples.
wasme curl -sL https://run.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200717/" class="link black dim">
        Remotely invoking WASM functions using gRPC and waPC
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Following on from waPC &amp; Protobufs, I can now remotely invoke (arbitrary) WASM functions:
Client:
The logging isn&rsquo;t perfectly clear but, the client gets (a previously added) WASM binary from the server (using the SHA-256 of the WASM binary as a unique identifier). The result includes metadata that includes a protobuf descriptor of the WASM binary&rsquo;s functions. The descriptor defines gRPC services (that represent the WASM functions) with input (parameters) and output (results) messages.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200617/" class="link black dim">
        WASM Cloud Functions
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Following on from waPC &amp; Protobufs and a question on Stack Overflow about Cloud Functions, I was compelled to try running WASM on Cloud Functions no JavaScript.
I wanted to reuse the WASM waPC functions that I&rsquo;d written in Rust as described in the other post. Cloud Functions does not (yet!?) provide a Rust runtime and so I&rsquo;m using the waPC Host for Go in this example.
It works!
PARAMS=$(printf &#39;{&#34;a&#34;:{&#34;real&#34;:39,&#34;imag&#34;:3},&#34;b&#34;:{&#34;real&#34;:39,&#34;imag&#34;:3}}&#39; | base64) TOKEN=$(gcloud auth print-identity-token) echo &#34;{ \&#34;filename\&#34;:\&#34;complex.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200612/" class="link black dim">
        waPC &amp; Protobufs
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m hacking around with a solution that combines WASM and Google Trillian.
Ultimately, I&rsquo;d like to be able to ship WASM (binaries) to a Trillian personality and then invoke (exported) functions on them. Some this was borne from the interesting exploration of Krustlet and its application of wascc.
I&rsquo;m still booting into WASM but it&rsquo;s a very interesting technology that has most interesting potential outside the browser. Some folks have been trailblazing the technology and I have been reading Kevin Hoffman&rsquo;s medium and wascc (nee waxosuit) work.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200508/" class="link black dim">
        Google Container Registry w/ OCI
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve been spending some time this week with Krustlet.
I&rsquo;m working on documenting how to run Krustlet(s) alongside GKE. I&rsquo;ve been running a Krustlet with MicroK8s.
The Krustlet demos reference WASM assemblines stored in Azure Container Registry as OCI containers. Google Container Registry supports OCI format and so I tried (successfully) using GCR instead of AZR.
There may be an easier approach but this is how I got this working.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/gprc/" class="link blue hover-black">
            Tag: gprc
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200817/" class="link black dim">
        WASM Transparency
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve been playing around with a proof-of-concept combining WASM and Trillian. The hypothesis was to explore using WASM as a form of chaincode with Trillian. The project works but it&rsquo;s far from being a chaincode-like solution.
Let&rsquo;s start with a couple of (trivial) examples and then I&rsquo;ll explain what&rsquo;s going on and how it&rsquo;s implemented.
2020/08/14 18:42:17 [main:loop:dynamic-invoke] Method: mul 2020/08/14 18:42:17 [random:New] Message 2020/08/14 18:42:17 [random:New] Float32 2020/08/14 18:42:17 [random:New] Float32 2020/08/14 18:42:17 [random:New] Message 2020/08/14 18:42:17 [random:New] Float32 2020/08/14 18:42:17 [random:New] Float32 2020/08/14 18:42:17 [Client:Invoke] Metadata: complex.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/wapc/" class="link blue hover-black">
            Tag: wapc
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200817/" class="link black dim">
        WASM Transparency
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve been playing around with a proof-of-concept combining WASM and Trillian. The hypothesis was to explore using WASM as a form of chaincode with Trillian. The project works but it&rsquo;s far from being a chaincode-like solution.
Let&rsquo;s start with a couple of (trivial) examples and then I&rsquo;ll explain what&rsquo;s going on and how it&rsquo;s implemented.
2020/08/14 18:42:17 [main:loop:dynamic-invoke] Method: mul 2020/08/14 18:42:17 [random:New] Message 2020/08/14 18:42:17 [random:New] Float32 2020/08/14 18:42:17 [random:New] Float32 2020/08/14 18:42:17 [random:New] Message 2020/08/14 18:42:17 [random:New] Float32 2020/08/14 18:42:17 [random:New] Float32 2020/08/14 18:42:17 [Client:Invoke] Metadata: complex.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200807/" class="link black dim">
        waPC and MsgPack (Rust|Golang)
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      As my reader will know (Hey Mom!), I&rsquo;ve been noodling around with WASM and waPC. I&rsquo;ve been exploring ways to pass structured messages across the host:guest boundary.
Protobufs was my first choice. @KevinHoffman created waPC and waSCC and he explained to me and that wSCC uses Message Pack.
It&rsquo;s slightly surprising to me (still) that technologies like this exist with everyone else seemingly using them and I&rsquo;ve not heard of them.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200717/" class="link black dim">
        Remotely invoking WASM functions using gRPC and waPC
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Following on from waPC &amp; Protobufs, I can now remotely invoke (arbitrary) WASM functions:
Client:
The logging isn&rsquo;t perfectly clear but, the client gets (a previously added) WASM binary from the server (using the SHA-256 of the WASM binary as a unique identifier). The result includes metadata that includes a protobuf descriptor of the WASM binary&rsquo;s functions. The descriptor defines gRPC services (that represent the WASM functions) with input (parameters) and output (results) messages.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200617/" class="link black dim">
        WASM Cloud Functions
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Following on from waPC &amp; Protobufs and a question on Stack Overflow about Cloud Functions, I was compelled to try running WASM on Cloud Functions no JavaScript.
I wanted to reuse the WASM waPC functions that I&rsquo;d written in Rust as described in the other post. Cloud Functions does not (yet!?) provide a Rust runtime and so I&rsquo;m using the waPC Host for Go in this example.
It works!
PARAMS=$(printf &#39;{&#34;a&#34;:{&#34;real&#34;:39,&#34;imag&#34;:3},&#34;b&#34;:{&#34;real&#34;:39,&#34;imag&#34;:3}}&#39; | base64) TOKEN=$(gcloud auth print-identity-token) echo &#34;{ \&#34;filename\&#34;:\&#34;complex.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200612/" class="link black dim">
        waPC &amp; Protobufs
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m hacking around with a solution that combines WASM and Google Trillian.
Ultimately, I&rsquo;d like to be able to ship WASM (binaries) to a Trillian personality and then invoke (exported) functions on them. Some this was borne from the interesting exploration of Krustlet and its application of wascc.
I&rsquo;m still booting into WASM but it&rsquo;s a very interesting technology that has most interesting potential outside the browser. Some folks have been trailblazing the technology and I have been reading Kevin Hoffman&rsquo;s medium and wascc (nee waxosuit) work.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/messagepack/" class="link blue hover-black">
            Tag: messagepack
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200807/" class="link black dim">
        waPC and MsgPack (Rust|Golang)
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      As my reader will know (Hey Mom!), I&rsquo;ve been noodling around with WASM and waPC. I&rsquo;ve been exploring ways to pass structured messages across the host:guest boundary.
Protobufs was my first choice. @KevinHoffman created waPC and waSCC and he explained to me and that wSCC uses Message Pack.
It&rsquo;s slightly surprising to me (still) that technologies like this exist with everyone else seemingly using them and I&rsquo;ve not heard of them.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/msgpack/" class="link blue hover-black">
            Tag: msgpack
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200807/" class="link black dim">
        waPC and MsgPack (Rust|Golang)
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      As my reader will know (Hey Mom!), I&rsquo;ve been noodling around with WASM and waPC. I&rsquo;ve been exploring ways to pass structured messages across the host:guest boundary.
Protobufs was my first choice. @KevinHoffman created waPC and waSCC and he explained to me and that wSCC uses Message Pack.
It&rsquo;s slightly surprising to me (still) that technologies like this exist with everyone else seemingly using them and I&rsquo;ve not heard of them.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/envoy/" class="link blue hover-black">
            Tag: envoy
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200723/" class="link black dim">
        Envoy WASM filters in Rust
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      A digression thanks to Sal Rashid who&rsquo;s exploring WASM filters w/ Envoy.
The documentation is sparse but:
How to write WASM filters for Envoy&hellip; There is a Rust SDK but it&rsquo;s not documented:
proxy-wasm-rust-sdk I found two useful posts by Rustaceans who were able to make use of it:
Extending Envoy with WASM and Rust Extending Istio with Rust and WebAssembly Here&rsquo;s my simple use of the SDK&rsquo;s examples.
wasme curl -sL https://run.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/wascc/" class="link blue hover-black">
            Tag: wascc
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200612/" class="link black dim">
        waPC &amp; Protobufs
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m hacking around with a solution that combines WASM and Google Trillian.
Ultimately, I&rsquo;d like to be able to ship WASM (binaries) to a Trillian personality and then invoke (exported) functions on them. Some this was borne from the interesting exploration of Krustlet and its application of wascc.
I&rsquo;m still booting into WASM but it&rsquo;s a very interesting technology that has most interesting potential outside the browser. Some folks have been trailblazing the technology and I have been reading Kevin Hoffman&rsquo;s medium and wascc (nee waxosuit) work.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/gcr/" class="link blue hover-black">
            Tag: GCR
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200508/" class="link black dim">
        Google Container Registry w/ OCI
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve been spending some time this week with Krustlet.
I&rsquo;m working on documenting how to run Krustlet(s) alongside GKE. I&rsquo;ve been running a Krustlet with MicroK8s.
The Krustlet demos reference WASM assemblines stored in Azure Container Registry as OCI containers. Google Container Registry supports OCI format and so I tried (successfully) using GCR instead of AZR.
There may be an easier approach but this is how I got this working.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200207/" class="link black dim">
        Accessing GCR repos from Kubernetes
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Until today, I&rsquo;d not accessed a Google Container Registry repo from a non-GKE Kubernetes deployment.
It turns out that it&rsquo;s pretty well-documented (link) but, here&rsquo;s an end-end example.
Assuming:
BILLING=[[YOUR-BILLING]] PROJECT=[[YOUR-PROJECT]] SERVER=&#34;us.gcr.io&#34; If not already:
gcloud projects create {$PROJECT} gcloud beta billing projects link ${PROJECT} \ --billing-account=${BILLING} gcloud services enable containerregistry.googleapis.com \ --project=${PROJECT} Container Registry IMAGE=&#34;busybox&#34; # Or ... docker pull ${IMAGE} docker tag \ ${IMAGE} \ ${SERVER}/${PROJECT}/${IMAGE} docker push ${SERVER}/${PROJECT}/${IMAGE} gcloud container images list-tags ${SERVER}/${PROJECT}/${IMAGE} Service Account Create a service account that&rsquo;s permitted to download (read-only) images from this project&rsquo;s registry
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/oci/" class="link blue hover-black">
            Tag: oci
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200508/" class="link black dim">
        Google Container Registry w/ OCI
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve been spending some time this week with Krustlet.
I&rsquo;m working on documenting how to run Krustlet(s) alongside GKE. I&rsquo;ve been running a Krustlet with MicroK8s.
The Krustlet demos reference WASM assemblines stored in Azure Container Registry as OCI containers. Google Container Registry supports OCI format and so I tried (successfully) using GCR instead of AZR.
There may be an easier approach but this is how I got this working.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/crate/" class="link blue hover-black">
            Tag: crate
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200429/" class="link black dim">
        Rust implementation of Crate Transparency using Google Trillian
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve been hacking on a Rust-based transparent application for Google Trillian. As appears to be my fixation, this personality is for another package manager. This time, Rust&rsquo;s Crates often found in crates.io which is Rust&rsquo;s Package Registry. I discussed this project earlier this month Rust Crate Transparency &amp;&amp; Rust SDK for Google Trillian and and earlier approach for Python&rsquo;s packages with pypi-transparency.
This time, of course, I&rsquo;m using Rust. And, by way of a first for me, for the gRPC server implementation (aka &ldquo;personality&rdquo;).
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/ble/" class="link blue hover-black">
            Tag: BLE
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200417/" class="link black dim">
        Golang Xiaomi Bluetooth Temperature|Humidity (LYWSD03MMC) 2nd Gen
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Well, this became more of an adventure that I&rsquo;d originally wanted but, after learning some BLE and, with the help of others (Thanks Jonatha, JsBergbau), I&rsquo;ve sample code that connects to 4 Xiaomi 2nd gen. Thermometers, subscribes to readings and publishes the data to MQTT. From there, I&rsquo;m scraping it using Inuits MQTTGateway into Prometheus.
Repo: https://github.com/DazWilkin/gomijia2
Thanks|Credit: Jonathan McDowell for gomijia and help JsBergbau for help Background I&rsquo;ve been playing around with ESPHome and blogged around my very positive experience ESPHome, MQTT, Prometheus and almost Cloud IoT.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/lywsd03mmc/" class="link blue hover-black">
            Tag: LYWSD03MMC
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200417/" class="link black dim">
        Golang Xiaomi Bluetooth Temperature|Humidity (LYWSD03MMC) 2nd Gen
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Well, this became more of an adventure that I&rsquo;d originally wanted but, after learning some BLE and, with the help of others (Thanks Jonatha, JsBergbau), I&rsquo;ve sample code that connects to 4 Xiaomi 2nd gen. Thermometers, subscribes to readings and publishes the data to MQTT. From there, I&rsquo;m scraping it using Inuits MQTTGateway into Prometheus.
Repo: https://github.com/DazWilkin/gomijia2
Thanks|Credit: Jonathan McDowell for gomijia and help JsBergbau for help Background I&rsquo;ve been playing around with ESPHome and blogged around my very positive experience ESPHome, MQTT, Prometheus and almost Cloud IoT.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/xiaomi/" class="link blue hover-black">
            Tag: Xiaomi
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200417/" class="link black dim">
        Golang Xiaomi Bluetooth Temperature|Humidity (LYWSD03MMC) 2nd Gen
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Well, this became more of an adventure that I&rsquo;d originally wanted but, after learning some BLE and, with the help of others (Thanks Jonatha, JsBergbau), I&rsquo;ve sample code that connects to 4 Xiaomi 2nd gen. Thermometers, subscribes to readings and publishes the data to MQTT. From there, I&rsquo;m scraping it using Inuits MQTTGateway into Prometheus.
Repo: https://github.com/DazWilkin/gomijia2
Thanks|Credit: Jonathan McDowell for gomijia and help JsBergbau for help Background I&rsquo;ve been playing around with ESPHome and blogged around my very positive experience ESPHome, MQTT, Prometheus and almost Cloud IoT.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/esp/" class="link blue hover-black">
            Tag: ESP
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200325/" class="link black dim">
        gRPC, Cloud Run &amp; Endpoints
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      &lt;3 Google but there&rsquo;s quite often an assumption that we&rsquo;re all sitting around the engineering table and, of course, we&rsquo;re not.
Cloud Endpoints is a powerful offering but &ndash; IMO &ndash; it&rsquo;s super confusing to understand and complex to deploy.
If you&rsquo;re familiar with the motivations behind service meshes (e.g. Istio), Cloud Endpoints fits in a similar niche (&ldquo;neesh&rdquo; or &ldquo;nitch&rdquo;?). The underlying ambition is that, developers can take existing code and by adding a proxy (or sidecar), general-purpose abstractions, security, logging etc.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200227/" class="link black dim">
        ESPHome, MQTT, Prometheus and almost Cloud IoT
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      ESPHome is a very interesting project. I&rsquo;d not heard of it until this week and am surprised that it isn&rsquo;t more newsworthy.
I&rsquo;m always tinkering with IoT stuff, have a couple of Wemos D1 ESP8266s. They are brought out occasionally for learning. I&rsquo;ve been using them this week with ESPHome. I&rsquo;m looking to buy some Xiaomi BLE temperature sensors and thinking I could read the temperatures from these using the ESPs (thanks to ESPHome) and publish the data to MQTT.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/originstamp/" class="link blue hover-black">
            Tag: OriginStamp
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200312/" class="link black dim">
        OriginStamp Rust SDK Example
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I wrote recently describing Python and Golang clients for OriginStamp based on OriginStamp&rsquo;s API&rsquo;s swagger spec. As a way to pursue learning rust, I&rsquo;ve been forcing myself to write examples using rust. I&rsquo;m honestly finding learning rust tough going and think I&rsquo;m probably better to revert to the &ldquo;Learning Rust&rdquo; tutorials.
That said, herewith an explanation of building a rust client using an OpenAPI (!) generated SDK from OriginStamp&rsquo;s swagger spec.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200226/" class="link black dim">
        OriginStamp: Verifying Proofs
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Recently, I wrote about some initial adventures with OriginStamp
Using OriginStamp&rsquo;s UI or API, submitting a hash results in transactions being submitted to Bitcoin, Ethereum and a German newspaper.
Using the API, it&rsquo;s possible to query OriginStamp&rsquo;s service for a proof. This post explains how to verify such a proof.
The diligent reader among you (Hey Mom!) will recall that I submitted a hash for the message:
Frederik Jack is a bubbly Border Collie The SHA-256 hash of this message is:
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200219/" class="link black dim">
        FreeTSA &amp; Digitorus&#39; Timestamp SDK
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I wrote recently about some exploration of Timestamping with OriginStamp. Since writing that post, I had some supportive feedback from the helpful folks at OriginStamp and plan to continue exploring that solution.
Meanwhile, OriginStamp exposed me to timestamping and trusted timestamping and I discovered freeTSA.org.
What&rsquo;s the point? These services provide authoritative proof of the existence of a digital asset before some point in time; OriginStamp provides a richer service and uses multiple timestamp authorities including Bitcoin, Ethereum and rather interestingly a German Newspaper&rsquo;s Trusted Timestamp.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200217/" class="link black dim">
        OriginStamp Python|Golang SDK Examples
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      A friend mentioned OriginStamp to me.
NB There are 2 sites: originstamp.com and originstamp.org.
It&rsquo;s an interesting project.
It&rsquo;s a solution for providing auditable proof that you had a(ccess to) some digital thing before a certain date. OriginStamp provides user-|developer-friendly means to submit files|hashes (of your content) and have these bundled into transactions that are submitted to e.g. bitcoin.
I won&rsquo;t attempt to duplicate the narrative here, review OriginStamp&rsquo;s site and some of its content.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/swagger/" class="link blue hover-black">
            Tag: Swagger
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200312/" class="link black dim">
        OriginStamp Rust SDK Example
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I wrote recently describing Python and Golang clients for OriginStamp based on OriginStamp&rsquo;s API&rsquo;s swagger spec. As a way to pursue learning rust, I&rsquo;ve been forcing myself to write examples using rust. I&rsquo;m honestly finding learning rust tough going and think I&rsquo;m probably better to revert to the &ldquo;Learning Rust&rdquo; tutorials.
That said, herewith an explanation of building a rust client using an OpenAPI (!) generated SDK from OriginStamp&rsquo;s swagger spec.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200217/" class="link black dim">
        OriginStamp Python|Golang SDK Examples
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      A friend mentioned OriginStamp to me.
NB There are 2 sites: originstamp.com and originstamp.org.
It&rsquo;s an interesting project.
It&rsquo;s a solution for providing auditable proof that you had a(ccess to) some digital thing before a certain date. OriginStamp provides user-|developer-friendly means to submit files|hashes (of your content) and have these bundled into transactions that are submitted to e.g. bitcoin.
I won&rsquo;t attempt to duplicate the narrative here, review OriginStamp&rsquo;s site and some of its content.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/protoc/" class="link blue hover-black">
            Tag: protoc
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200310/" class="link black dim">
        Google&#39;s New Golang SDK for Protobufs
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Google has released a new Golang SDK for protobuf. In the [announcement], a useful tool to redact properties is described. If like me, this is somewhat novel to you, here&rsquo;s a mashup using Google&rsquo;s Protocol Buffer Basics w/ redaction.
To be very clear, as it&rsquo;s an important distinction:
Version Repo Docs v2 google.golang.org/protobuf Docs v1 github.com/golang/protobuf Docs Project Here&rsquo;s my project structure:
. ├── protoc-3.11.4-linux-x86_64 │ ├── bin │ │ └── protoc │ ├── include │ │ └── google │ └── readme.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/cloud-iot/" class="link blue hover-black">
            Tag: Cloud IoT
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200227/" class="link black dim">
        ESPHome, MQTT, Prometheus and almost Cloud IoT
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      ESPHome is a very interesting project. I&rsquo;d not heard of it until this week and am surprised that it isn&rsquo;t more newsworthy.
I&rsquo;m always tinkering with IoT stuff, have a couple of Wemos D1 ESP8266s. They are brought out occasionally for learning. I&rsquo;ve been using them this week with ESPHome. I&rsquo;m looking to buy some Xiaomi BLE temperature sensors and thinking I could read the temperatures from these using the ESPs (thanks to ESPHome) and publish the data to MQTT.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/esphome/" class="link blue hover-black">
            Tag: esphome
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200227/" class="link black dim">
        ESPHome, MQTT, Prometheus and almost Cloud IoT
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      ESPHome is a very interesting project. I&rsquo;d not heard of it until this week and am surprised that it isn&rsquo;t more newsworthy.
I&rsquo;m always tinkering with IoT stuff, have a couple of Wemos D1 ESP8266s. They are brought out occasionally for learning. I&rsquo;ve been using them this week with ESPHome. I&rsquo;m looking to buy some Xiaomi BLE temperature sensors and thinking I could read the temperatures from these using the ESPs (thanks to ESPHome) and publish the data to MQTT.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/iot/" class="link blue hover-black">
            Tag: IoT
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200227/" class="link black dim">
        ESPHome, MQTT, Prometheus and almost Cloud IoT
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      ESPHome is a very interesting project. I&rsquo;d not heard of it until this week and am surprised that it isn&rsquo;t more newsworthy.
I&rsquo;m always tinkering with IoT stuff, have a couple of Wemos D1 ESP8266s. They are brought out occasionally for learning. I&rsquo;ve been using them this week with ESPHome. I&rsquo;m looking to buy some Xiaomi BLE temperature sensors and thinking I could read the temperatures from these using the ESPs (thanks to ESPHome) and publish the data to MQTT.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/mosquitto/" class="link blue hover-black">
            Tag: mosquitto
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200227/" class="link black dim">
        ESPHome, MQTT, Prometheus and almost Cloud IoT
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      ESPHome is a very interesting project. I&rsquo;d not heard of it until this week and am surprised that it isn&rsquo;t more newsworthy.
I&rsquo;m always tinkering with IoT stuff, have a couple of Wemos D1 ESP8266s. They are brought out occasionally for learning. I&rsquo;ve been using them this week with ESPHome. I&rsquo;m looking to buy some Xiaomi BLE temperature sensors and thinking I could read the temperatures from these using the ESPs (thanks to ESPHome) and publish the data to MQTT.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/mqttgateway/" class="link blue hover-black">
            Tag: mqttgateway
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200227/" class="link black dim">
        ESPHome, MQTT, Prometheus and almost Cloud IoT
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      ESPHome is a very interesting project. I&rsquo;d not heard of it until this week and am surprised that it isn&rsquo;t more newsworthy.
I&rsquo;m always tinkering with IoT stuff, have a couple of Wemos D1 ESP8266s. They are brought out occasionally for learning. I&rsquo;ve been using them this week with ESPHome. I&rsquo;m looking to buy some Xiaomi BLE temperature sensors and thinking I could read the temperatures from these using the ESPs (thanks to ESPHome) and publish the data to MQTT.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/bitcoin/" class="link blue hover-black">
            Tag: Bitcoin
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200226/" class="link black dim">
        OriginStamp: Verifying Proofs
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Recently, I wrote about some initial adventures with OriginStamp
Using OriginStamp&rsquo;s UI or API, submitting a hash results in transactions being submitted to Bitcoin, Ethereum and a German newspaper.
Using the API, it&rsquo;s possible to query OriginStamp&rsquo;s service for a proof. This post explains how to verify such a proof.
The diligent reader among you (Hey Mom!) will recall that I submitted a hash for the message:
Frederik Jack is a bubbly Border Collie The SHA-256 hash of this message is:
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/merkle/" class="link blue hover-black">
            Tag: Merkle
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200226/" class="link black dim">
        OriginStamp: Verifying Proofs
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Recently, I wrote about some initial adventures with OriginStamp
Using OriginStamp&rsquo;s UI or API, submitting a hash results in transactions being submitted to Bitcoin, Ethereum and a German newspaper.
Using the API, it&rsquo;s possible to query OriginStamp&rsquo;s service for a proof. This post explains how to verify such a proof.
The diligent reader among you (Hey Mom!) will recall that I submitted a hash for the message:
Frederik Jack is a bubbly Border Collie The SHA-256 hash of this message is:
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/timestamping/" class="link blue hover-black">
            Tag: Timestamping
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200226/" class="link black dim">
        OriginStamp: Verifying Proofs
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Recently, I wrote about some initial adventures with OriginStamp
Using OriginStamp&rsquo;s UI or API, submitting a hash results in transactions being submitted to Bitcoin, Ethereum and a German newspaper.
Using the API, it&rsquo;s possible to query OriginStamp&rsquo;s service for a proof. This post explains how to verify such a proof.
The diligent reader among you (Hey Mom!) will recall that I submitted a hash for the message:
Frederik Jack is a bubbly Border Collie The SHA-256 hash of this message is:
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200219/" class="link black dim">
        FreeTSA &amp; Digitorus&#39; Timestamp SDK
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I wrote recently about some exploration of Timestamping with OriginStamp. Since writing that post, I had some supportive feedback from the helpful folks at OriginStamp and plan to continue exploring that solution.
Meanwhile, OriginStamp exposed me to timestamping and trusted timestamping and I discovered freeTSA.org.
What&rsquo;s the point? These services provide authoritative proof of the existence of a digital asset before some point in time; OriginStamp provides a richer service and uses multiple timestamp authorities including Bitcoin, Ethereum and rather interestingly a German Newspaper&rsquo;s Trusted Timestamp.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/tsa/" class="link blue hover-black">
            Tag: TSA
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200219/" class="link black dim">
        FreeTSA &amp; Digitorus&#39; Timestamp SDK
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I wrote recently about some exploration of Timestamping with OriginStamp. Since writing that post, I had some supportive feedback from the helpful folks at OriginStamp and plan to continue exploring that solution.
Meanwhile, OriginStamp exposed me to timestamping and trusted timestamping and I discovered freeTSA.org.
What&rsquo;s the point? These services provide authoritative proof of the existence of a digital asset before some point in time; OriginStamp provides a richer service and uses multiple timestamp authorities including Bitcoin, Ethereum and rather interestingly a German Newspaper&rsquo;s Trusted Timestamp.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/container-registry/" class="link blue hover-black">
            Tag: Container Registry
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200207/" class="link black dim">
        Accessing GCR repos from Kubernetes
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Until today, I&rsquo;d not accessed a Google Container Registry repo from a non-GKE Kubernetes deployment.
It turns out that it&rsquo;s pretty well-documented (link) but, here&rsquo;s an end-end example.
Assuming:
BILLING=[[YOUR-BILLING]] PROJECT=[[YOUR-PROJECT]] SERVER=&#34;us.gcr.io&#34; If not already:
gcloud projects create {$PROJECT} gcloud beta billing projects link ${PROJECT} \ --billing-account=${BILLING} gcloud services enable containerregistry.googleapis.com \ --project=${PROJECT} Container Registry IMAGE=&#34;busybox&#34; # Or ... docker pull ${IMAGE} docker tag \ ${IMAGE} \ ${SERVER}/${PROJECT}/${IMAGE} docker push ${SERVER}/${PROJECT}/${IMAGE} gcloud container images list-tags ${SERVER}/${PROJECT}/${IMAGE} Service Account Create a service account that&rsquo;s permitted to download (read-only) images from this project&rsquo;s registry
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/proxy.golang.org/" class="link blue hover-black">
            Tag: proxy.golang.org
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200206/" class="link black dim">
        Cloud Build wishlist: Mountable Golang Modules Proxy
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I think it would be valuable if Google were to provide volumes in Cloud Build of package registries (e.g. Go Modules; PyPi; Maven; NPM etc.).
Google provides a mirror of a subset of Docker Hub. This confers several benefits: Google&rsquo;s imprimatur; speed (latency); bandwidth; and convenience.
The same benefits would apply to package registries.
In the meantime, there&rsquo;s a hacky way to gain some of the benefits of these when using Cloud Build.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/gce/" class="link blue hover-black">
            Tag: GCE
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200122/" class="link black dim">
        Setting up a GCE Instance as an Inlets Exit Node
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      The prolific Alex Ellis has a new project, Inlets.
Here&rsquo;s a quick tutorial using Google Compute Platform&rsquo;s (GCP) Compute Engine (GCE).
NB I&rsquo;m using one of Google&rsquo;s &ldquo;Always free&rdquo; f1-micro instances but you may still pay for network *gress and storage
Assumptions I&rsquo;m assuming you&rsquo;ve a Google account, have used GCP and have a billing account established, i.e. the following returns at least one billing account:
gcloud beta billing accounts list If you&rsquo;ve only one billing account and it&rsquo;s the one you wish to use, then you can:
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/inlets/" class="link blue hover-black">
            Tag: inlets
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200122/" class="link black dim">
        Setting up a GCE Instance as an Inlets Exit Node
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      The prolific Alex Ellis has a new project, Inlets.
Here&rsquo;s a quick tutorial using Google Compute Platform&rsquo;s (GCP) Compute Engine (GCE).
NB I&rsquo;m using one of Google&rsquo;s &ldquo;Always free&rdquo; f1-micro instances but you may still pay for network *gress and storage
Assumptions I&rsquo;m assuming you&rsquo;ve a Google account, have used GCP and have a billing account established, i.e. the following returns at least one billing account:
gcloud beta billing accounts list If you&rsquo;ve only one billing account and it&rsquo;s the one you wish to use, then you can:
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/dd-wrt/" class="link blue hover-black">
            Tag: DD-WRT
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200113/" class="link black dim">
        Trendnet TEW-812DRU and DD-WRT
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      The FBI Portland published an interesting advisory with several, sensible recommendations including firewalling IoT devices from other devices on a home network. I decided to deploy a redundant Trendnet TEW-812DRU version 2.0 for this purpose.
Caveat Developer: Before I go further, I don&rsquo;t recommend installing DD-WRT on a Trendnet TEW-812DRU unless you&rsquo;re willing to brick the device irrecoverably.
I read the DD-WRT instructions several times (&ldquo;peacock thread&rdquo;,router database &ndash; do not use v3.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/tew-812dru/" class="link blue hover-black">
            Tag: TEW-812DRU
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200113/" class="link black dim">
        Trendnet TEW-812DRU and DD-WRT
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      The FBI Portland published an interesting advisory with several, sensible recommendations including firewalling IoT devices from other devices on a home network. I decided to deploy a redundant Trendnet TEW-812DRU version 2.0 for this purpose.
Caveat Developer: Before I go further, I don&rsquo;t recommend installing DD-WRT on a Trendnet TEW-812DRU unless you&rsquo;re willing to brick the device irrecoverably.
I read the DD-WRT instructions several times (&ldquo;peacock thread&rdquo;,router database &ndash; do not use v3.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/trendnet/" class="link blue hover-black">
            Tag: Trendnet
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200113/" class="link black dim">
        Trendnet TEW-812DRU and DD-WRT
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      The FBI Portland published an interesting advisory with several, sensible recommendations including firewalling IoT devices from other devices on a home network. I decided to deploy a redundant Trendnet TEW-812DRU version 2.0 for this purpose.
Caveat Developer: Before I go further, I don&rsquo;t recommend installing DD-WRT on a Trendnet TEW-812DRU unless you&rsquo;re willing to brick the device irrecoverably.
I read the DD-WRT instructions several times (&ldquo;peacock thread&rdquo;,router database &ndash; do not use v3.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/google-fit/" class="link blue hover-black">
            Tag: Google Fit
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200110/" class="link black dim">
        Google Fit
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve spent a few days exploring [Google Fit SDK] as I try to wean myself from my obsession with metrics (of all forms). A quick Googling got me to Robert&rsquo;s Exporter Google Fit Daily Steps, Weight and Distance to a Google Sheet. This works and is probably where I should have stopped&hellip; avoiding the rabbit hole that I&rsquo;ve been down&hellip;
I threw together a simple Golang implementation of the SDK using Google&rsquo;s Golang API Client Library.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/google-home/" class="link blue hover-black">
            Tag: Google Home
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/200107/" class="link black dim">
        Google Home Exporter
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;m obsessing over Prometheus exporters. First came Linode Exporter, then GCP Exporter and, on Sunday, I stumbled upon a reverse-engineered API for Google Home devices and so wrote a very basic Google Home SDK and a similarly basic Google Home Exporter:
The SDK only implements /setup/eureka_info and then only some of the returned properties. There&rsquo;s not a lot of metric-like data to use besides SignalLevel (signal_level) and NoiseLevel (noise_level). I&rsquo;m not clear on the meaning of some of the properties.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/bnf/" class="link blue hover-black">
            Tag: BNF
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/191230/" class="link black dim">
        Adventures around BPF
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I think (!?) this interesting learning experience started with Envoy Go Extensions.
IIUC, Cilium contributed this mechanism (Envoy Go Extensions) by which it&rsquo;s possible to extend Envoy using Golang. The documentation references BPF. Cilium and BNF were both unfamiliar technologies to me and so began my learning. This part of the journey concludes with Weave Scope.
I learned that Cilium is a CNI implementation that may be used with Kubernetes. GKE defaults (but is not limited to) to Google&rsquo;s own CNI implementation (link).
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/cilium/" class="link blue hover-black">
            Tag: Cilium
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/191230/" class="link black dim">
        Adventures around BPF
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I think (!?) this interesting learning experience started with Envoy Go Extensions.
IIUC, Cilium contributed this mechanism (Envoy Go Extensions) by which it&rsquo;s possible to extend Envoy using Golang. The documentation references BPF. Cilium and BNF were both unfamiliar technologies to me and so began my learning. This part of the journey concludes with Weave Scope.
I learned that Cilium is a CNI implementation that may be used with Kubernetes. GKE defaults (but is not limited to) to Google&rsquo;s own CNI implementation (link).
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/weave-scope/" class="link blue hover-black">
            Tag: Weave Scope
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/191230/" class="link black dim">
        Adventures around BPF
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I think (!?) this interesting learning experience started with Envoy Go Extensions.
IIUC, Cilium contributed this mechanism (Envoy Go Extensions) by which it&rsquo;s possible to extend Envoy using Golang. The documentation references BPF. Cilium and BNF were both unfamiliar technologies to me and so began my learning. This part of the journey concludes with Weave Scope.
I learned that Cilium is a CNI implementation that may be used with Kubernetes. GKE defaults (but is not limited to) to Google&rsquo;s own CNI implementation (link).
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/weaveworks/" class="link blue hover-black">
            Tag: Weaveworks
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/191230/" class="link black dim">
        Adventures around BPF
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I think (!?) this interesting learning experience started with Envoy Go Extensions.
IIUC, Cilium contributed this mechanism (Envoy Go Extensions) by which it&rsquo;s possible to extend Envoy using Golang. The documentation references BPF. Cilium and BNF were both unfamiliar technologies to me and so began my learning. This part of the journey concludes with Weave Scope.
I learned that Cilium is a CNI implementation that may be used with Kubernetes. GKE defaults (but is not limited to) to Google&rsquo;s own CNI implementation (link).
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/kubernetes-engine/" class="link blue hover-black">
            Tag: Kubernetes Engine
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/191220/" class="link black dim">
        Google Cloud Platform (GCP) Exporter
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Earlier this week I discussed a Linode Prometheus Exporter.
I added metrics for Digital Ocean&rsquo;s Managed Kubernetes service to @metalmatze&rsquo;s Digital Ocean Exporter.
This left, metrics for Google Cloud Platform (GCP) which has, for many years, been my primary cloud platform. So, today I wrote Prometheus Exporter for Google Cloud Platform.
All 3 of these exporters follow the template laid down by @metalmatze and, because each of these services has a well-written Golang SDK, it&rsquo;s straightforward to implement an exporter for each of them.
    </div>
  </div>
</div>

        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/190924/" class="link black dim">
        Kubernetes Engine and Free Tier
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Google Cloud Platform Free Tier appears (please verify this for yourself) to provide the ability to run a(n admittedly miniscule) Kubernetes cluster for free. So, why do this? It provides a definitive Kubernetes (Engine) experience on Google Cloud Platform that you may use for learning and testing.
Kubernetes Engine the master node(s) and the control plane are free.
Kubernetes (i.e. Compute Engine) nodes potentially incur charges including for the VM runtime and any attached storage, snapshots etc.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/ingress/" class="link blue hover-black">
            Tag: Ingress
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/191211/" class="link black dim">
        NGINX Ingress
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve written a couple of deployment options (Google Compute Engine; Kubernetes) for an open-source project. The Kubernetes deployment provides NodePort and (TCP) LoadBalancer options and I&rsquo;ve been trying (unsuccessfully) to add HTTPS Load-balancing.
I should (!) try to deploy to Google Kubernetes Engine (GKE) but I&rsquo;ve been using microk8s, Digital Ocean Managed Kubernetes and the Linode LKE Beta. Each of these requires an implementation of Ingress controller. For GKE, GCP&rsquo;s HTTP/S Load-balancer (GCLB) is used.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/nginx/" class="link blue hover-black">
            Tag: NGINX
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/191211/" class="link black dim">
        NGINX Ingress
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      I&rsquo;ve written a couple of deployment options (Google Compute Engine; Kubernetes) for an open-source project. The Kubernetes deployment provides NodePort and (TCP) LoadBalancer options and I&rsquo;ve been trying (unsuccessfully) to add HTTPS Load-balancing.
I should (!) try to deploy to Google Kubernetes Engine (GKE) but I&rsquo;ve been using microk8s, Digital Ocean Managed Kubernetes and the Linode LKE Beta. Each of these requires an implementation of Ingress controller. For GKE, GCP&rsquo;s HTTP/S Load-balancer (GCLB) is used.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/cadvisor/" class="link blue hover-black">
            Tag: cadvisor
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/190925/" class="link black dim">
        Run cAdvisor when using Docker Compose
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      cAdvisor has long been a favorite monitoring tool of mine. I&rsquo;m using Docker Compose for local testing and have begun including a cAdvisor in my docker-compose.yaml files.
cadvisor: restart: always image: google/cadvisor:${CADVISOR_VERSION} container_name: cadvisor # command: # - --prometheus_endpoint=&#34;/metrics&#34; # Default volumes: - &#34;/:/rootfs:ro&#34; - &#34;/var/run:/var/run:rw&#34; - &#34;/sys:/sys:ro&#34; - &#34;/var/snap/docker/current:/var/lib/docker:ro&#34; #- &#34;/var/lib/docker/:/var/lib/docker:ro&#34; expose: - &#34;8080&#34; ports: - 8080:8080 I&rsquo;d not realized until recently, that cAdvisor also surfaces a Prometheus metrics endpoint and so, if you do follow this path and you&rsquo;re also using Prometheus, don&rsquo;t forget to add cAdvisor to your Prometheus targets.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/docker-compose/" class="link blue hover-black">
            Tag: docker-compose
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/190925/" class="link black dim">
        Run cAdvisor when using Docker Compose
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      cAdvisor has long been a favorite monitoring tool of mine. I&rsquo;m using Docker Compose for local testing and have begun including a cAdvisor in my docker-compose.yaml files.
cadvisor: restart: always image: google/cadvisor:${CADVISOR_VERSION} container_name: cadvisor # command: # - --prometheus_endpoint=&#34;/metrics&#34; # Default volumes: - &#34;/:/rootfs:ro&#34; - &#34;/var/run:/var/run:rw&#34; - &#34;/sys:/sys:ro&#34; - &#34;/var/snap/docker/current:/var/lib/docker:ro&#34; #- &#34;/var/lib/docker/:/var/lib/docker:ro&#34; expose: - &#34;8080&#34; ports: - 8080:8080 I&rsquo;d not realized until recently, that cAdvisor also surfaces a Prometheus metrics endpoint and so, if you do follow this path and you&rsquo;re also using Prometheus, don&rsquo;t forget to add cAdvisor to your Prometheus targets.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/gke/" class="link blue hover-black">
            Tag: GKE
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/190924/" class="link black dim">
        Kubernetes Engine and Free Tier
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Google Cloud Platform Free Tier appears (please verify this for yourself) to provide the ability to run a(n admittedly miniscule) Kubernetes cluster for free. So, why do this? It provides a definitive Kubernetes (Engine) experience on Google Cloud Platform that you may use for learning and testing.
Kubernetes Engine the master node(s) and the control plane are free.
Kubernetes (i.e. Compute Engine) nodes potentially incur charges including for the VM runtime and any attached storage, snapshots etc.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/vs-code/" class="link blue hover-black">
            Tag: vs-code
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/190610/" class="link black dim">
        Visual Studio Code: gopls and YAML
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      The Go team is developing a Language Server Protocol [LSP] implementation) called gopls. Visual Studio Code (and others) support LSP. Other languages (e.g. Python have LSP implementations too). I&rsquo;ve been using gopls for some time. It works (mostly) very well and replaces multiple, indepedent tools with two (gopls and delve).
My Visual Studio Code settings that include gopls is:
&#34;go.autocompleteUnimportedPackages&#34;: true, &#34;go.useLanguageServer&#34;: true, &#34;[go]&#34;: { &#34;editor.snippetSuggestions&#34;: &#34;none&#34;, &#34;editor.formatOnSave&#34;: true, &#34;editor.codeActionsOnSave&#34;: { &#34;source.
    </div>
  </div>
</div>

        
      
        <h2 class="f1">
          <a href="/tags/pypi-transparency/" class="link blue hover-black">
            Tag: pypi-transparency
          </a>
        </h2>
        
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/190907/" class="link black dim">
        pypi-transparency
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      The goal of pypi-transparency is very similar to the underlying motivation for the Golang team&rsquo;s Checksum Database (also built with Trillian).
Even though, PyPi provides hashes of the content of packages it hosts, the developer must trust that PyPi&rsquo;s data is consistent. One ambition with pypi-transparency is to provide a companion, tamperproof log of PyPi package files in order to provide a double-check of these hashes.
It is important to understand what this does (and does not) provide.
    </div>
  </div>
</div>

        
      
    </section>
  </div>

    </main>
    <footer class="bg-dark-blue bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://pretired.dazwilkin.com/" >
    &copy;  (p)retired 2023 
  </a>
    <div>
<div class="ananke-socials">
  
    
    <a href="https://github.com/DazWilkin" target="_blank" rel="noopener" class="github ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="GitHub link" aria-label="follow on GitHub——Opens in a new window">
      
        <span class="icon"><svg style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
  <path d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"/>
</svg>
</span>
      
<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span></a>
  
    
    <a href="https://www.linkedin.com/in/dazwilkin/" target="_blank" rel="noopener" class="linkedin ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="LinkedIn link" aria-label="follow on LinkedIn——Opens in a new window">
      
        <span class="icon"><svg style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span>
      
<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span></a>
  
    
    <a href="https://medium.com/@DazWilkin" target="_blank" rel="noopener" class="medium ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Medium link" aria-label="follow on Medium——Opens in a new window">
      
        <span class="icon"><svg style="enable-background:new 0 0 170 170;" version="1.1" viewBox="0 0 170 170"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M46.5340803,65.2157554 C46.6968378,63.6076572 46.0836,62.018231 44.8828198,60.93592 L32.6512605,46.2010582 L32.6512605,44 L70.6302521,44 L99.9859944,108.380952 L125.794585,44 L162,44 L162,46.2010582 L151.542017,56.2281011 C150.640424,56.9153477 150.193188,58.0448862 150.380019,59.1628454 L150.380019,132.837155 C150.193188,133.955114 150.640424,135.084652 151.542017,135.771899 L161.755369,145.798942 L161.755369,148 L110.38282,148 L110.38282,145.798942 L120.963119,135.527337 C122.002801,134.487948 122.002801,134.182246 122.002801,132.592593 L122.002801,73.0417402 L92.585901,147.755438 L88.6106443,147.755438 L54.3622782,73.0417402 L54.3622782,123.115814 C54.0767278,125.221069 54.7759199,127.3406 56.2581699,128.863022 L70.0186741,145.55438 L70.0186741,147.755438 L31,147.755438 L31,145.55438 L44.7605042,128.863022 C46.2319621,127.338076 46.8903838,125.204485 46.5340803,123.115814 L46.5340803,65.2157554 Z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span>
      
<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span></a>
  
    
    <a href="https://stackoverflow.com/users/609290/dazwilkin" target="_blank" rel="noopener" class="stackoverflow ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Stack Overflow link" aria-label="follow on Stack Overflow——Opens in a new window">
      
        <span class="icon"><svg
    style="enable-background:new 0 0 67 67;"
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 24 24"
    
>
    <path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm.869 5.903l3.114 4.567-.975.665-3.115-4.567.976-.665zm-2.812 2.585l4.84 2.838-.6 1.017-4.842-2.838.602-1.017zm-1.276 2.724l5.413 1.521-.291 1.077-5.428-1.458.306-1.14zm-.588 2.461l5.687.569-.103 1.12-5.691-.513.107-1.176zm-.169 2.16h5.835v1.167h-5.835v-1.167zm7.976 3.167h-10v-6h1v5h8v-5h1v6zm.195-8.602l-.945-5.446 1.162-.202.947 5.446-1.164.202z"/>
</svg>
</span>
      
<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span></a>
  
</div>
</div>
  </div>
</footer>

  </body>
</html>
