<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>(p)retired</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.148.0-DEV">
    
    
    
    
      <meta name="robots" content="index, follow">
    

    
<link rel="stylesheet" href="/ananke/css/main.min.d05fb5f317fcf33b3a52936399bdf6f47dc776516e1692e412ec7d76f4a5faa2.css" >




    
    
    
      

    

    
    
      <link href="/tags/akri/index.xml" rel="alternate" type="application/rss+xml" title="(p)retired" />
      <link href="/tags/akri/index.xml" rel="feed" type="application/rss+xml" title="(p)retired" />
      
    

    <script data-goatcounter="https://pretired.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
 
    <meta property="og:url" content="https://pretired.dazwilkin.com/tags/akri/">
  <meta property="og:site_name" content="(p)retired">
  <meta property="og:title" content="Akri">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="website">

  <meta itemprop="name" content="Akri">
  <meta itemprop="datePublished" content="2021-01-08T00:00:00-08:00">
  <meta itemprop="dateModified" content="2021-01-08T00:00:00-08:00">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Akri">

      
    
	
  </head>

  <body class="ma0 avenir bg-near-white production">

    

  <header>
    <div class="pb3-m pb6-l bg-dark-blue">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        (p)retired
      
    </a>
    <div class="flex-l items-center">
      

      
      <div class="ananke-socials"></div>

    </div>
  </div>
</nav>

      <div class="tc-l pv3 ph3 ph4-ns">
        <h1 class="f2 f-subheadline-l fw2 light-silver mb0 lh-title">
          Akri
        </h1>
        
      </div>
    </div>
  </header>


    <main class="pb7" role="main">
      
  <article class="cf pa3 pa4-m pa4-l">
    <div class="measure-wide-l center f4 lh-copy nested-copy-line-height nested-links mid-gray">
      <p>Below you will find pages that utilize the taxonomy term “Akri”</p>
    </div>
  </article>
  <div class="mw8 center">
    <section class="flex-ns flex-wrap justify-around mt5">
      
        <div class="relative w-100  mb4 bg-white">
            <div class="mb3 pa4 mid-gray overflow-hidden">
    
      <div class="f6">
        January 8, 2021
      </div>
    
    <h1 class="f3 near-black">
      <a href="/posts/210108/" class="link black dim">
        Kubernetes cert-manager
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>I developed an <a href="/posts/201229/">admission webhook</a> for Akri, twice (<a href="https://github.com/DazWilkin/akri-webhook">Golang</a>, <a href="https://github.com/DazWilkin/akri-webhook-rust">Rust</a>). I naively followed other examples for the generation of the certificates, created a 1.20 cluster and <a href="https://stackoverflow.com/questions/65587904/">broke</a> that process.</p>
<p>I&rsquo;d briefly considered using <a href="https://cert-manager.io"><code>cert-manager</code></a> recently but quickly abandoned the idea thinking it would be onerous and unnecessary complexity for little-old-me. I was wrong. It&rsquo;s excellent and I recommend it highly.</p>
<p>I won&rsquo;t reproduce the <code>v1beta1</code> and <code>v1</code> examples from the Stackoverflow question as they should be self-explanatory. I suspect (!?) that I should not have used Kubernete&rsquo;s (API Server&rsquo;s) CA for the Webhook but it could well be that I just don&rsquo;t understand the correct approach.</p>
    </div>
  <a href="/posts/210108/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>

        </div>
      
        <div class="relative w-100  mb4 bg-white">
            <div class="mb3 pa4 mid-gray overflow-hidden">
    
      <div class="f6">
        December 29, 2020
      </div>
    
    <h1 class="f3 near-black">
      <a href="/posts/201229/" class="link black dim">
        Kubernetes Webhooks
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>I spent some time last week writing my first <a href="https://kubernetes.io/docs/reference/access-authn-authz/extensible-admission-controllers/">admission webhook</a> for Kubernetes. I wrote the handler in Golang because I&rsquo;m most familiar with Golang and because, as Kubernetes&rsquo; native language, I was more confident that the necessary SDKs would exist and that the documentation would likely use Golang by default. I struggled to find useful documentation and so this post is to help you (and me!) remember how to do this next time!</p>
    </div>
  <a href="/posts/201229/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>

        </div>
      
        <div class="relative w-100  mb4 bg-white">
            <div class="mb3 pa4 mid-gray overflow-hidden">
    
      <div class="f6">
        December 17, 2020
      </div>
    
    <h1 class="f3 near-black">
      <a href="/posts/201217/" class="link black dim">
        Kubernetes Device Plugins
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>I&rsquo;m debugging an <a href="https://github.com/deislabs/akri/issues/177">issue</a> with Akri <code>Zeroconf</code> <a href="https://github.com/DazWilkin/akri/tree/protocol-zeroconf">protocol</a> in which Instance environment variables are no longer (!) being surfaced within the Broker pods. In my adventures, it seemed useful to better understand how Akri works and specifically, how Akri uses Kubernetes <a href="https://kubernetes.io/docs/concepts/extend-kubernetes/compute-storage-net/device-plugins/">Device Plugins</a>.</p>
<p>IIUC plugins register with the Kubelet (!) via a gRPC service (<code>Registration</code>) that the Kubelet exposes on a UNIX socket at <code>/var/lib/kubelet/device-plugins/kubelet.sock</code></p>
<p>Then (!) if successful, devices should be reported by the Node&rsquo;s metadata (spec) and available to be bound to Pods.</p>
    </div>
  <a href="/posts/201217/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>

        </div>
      
        <div class="relative w-100  mb4 bg-white">
            <div class="mb3 pa4 mid-gray overflow-hidden">
    
      <div class="f6">
        November 13, 2020
      </div>
    
    <h1 class="f3 near-black">
      <a href="/posts/201113/" class="link black dim">
        Akri
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>For the past couple of weeks, I&rsquo;ve been playing around with <a href="http://github.com/deislabs/akri">Akri</a>, a Microsoft (DeisLabs) project for <a href="https://cloudblogs.microsoft.com/opensource/2020/10/20/announcing-akri-open-source-project-building-connected-edge-kubernetes/">building a connected edge with Kubernetes</a>. Kubernetes, IoT, Rust (and Golang) make this all compelling to me.</p>
<p>Initially, I deployed an Akri <a href="https://github.com/deislabs/akri/blob/main/docs/end-to-end-demo.md">End-to-End</a> to <a href="https://microk8s.io/">MicroK8s</a> on Google Compute Engine (<a href="https://github.com/deislabs/akri/blob/main/docs/end-to-end-demo-gce.md">link</a>) and Digital Ocean (<a href="https://github.com/deislabs/akri/blob/main/docs/end-to-end-demo-do.md">link</a>). But I was interested to create me own example and so have proposed a very (!) simple <a href="https://github.com/DazWilkin/akri/blob/protocol-http/docs/extensibility-http.md">HTTP-based protocol</a>.</p>
<p>This blog summarizes my thoughts about Akri and an explanation of the HTTP protocol implementation in the hope that this helps others.</p>
    </div>
  <a href="/posts/201113/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>

        </div>
      
        <div class="relative w-100  mb4 bg-white">
            <div class="mb3 pa4 mid-gray overflow-hidden">
    
      <div class="f6">
        October 29, 2020
      </div>
    
    <h1 class="f3 near-black">
      <a href="/posts/201029/" class="link black dim">
        GitHub Actions &amp;&amp; GitHub Container Registry
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>You know when you start something and then regret it!? I think I&rsquo;ll be sticking with <a href="https://cloud.google.com/cloud-build">Google Cloud Build</a>; <a href="https://github.com/features/actions">GitHub Actions</a> appears functional and useful but I found the documentation to be confusing and limited and struggled to get a simple container image build|push working.</p>
<p>I&rsquo;ve long used <a href="https://hub.docker.com">Docker Hub</a> but am planning to use it less as a result of the planned <a href="https://www.docker.com/blog/scaling-docker-to-serve-millions-more-developers-network-egress/">changes</a>. I want to see Docker succeed and to do so it needs to find a way to make money but, there are free alternatives including the new <a href="https://github.blog/2020-09-01-introducing-github-container-registry/">GitHub Container Registry</a> and the very very cheap <a href="https://cloud.google.com/container-registry">Google Container Registry</a>.</p>
    </div>
  <a href="/posts/201029/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>

        </div>
      
        <div class="relative w-100  mb4 bg-white">
            <div class="mb3 pa4 mid-gray overflow-hidden">
    
      <div class="f6">
        October 22, 2020
      </div>
    
    <h1 class="f3 near-black">
      <a href="/posts/201022/" class="link black dim">
        akri
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>I was very interested to read about Microsoft&rsquo;s DeisLab&rsquo;s latest (rust-based) Kubernetes project: <a href="https://cloudblogs.microsoft.com/opensource/2020/10/20/announcing-akri-open-source-project-building-connected-edge-kubernetes/">akri</a>. If I understand it correctly, it provides a mechanism to make any (IoT) device accessible to containers running within a cluster. I need to spend more time playing around with it so that I can fully understand it. I had some problems getting the <a href="https://github.com/deislabs/akri/blob/main/docs/end-to-end-demo.md">End-to-End</a> demo running on Google Compute Engine (and then I tried DigitalOcean droplet) instances. So, here&rsquo;s a two-ways solution to get you going.</p>
    </div>
  <a href="/posts/201022/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>

        </div>
      
    </section>
  </div>

    </main>
    <footer class="bg-dark-blue bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://pretired.dazwilkin.com/" >
    &copy;  (p)retired 2025 
  </a>
    <div><div class="ananke-socials"></div>
</div>
  </div>
</footer>

  </body>
</html>